import{$b as St,A as F,Aa as ai,Ab as vr,Ac as Et,Ba as cr,Bb as Xa,Bc as It,Ca as lr,Cc as Cr,D as rr,Da as dr,Db as yr,Dc as Sr,E as I,Ea as Ut,Ec as Er,F as T,Fc as eo,G as nr,Ga as Ua,Gc as Ir,H as Fa,Ha as La,Hb as Qa,Hc as Tr,Ia as Ba,Ib as Ii,Ic as Mr,J as ar,Ja as Va,Jc as di,K as ri,Ka as Mn,Kc as Rr,L as ja,Lb as Ja,Lc as to,M as Nt,Mb as se,N as or,Na as mr,Nb as V,Nc as Rn,Oa as ie,Ob as Y,Oc as io,P as Ye,Pa as ur,Pb as q,Pc as ro,Q as u,Qb as Ne,Qc as no,Ra as hr,Rb as wt,Rc as ao,S as x,Sa as ae,Sb as Z,Sc as oo,Ta as L,Tb as Ya,Tc as so,Ua as qa,Ub as z,Uc as co,V as M,Va as B,Vc as lo,W as _e,Wb as Fe,Wc as mo,Xa as P,Xb as Ct,Xc as uo,Y as y,Ya as De,Yb as xr,Yc as ho,Z as Se,_ as g,_a as oi,_b as ve,a as At,aa as Pe,ab as oe,ac as je,b as Pt,ba as Ei,bb as za,bc as Ue,c as v,ca as In,cc as ce,d as Da,dc as le,e as Sn,eb as pr,ec as kr,fb as gr,fc as wr,g as ei,ga as c,gb as Ge,gc as Za,ha as s,hb as fr,hc as Ka,i as er,ia as w,ib as D,ic as H,ja as Ft,jb as be,jc as J,k as En,ka as jt,kb as ft,l as Ga,la as j,lb as _r,m as we,ma as sr,mb as _t,n as ti,na as S,nb as br,o as Na,oa as C,ob as bt,p as Dt,pa as ut,pb as vt,q as mt,qa as ht,qb as Ha,rb as $a,rc as K,s as Gt,sa as Tn,sb as Wa,ta as ni,tb as yt,tc as si,u as tr,ua as pt,ub as xt,v as ir,va as gt,vb as kt,w as Ae,wa as Ze,wb as _,wc as ci,x as fe,xa as d,xc as Le,y as ii,ya as G,yc as li,z as Ce,za as E,zc as Be}from"./chunk-ZOLR2227.js";var go=v((bp,On)=>{"use strict";global.crypto&&global.crypto.getRandomValues?On.exports.randomBytes=function(i){var t=new Uint8Array(i);return global.crypto.getRandomValues(t),t}:On.exports.randomBytes=function(i){for(var t=new Array(i),e=0;e<i;e++)t[e]=Math.floor(Math.random()*256);return t}});var Bt=v((vp,_o)=>{"use strict";var Fl=go(),fo="abcdefghijklmnopqrstuvwxyz012345";_o.exports={string:function(i){for(var t=fo.length,e=Fl.randomBytes(i),r=[],n=0;n<i;n++)r.push(fo.substr(e[n]%t,1));return r.join("")},number:function(i){return Math.floor(Math.random()*i)},numberString:function(i){var t=(""+(i-1)).length,e=new Array(t+1).join("0");return(e+this.number(i)).slice(-t)}}});var et=v((yp,Fr)=>{"use strict";var jl=Bt(),ui={},An=!1,bo=global.chrome&&global.chrome.app&&global.chrome.app.runtime;Fr.exports={attachEvent:function(i,t){typeof global.addEventListener<"u"?global.addEventListener(i,t,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+i,t),global.attachEvent("on"+i,t))},detachEvent:function(i,t){typeof global.addEventListener<"u"?global.removeEventListener(i,t,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+i,t),global.detachEvent("on"+i,t))},unloadAdd:function(i){if(bo)return null;var t=jl.string(8);return ui[t]=i,An&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(i){i in ui&&delete ui[i]},triggerUnloadCallbacks:function(){for(var i in ui)ui[i](),delete ui[i]}};var Ul=function(){An||(An=!0,Fr.exports.triggerUnloadCallbacks())};bo||Fr.exports.attachEvent("unload",Ul)});var yo=v((xp,vo)=>{"use strict";vo.exports=function(t,e){if(e=e.split(":")[0],t=+t,!t)return!1;switch(e){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}});var wo=v(Pn=>{"use strict";var Ll=Object.prototype.hasOwnProperty,Bl;function xo(i){try{return decodeURIComponent(i.replace(/\+/g," "))}catch{return null}}function ko(i){try{return encodeURIComponent(i)}catch{return null}}function Vl(i){for(var t=/([^=?#&]+)=?([^&]*)/g,e={},r;r=t.exec(i);){var n=xo(r[1]),a=xo(r[2]);n===null||a===null||n in e||(e[n]=a)}return e}function ql(i,t){t=t||"";var e=[],r,n;typeof t!="string"&&(t="?");for(n in i)if(Ll.call(i,n)){if(r=i[n],!r&&(r===null||r===Bl||isNaN(r))&&(r=""),n=ko(n),r=ko(r),n===null||r===null)continue;e.push(n+"="+r)}return e.length?t+e.join("&"):""}Pn.stringify=ql;Pn.parse=Vl});var Nn=v((wp,Ro)=>{"use strict";var So=yo(),jr=wo(),zl=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Eo=/[\n\r\t]/g,Hl=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Io=/:\d+$/,$l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Wl=/^[a-zA-Z]:/;function Gn(i){return(i||"").toString().replace(zl,"")}var Dn=[["#","hash"],["?","query"],function(t,e){return Ve(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Co={hash:1,query:1};function To(i){var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t={};var e=t.location||{};i=i||e;var r={},n=typeof i,a;if(i.protocol==="blob:")r=new qe(unescape(i.pathname),{});else if(n==="string"){r=new qe(i,{});for(a in Co)delete r[a]}else if(n==="object"){for(a in i)a in Co||(r[a]=i[a]);r.slashes===void 0&&(r.slashes=Hl.test(i.href))}return r}function Ve(i){return i==="file:"||i==="ftp:"||i==="http:"||i==="https:"||i==="ws:"||i==="wss:"}function Mo(i,t){i=Gn(i),i=i.replace(Eo,""),t=t||{};var e=$l.exec(i),r=e[1]?e[1].toLowerCase():"",n=!!e[2],a=!!e[3],l=0,o;return n?a?(o=e[2]+e[3]+e[4],l=e[2].length+e[3].length):(o=e[2]+e[4],l=e[2].length):a?(o=e[3]+e[4],l=e[3].length):o=e[4],r==="file:"?l>=2&&(o=o.slice(2)):Ve(r)?o=e[4]:r?n&&(o=o.slice(2)):l>=2&&Ve(t.protocol)&&(o=e[4]),{protocol:r,slashes:n||Ve(r),slashesCount:l,rest:o}}function Xl(i,t){if(i==="")return t;for(var e=(t||"/").split("/").slice(0,-1).concat(i.split("/")),r=e.length,n=e[r-1],a=!1,l=0;r--;)e[r]==="."?e.splice(r,1):e[r]===".."?(e.splice(r,1),l++):l&&(r===0&&(a=!0),e.splice(r,1),l--);return a&&e.unshift(""),(n==="."||n==="..")&&e.push(""),e.join("/")}function qe(i,t,e){if(i=Gn(i),i=i.replace(Eo,""),!(this instanceof qe))return new qe(i,t,e);var r,n,a,l,o,m,f=Dn.slice(),p=typeof t,h=this,b=0;for(p!=="object"&&p!=="string"&&(e=t,t=null),e&&typeof e!="function"&&(e=jr.parse),t=To(t),n=Mo(i||"",t),r=!n.protocol&&!n.slashes,h.slashes=n.slashes||r&&t.slashes,h.protocol=n.protocol||t.protocol||"",i=n.rest,(n.protocol==="file:"&&(n.slashesCount!==2||Wl.test(i))||!n.slashes&&(n.protocol||n.slashesCount<2||!Ve(h.protocol)))&&(f[3]=[/(.*)/,"pathname"]);b<f.length;b++){if(l=f[b],typeof l=="function"){i=l(i,h);continue}a=l[0],m=l[1],a!==a?h[m]=i:typeof a=="string"?(o=a==="@"?i.lastIndexOf(a):i.indexOf(a),~o&&(typeof l[2]=="number"?(h[m]=i.slice(0,o),i=i.slice(o+l[2])):(h[m]=i.slice(o),i=i.slice(0,o)))):(o=a.exec(i))&&(h[m]=o[1],i=i.slice(0,o.index)),h[m]=h[m]||r&&l[3]&&t[m]||"",l[4]&&(h[m]=h[m].toLowerCase())}e&&(h.query=e(h.query)),r&&t.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||t.pathname!=="")&&(h.pathname=Xl(h.pathname,t.pathname)),h.pathname.charAt(0)!=="/"&&Ve(h.protocol)&&(h.pathname="/"+h.pathname),So(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(o=h.auth.indexOf(":"),~o?(h.username=h.auth.slice(0,o),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(o+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&Ve(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function Ql(i,t,e){var r=this;switch(i){case"query":typeof t=="string"&&t.length&&(t=(e||jr.parse)(t)),r[i]=t;break;case"port":r[i]=t,So(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[i]="");break;case"hostname":r[i]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[i]=t,Io.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!e;break;case"pathname":case"hash":if(t){var n=i==="pathname"?"/":"#";r[i]=t.charAt(0)!==n?n+t:t}else r[i]=t;break;case"username":case"password":r[i]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(r.username=t.slice(0,a),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(a+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<Dn.length;l++){var o=Dn[l];o[4]&&(r[o[1]]=r[o[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&Ve(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function Jl(i){(!i||typeof i!="function")&&(i=jr.stringify);var t,e=this,r=e.host,n=e.protocol;n&&n.charAt(n.length-1)!==":"&&(n+=":");var a=n+(e.protocol&&e.slashes||Ve(e.protocol)?"//":"");return e.username?(a+=e.username,e.password&&(a+=":"+e.password),a+="@"):e.password?(a+=":"+e.password,a+="@"):e.protocol!=="file:"&&Ve(e.protocol)&&!r&&e.pathname!=="/"&&(a+="@"),(r[r.length-1]===":"||Io.test(e.hostname)&&!e.port)&&(r+=":"),a+=r+e.pathname,t=typeof e.query=="object"?i(e.query):e.query,t&&(a+=t.charAt(0)!=="?"?"?"+t:t),e.hash&&(a+=e.hash),a}qe.prototype={set:Ql,toString:Jl};qe.extractProtocol=Mo;qe.location=To;qe.trimLeft=Gn;qe.qs=jr;Ro.exports=qe});var ue=v((Cp,Oo)=>{"use strict";var Yl=Nn(),Zl=function(){};Oo.exports={getOrigin:function(i){if(!i)return null;var t=new Yl(i);if(t.protocol==="file:")return null;var e=t.port;return e||(e=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+e},isOriginEqual:function(i,t){var e=this.getOrigin(i)===this.getOrigin(t);return Zl("same",i,t,e),e},isSchemeEqual:function(i,t){return i.split(":")[0]===t.split(":")[0]},addPath:function(i,t){var e=i.split("?");return e[0]+t+(e[1]?"?"+e[1]:"")},addQuery:function(i,t){return i+(i.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(i){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(i)||/^\[::1\]$/.test(i)}}});var R=v((Sp,Fn)=>{typeof Object.create=="function"?Fn.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Fn.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}});var jn=v((Ep,Ao)=>{"use strict";function Ur(){this._listeners={}}Ur.prototype.addEventListener=function(i,t){i in this._listeners||(this._listeners[i]=[]);var e=this._listeners[i];e.indexOf(t)===-1&&(e=e.concat([t])),this._listeners[i]=e};Ur.prototype.removeEventListener=function(i,t){var e=this._listeners[i];if(e){var r=e.indexOf(t);if(r!==-1){e.length>1?this._listeners[i]=e.slice(0,r).concat(e.slice(r+1)):delete this._listeners[i];return}}};Ur.prototype.dispatchEvent=function(){var i=arguments[0],t=i.type,e=arguments.length===1?[i]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,e),t in this._listeners)for(var r=this._listeners[t],n=0;n<r.length;n++)r[n].apply(this,e)};Ao.exports=Ur});var ee=v((Ip,Po)=>{"use strict";var Kl=R(),Lr=jn();function Tt(){Lr.call(this)}Kl(Tt,Lr);Tt.prototype.removeAllListeners=function(i){i?delete this._listeners[i]:this._listeners={}};Tt.prototype.once=function(i,t){var e=this,r=!1;function n(){e.removeListener(i,n),r||(r=!0,t.apply(this,arguments))}this.on(i,n)};Tt.prototype.emit=function(){var i=arguments[0],t=this._listeners[i];if(t){for(var e=arguments.length,r=new Array(e-1),n=1;n<e;n++)r[n-1]=arguments[n];for(var a=0;a<t.length;a++)t[a].apply(this,r)}};Tt.prototype.on=Tt.prototype.addListener=Lr.prototype.addEventListener;Tt.prototype.removeListener=Lr.prototype.removeEventListener;Po.exports.EventEmitter=Tt});var Go=v((Tp,Un)=>{"use strict";var Do=global.WebSocket||global.MozWebSocket;Do?Un.exports=function(t){return new Do(t)}:Un.exports=void 0});var Lo=v((Mp,Uo)=>{"use strict";var No=et(),ed=ue(),td=R(),Fo=ee().EventEmitter,jo=Go(),tt=function(){};function it(i,t,e){if(!it.enabled())throw new Error("Transport created when disabled");Fo.call(this),tt("constructor",i);var r=this,n=ed.addPath(i,"/websocket");n.slice(0,5)==="https"?n="wss"+n.slice(5):n="ws"+n.slice(4),this.url=n,this.ws=new jo(this.url,[],e),this.ws.onmessage=function(a){tt("message event",a.data),r.emit("message",a.data)},this.unloadRef=No.unloadAdd(function(){tt("unload"),r.ws.close()}),this.ws.onclose=function(a){tt("close event",a.code,a.reason),r.emit("close",a.code,a.reason),r._cleanup()},this.ws.onerror=function(a){tt("error event",a),r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}td(it,Fo);it.prototype.send=function(i){var t="["+i+"]";tt("send",t),this.ws.send(t)};it.prototype.close=function(){tt("close");var i=this.ws;this._cleanup(),i&&i.close()};it.prototype._cleanup=function(){tt("_cleanup");var i=this.ws;i&&(i.onmessage=i.onclose=i.onerror=null),No.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};it.enabled=function(){return tt("enabled"),!!jo};it.transportName="websocket";it.roundTrips=2;Uo.exports=it});var qo=v((Rp,Vo)=>{"use strict";var id=R(),Bo=ee().EventEmitter,rt=function(){};function Vt(i,t){rt(i),Bo.call(this),this.sendBuffer=[],this.sender=t,this.url=i}id(Vt,Bo);Vt.prototype.send=function(i){rt("send",i),this.sendBuffer.push(i),this.sendStop||this.sendSchedule()};Vt.prototype.sendScheduleWait=function(){rt("sendScheduleWait");var i=this,t;this.sendStop=function(){rt("sendStop"),i.sendStop=null,clearTimeout(t)},t=setTimeout(function(){rt("timeout"),i.sendStop=null,i.sendSchedule()},25)};Vt.prototype.sendSchedule=function(){rt("sendSchedule",this.sendBuffer.length);var i=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(e){i.sendStop=null,e?(rt("error",e),i.emit("close",e.code||1006,"Sending error: "+e),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}};Vt.prototype._cleanup=function(){rt("_cleanup"),this.removeAllListeners()};Vt.prototype.close=function(){rt("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};Vo.exports=Vt});var $o=v((Op,Ho)=>{"use strict";var rd=R(),zo=ee().EventEmitter,Ri=function(){};function Br(i,t,e){Ri(t),zo.call(this),this.Receiver=i,this.receiveUrl=t,this.AjaxObject=e,this._scheduleReceiver()}rd(Br,zo);Br.prototype._scheduleReceiver=function(){Ri("_scheduleReceiver");var i=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(e){Ri("message",e),i.emit("message",e)}),t.once("close",function(e,r){Ri("close",e,r,i.pollIsClosing),i.poll=t=null,i.pollIsClosing||(r==="network"?i._scheduleReceiver():(i.emit("close",e||1006,r),i.removeAllListeners()))})};Br.prototype.abort=function(){Ri("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};Ho.exports=Br});var Vn=v((Ap,Wo)=>{"use strict";var nd=R(),ad=ue(),Ln=qo(),od=$o(),Vr=function(){};function Bn(i,t,e,r,n){var a=ad.addPath(i,t);Vr(a);var l=this;Ln.call(this,i,e),this.poll=new od(r,a,n),this.poll.on("message",function(o){Vr("poll message",o),l.emit("message",o)}),this.poll.once("close",function(o,m){Vr("poll close",o,m),l.poll=null,l.emit("close",o,m),l.close()})}nd(Bn,Ln);Bn.prototype.close=function(){Ln.prototype.close.call(this),Vr("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};Wo.exports=Bn});var qt=v((Pp,Jo)=>{"use strict";var sd=R(),cd=ue(),Xo=Vn(),qn=function(){};function ld(i){return function(t,e,r){qn("create ajax sender",t,e);var n={};typeof e=="string"&&(n.headers={"Content-type":"text/plain"});var a=cd.addPath(t,"/xhr_send"),l=new i("POST",a,e,n);return l.once("finish",function(o){if(qn("finish",o),l=null,o!==200&&o!==204)return r(new Error("http status "+o));r()}),function(){qn("abort"),l.close(),l=null;var o=new Error("Aborted");o.code=1e3,r(o)}}}function Qo(i,t,e,r){Xo.call(this,i,t,ld(r),e,r)}sd(Qo,Xo);Jo.exports=Qo});var Ai=v((Dp,Zo)=>{"use strict";var dd=R(),Yo=ee().EventEmitter,Mt=function(){};function Oi(i,t){Mt(i),Yo.call(this);var e=this;this.bufferPosition=0,this.xo=new t("POST",i,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(r,n){Mt("finish",r,n),e._chunkHandler(r,n),e.xo=null;var a=r===200?"network":"permanent";Mt("close",a),e.emit("close",null,a),e._cleanup()})}dd(Oi,Yo);Oi.prototype._chunkHandler=function(i,t){if(Mt("_chunkHandler",i),!(i!==200||!t))for(var e=-1;;this.bufferPosition+=e+1){var r=t.slice(this.bufferPosition);if(e=r.indexOf(`
`),e===-1)break;var n=r.slice(0,e);n&&(Mt("message",n),this.emit("message",n))}};Oi.prototype._cleanup=function(){Mt("_cleanup"),this.removeAllListeners()};Oi.prototype.abort=function(){Mt("abort"),this.xo&&(this.xo.close(),Mt("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};Zo.exports=Oi});var zn=v((Gp,rs)=>{"use strict";var es=ee().EventEmitter,md=R(),ts=et(),ud=ue(),Pi=global.XMLHttpRequest,de=function(){};function ze(i,t,e,r){de(i,t);var n=this;es.call(this),setTimeout(function(){n._start(i,t,e,r)},0)}md(ze,es);ze.prototype._start=function(i,t,e,r){var n=this;try{this.xhr=new Pi}catch{}if(!this.xhr){de("no xhr"),this.emit("finish",0,"no xhr support"),this._cleanup();return}t=ud.addQuery(t,"t="+ +new Date),this.unloadRef=ts.unloadAdd(function(){de("unload cleanup"),n._cleanup(!0)});try{this.xhr.open(i,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){de("xhr timeout"),n.emit("finish",0,""),n._cleanup(!1)})}catch(l){de("exception",l),this.emit("finish",0,""),this._cleanup(!1);return}if((!r||!r.noCredentials)&&ze.supportsCORS&&(de("withCredentials"),this.xhr.withCredentials=!0),r&&r.headers)for(var a in r.headers)this.xhr.setRequestHeader(a,r.headers[a]);this.xhr.onreadystatechange=function(){if(n.xhr){var l=n.xhr,o,m;switch(de("readyState",l.readyState),l.readyState){case 3:try{m=l.status,o=l.responseText}catch{}de("status",m),m===1223&&(m=204),m===200&&o&&o.length>0&&(de("chunk"),n.emit("chunk",m,o));break;case 4:m=l.status,de("status",m),m===1223&&(m=204),(m===12005||m===12029)&&(m=0),de("finish",m,l.responseText),n.emit("finish",m,l.responseText),n._cleanup(!1);break}}};try{n.xhr.send(e)}catch{n.emit("finish",0,""),n._cleanup(!1)}};ze.prototype._cleanup=function(i){if(de("cleanup"),!!this.xhr){if(this.removeAllListeners(),ts.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),i)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};ze.prototype.close=function(){de("close"),this._cleanup(!0)};ze.enabled=!!Pi;var Ko=["Active"].concat("Object").join("X");!ze.enabled&&Ko in global&&(de("overriding xmlhttprequest"),Pi=function(){try{return new global[Ko]("Microsoft.XMLHTTP")}catch{return null}},ze.enabled=!!new Pi);var is=!1;try{is="withCredentials"in new Pi}catch{}ze.supportsCORS=is;rs.exports=ze});var Di=v((Np,ns)=>{"use strict";var hd=R(),qr=zn();function Hn(i,t,e,r){qr.call(this,i,t,e,r)}hd(Hn,qr);Hn.enabled=qr.enabled&&qr.supportsCORS;ns.exports=Hn});var hi=v((Fp,as)=>{"use strict";var pd=R(),$n=zn();function Wn(i,t,e){$n.call(this,i,t,e,{noCredentials:!0})}pd(Wn,$n);Wn.enabled=$n.enabled;as.exports=Wn});var pi=v((jp,os)=>{"use strict";os.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch{return!1}}}});var ls=v((Up,cs)=>{"use strict";var gd=R(),ss=qt(),fd=Ai(),Xn=Di(),_d=hi(),bd=pi();function gi(i){if(!_d.enabled&&!Xn.enabled)throw new Error("Transport created when disabled");ss.call(this,i,"/xhr_streaming",fd,Xn)}gd(gi,ss);gi.enabled=function(i){return i.nullOrigin||bd.isOpera()?!1:Xn.enabled};gi.transportName="xhr-streaming";gi.roundTrips=2;gi.needBody=!!global.document;cs.exports=gi});var zr=v((Lp,us)=>{"use strict";var ds=ee().EventEmitter,vd=R(),ms=et(),yd=pi(),xd=ue(),Rt=function(){};function zt(i,t,e){Rt(i,t);var r=this;ds.call(this),setTimeout(function(){r._start(i,t,e)},0)}vd(zt,ds);zt.prototype._start=function(i,t,e){Rt("_start");var r=this,n=new global.XDomainRequest;t=xd.addQuery(t,"t="+ +new Date),n.onerror=function(){Rt("onerror"),r._error()},n.ontimeout=function(){Rt("ontimeout"),r._error()},n.onprogress=function(){Rt("progress",n.responseText),r.emit("chunk",200,n.responseText)},n.onload=function(){Rt("load"),r.emit("finish",200,n.responseText),r._cleanup(!1)},this.xdr=n,this.unloadRef=ms.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(i,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(e)}catch{this._error()}};zt.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};zt.prototype._cleanup=function(i){if(Rt("cleanup",i),!!this.xdr){if(this.removeAllListeners(),ms.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,i)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};zt.prototype.close=function(){Rt("close"),this._cleanup(!0)};zt.enabled=!!(global.XDomainRequest&&yd.hasDomain());us.exports=zt});var Jn=v((Bp,ps)=>{"use strict";var kd=R(),hs=qt(),wd=Ai(),Qn=zr();function Gi(i){if(!Qn.enabled)throw new Error("Transport created when disabled");hs.call(this,i,"/xhr_streaming",wd,Qn)}kd(Gi,hs);Gi.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:Qn.enabled&&i.sameScheme};Gi.transportName="xdr-streaming";Gi.roundTrips=2;ps.exports=Gi});var Yn=v((Vp,gs)=>{gs.exports=global.EventSource});var bs=v((qp,_s)=>{"use strict";var Cd=R(),fs=ee().EventEmitter,Sd=Yn(),fi=function(){};function Ni(i){fi(i),fs.call(this);var t=this,e=this.es=new Sd(i);e.onmessage=function(r){fi("message",r.data),t.emit("message",decodeURI(r.data))},e.onerror=function(r){fi("error",e.readyState,r);var n=e.readyState!==2?"network":"permanent";t._cleanup(),t._close(n)}}Cd(Ni,fs);Ni.prototype.abort=function(){fi("abort"),this._cleanup(),this._close("user")};Ni.prototype._cleanup=function(){fi("cleanup");var i=this.es;i&&(i.onmessage=i.onerror=null,i.close(),this.es=null)};Ni.prototype._close=function(i){fi("close",i);var t=this;setTimeout(function(){t.emit("close",null,i),t.removeAllListeners()},200)};_s.exports=Ni});var Zn=v((zp,ys)=>{"use strict";var Ed=R(),vs=qt(),Id=bs(),Td=Di(),Md=Yn();function _i(i){if(!_i.enabled())throw new Error("Transport created when disabled");vs.call(this,i,"/eventsource",Id,Td)}Ed(_i,vs);_i.enabled=function(){return!!Md};_i.transportName="eventsource";_i.roundTrips=2;ys.exports=_i});var Kn=v((Hp,xs)=>{xs.exports="1.6.1"});var bi=v(($p,nt)=>{"use strict";var Hr=et(),Rd=pi(),Ht=function(){};nt.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){nt.exports.WPrefix in global||(global[nt.exports.WPrefix]={})},postMessage:function(i,t){global.parent!==global?global.parent.postMessage(JSON.stringify({windowId:nt.exports.currentWindowId,type:i,data:t||""}),"*"):Ht("Cannot postMessage, no parent window.",i,t)},createIframe:function(i,t){var e=global.document.createElement("iframe"),r,n,a=function(){Ht("unattach"),clearTimeout(r);try{e.onload=null}catch{}e.onerror=null},l=function(){Ht("cleanup"),e&&(a(),setTimeout(function(){e&&e.parentNode.removeChild(e),e=null},0),Hr.unloadDel(n))},o=function(f){Ht("onerror",f),e&&(l(),t(f))},m=function(f,p){Ht("post",f,p),setTimeout(function(){try{e&&e.contentWindow&&e.contentWindow.postMessage(f,p)}catch{}},0)};return e.src=i,e.style.display="none",e.style.position="absolute",e.onerror=function(){o("onerror")},e.onload=function(){Ht("onload"),clearTimeout(r),r=setTimeout(function(){o("onload timeout")},2e3)},global.document.body.appendChild(e),r=setTimeout(function(){o("timeout")},15e3),n=Hr.unloadAdd(l),{post:m,cleanup:l,loaded:a}},createHtmlfile:function(i,t){var e=["Active"].concat("Object").join("X"),r=new global[e]("htmlfile"),n,a,l,o=function(){clearTimeout(n),l.onerror=null},m=function(){r&&(o(),Hr.unloadDel(a),l.parentNode.removeChild(l),l=r=null,CollectGarbage())},f=function(b){Ht("onerror",b),r&&(m(),t(b))},p=function(b,k){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(b,k)},0)}catch{}};r.open(),r.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),r.close(),r.parentWindow[nt.exports.WPrefix]=global[nt.exports.WPrefix];var h=r.createElement("div");return r.body.appendChild(h),l=r.createElement("iframe"),h.appendChild(l),l.src=i,l.onerror=function(){f("onerror")},n=setTimeout(function(){f("timeout")},15e3),a=Hr.unloadAdd(m),{post:p,cleanup:m,loaded:o}}};nt.exports.iframeEnabled=!1;global.document&&(nt.exports.iframeEnabled=(typeof global.postMessage=="function"||typeof global.postMessage=="object")&&!Rd.isKonqueror())});var ta=v((Wp,Ss)=>{"use strict";var Od=R(),ks=ee().EventEmitter,Ad=Kn(),ea=ue(),ws=bi(),Cs=et(),Pd=Bt(),He=function(){};function $e(i,t,e){if(!$e.enabled())throw new Error("Transport created when disabled");ks.call(this);var r=this;this.origin=ea.getOrigin(e),this.baseUrl=e,this.transUrl=t,this.transport=i,this.windowId=Pd.string(8);var n=ea.addPath(e,"/iframe.html")+"#"+this.windowId;He(i,t,n),this.iframeObj=ws.createIframe(n,function(a){He("err callback"),r.emit("close",1006,"Unable to load an iframe ("+a+")"),r.close()}),this.onmessageCallback=this._message.bind(this),Cs.attachEvent("message",this.onmessageCallback)}Od($e,ks);$e.prototype.close=function(){if(He("close"),this.removeAllListeners(),this.iframeObj){Cs.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};$e.prototype._message=function(i){if(He("message",i.data),!ea.isOriginEqual(i.origin,this.origin)){He("not same origin",i.origin,this.origin);return}var t;try{t=JSON.parse(i.data)}catch{He("bad json",i.data);return}if(t.windowId!==this.windowId){He("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Ad,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var e;try{e=JSON.parse(t.data)}catch{He("bad json",t.data);return}this.emit("close",e[0],e[1]),this.close();break}};$e.prototype.postMessage=function(i,t){He("postMessage",i,t),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:i,data:t||""}),this.origin)};$e.prototype.send=function(i){He("send",i),this.postMessage("m",i)};$e.enabled=function(){return ws.iframeEnabled};$e.transportName="iframe";$e.roundTrips=2;Ss.exports=$e});var $r=v((Xp,Es)=>{"use strict";Es.exports={isObject:function(i){var t=typeof i;return t==="function"||t==="object"&&!!i},extend:function(i){if(!this.isObject(i))return i;for(var t,e,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}return i}}});var Xr=v((Qp,Is)=>{"use strict";var Dd=R(),Wr=ta(),Gd=$r();Is.exports=function(i){function t(e,r){Wr.call(this,i.transportName,e,r)}return Dd(t,Wr),t.enabled=function(e,r){if(!global.document)return!1;var n=Gd.extend({},r);return n.sameOrigin=!0,i.enabled(n)&&Wr.enabled()},t.transportName="iframe-"+i.transportName,t.needBody=!0,t.roundTrips=Wr.roundTrips+i.roundTrips-1,t.facadeTransport=i,t}});var Os=v((Jp,Rs)=>{"use strict";var Nd=R(),$t=bi(),Fd=ue(),Ms=ee().EventEmitter,jd=Bt(),at=function(){};function Ie(i){at(i),Ms.call(this);var t=this;$t.polluteGlobalNamespace(),this.id="a"+jd.string(6),i=Fd.addQuery(i,"c="+decodeURIComponent($t.WPrefix+"."+this.id)),at("using htmlfile",Ie.htmlfileEnabled);var e=Ie.htmlfileEnabled?$t.createHtmlfile:$t.createIframe;global[$t.WPrefix][this.id]={start:function(){at("start"),t.iframeObj.loaded()},message:function(r){at("message",r),t.emit("message",r)},stop:function(){at("stop"),t._cleanup(),t._close("network")}},this.iframeObj=e(i,function(){at("callback"),t._cleanup(),t._close("permanent")})}Nd(Ie,Ms);Ie.prototype.abort=function(){at("abort"),this._cleanup(),this._close("user")};Ie.prototype._cleanup=function(){at("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[$t.WPrefix][this.id]};Ie.prototype._close=function(i){at("_close",i),this.emit("close",null,i),this.removeAllListeners()};Ie.htmlfileEnabled=!1;var Ts=["Active"].concat("Object").join("X");if(Ts in global)try{Ie.htmlfileEnabled=!!new global[Ts]("htmlfile")}catch{}Ie.enabled=Ie.htmlfileEnabled||$t.iframeEnabled;Rs.exports=Ie});var ra=v((Yp,Ps)=>{"use strict";var Ud=R(),ia=Os(),Ld=hi(),As=qt();function Fi(i){if(!ia.enabled)throw new Error("Transport created when disabled");As.call(this,i,"/htmlfile",ia,Ld)}Ud(Fi,As);Fi.enabled=function(i){return ia.enabled&&i.sameOrigin};Fi.transportName="htmlfile";Fi.roundTrips=2;Ps.exports=Fi});var aa=v((Zp,Ns)=>{"use strict";var Bd=R(),Ds=qt(),Vd=Ai(),na=Di(),Gs=hi();function ji(i){if(!Gs.enabled&&!na.enabled)throw new Error("Transport created when disabled");Ds.call(this,i,"/xhr",Vd,na)}Bd(ji,Ds);ji.enabled=function(i){return i.nullOrigin?!1:Gs.enabled&&i.sameOrigin?!0:na.enabled};ji.transportName="xhr-polling";ji.roundTrips=2;Ns.exports=ji});var Ls=v((Kp,Us)=>{"use strict";var qd=R(),js=qt(),zd=Jn(),Hd=Ai(),Fs=zr();function Ui(i){if(!Fs.enabled)throw new Error("Transport created when disabled");js.call(this,i,"/xhr",Hd,Fs)}qd(Ui,js);Ui.enabled=zd.enabled;Ui.transportName="xdr-polling";Ui.roundTrips=2;Us.exports=Ui});var zs=v((eg,qs)=>{"use strict";var Li=bi(),Bs=Bt(),$d=pi(),Wd=ue(),Xd=R(),Vs=ee().EventEmitter,Te=function(){};function xe(i){Te(i);var t=this;Vs.call(this),Li.polluteGlobalNamespace(),this.id="a"+Bs.string(6);var e=Wd.addQuery(i,"c="+encodeURIComponent(Li.WPrefix+"."+this.id));global[Li.WPrefix][this.id]=this._callback.bind(this),this._createScript(e),this.timeoutId=setTimeout(function(){Te("timeout"),t._abort(new Error("JSONP script loaded abnormally (timeout)"))},xe.timeout)}Xd(xe,Vs);xe.prototype.abort=function(){if(Te("abort"),global[Li.WPrefix][this.id]){var i=new Error("JSONP user aborted read");i.code=1e3,this._abort(i)}};xe.timeout=35e3;xe.scriptErrorTimeout=1e3;xe.prototype._callback=function(i){Te("_callback",i),this._cleanup(),!this.aborting&&(i&&(Te("message",i),this.emit("message",i)),this.emit("close",null,"network"),this.removeAllListeners())};xe.prototype._abort=function(i){Te("_abort",i),this._cleanup(),this.aborting=!0,this.emit("close",i.code,i.message),this.removeAllListeners()};xe.prototype._cleanup=function(){if(Te("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var i=this.script;i.parentNode.removeChild(i),i.onreadystatechange=i.onerror=i.onload=i.onclick=null,this.script=null}delete global[Li.WPrefix][this.id]};xe.prototype._scriptError=function(){Te("_scriptError");var i=this;this.errorTimer||(this.errorTimer=setTimeout(function(){i.loadedOkay||i._abort(new Error("JSONP script loaded abnormally (onerror)"))},xe.scriptErrorTimeout))};xe.prototype._createScript=function(i){Te("_createScript",i);var t=this,e=this.script=global.document.createElement("script"),r;if(e.id="a"+Bs.string(8),e.src=i,e.type="text/javascript",e.charset="UTF-8",e.onerror=this._scriptError.bind(this),e.onload=function(){Te("onload"),t._abort(new Error("JSONP script loaded abnormally (onload)"))},e.onreadystatechange=function(){if(Te("onreadystatechange",e.readyState),/loaded|closed/.test(e.readyState)){if(e&&e.htmlFor&&e.onclick){t.loadedOkay=!0;try{e.onclick()}catch{}}e&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof e.async>"u"&&global.document.attachEvent)if($d.isOpera())r=this.script2=global.document.createElement("script"),r.text="try{var a = document.getElementById('"+e.id+"'); if(a)a.onerror();}catch(x){};",e.async=r.async=!1;else{try{e.htmlFor=e.id,e.event="onclick"}catch{}e.async=!0}typeof e.async<"u"&&(e.async=!0);var n=global.document.getElementsByTagName("head")[0];n.insertBefore(e,n.firstChild),r&&n.insertBefore(r,n.firstChild)};qs.exports=xe});var Ws=v((tg,$s)=>{"use strict";var Qd=Bt(),Hs=ue(),ot=function(){},he,Bi;function Jd(i){ot("createIframe",i);try{return global.document.createElement('<iframe name="'+i+'">')}catch{var t=global.document.createElement("iframe");return t.name=i,t}}function Yd(){ot("createForm"),he=global.document.createElement("form"),he.style.display="none",he.style.position="absolute",he.method="POST",he.enctype="application/x-www-form-urlencoded",he.acceptCharset="UTF-8",Bi=global.document.createElement("textarea"),Bi.name="d",he.appendChild(Bi),global.document.body.appendChild(he)}$s.exports=function(i,t,e){ot(i,t),he||Yd();var r="a"+Qd.string(8);he.target=r,he.action=Hs.addQuery(Hs.addPath(i,"/jsonp_send"),"i="+r);var n=Jd(r);n.id=r,n.style.display="none",he.appendChild(n);try{Bi.value=t}catch{}he.submit();var a=function(l){ot("completed",r,l),n.onerror&&(n.onreadystatechange=n.onerror=n.onload=null,setTimeout(function(){ot("cleaning up",r),n.parentNode.removeChild(n),n=null},500),Bi.value="",e(l))};return n.onerror=function(){ot("onerror",r),a()},n.onload=function(){ot("onload",r),a()},n.onreadystatechange=function(l){ot("onreadystatechange",r,n.readyState,l),n.readyState==="complete"&&a()},function(){ot("aborted",r),a(new Error("Aborted"))}}});var Js=v((ig,Qs)=>{"use strict";var Zd=R(),Xs=Vn(),Kd=zs(),em=Ws();function Wt(i){if(!Wt.enabled())throw new Error("Transport created when disabled");Xs.call(this,i,"/jsonp",em,Kd)}Zd(Wt,Xs);Wt.enabled=function(){return!!global.document};Wt.transportName="jsonp-polling";Wt.roundTrips=1;Wt.needBody=!0;Qs.exports=Wt});var Zs=v((rg,Ys)=>{"use strict";Ys.exports=[Lo(),ls(),Jn(),Zn(),Xr()(Zn()),ra(),Xr()(ra()),aa(),Ls(),Xr()(aa()),Js()]});var ac=v(()=>{"use strict";var Vi=Array.prototype,la=Object.prototype,tm=Function.prototype,qi=String.prototype,oa=Vi.slice,da=la.toString,tc=function(i){return la.toString.call(i)==="[object Function]"},im=function(t){return da.call(t)==="[object Array]"},ic=function(t){return da.call(t)==="[object String]"},rm=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),ca;rm?ca=function(i,t,e,r){!r&&t in i||Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:!0,value:e})}:ca=function(i,t,e,r){!r&&t in i||(i[t]=e)};var zi=function(i,t,e){for(var r in t)la.hasOwnProperty.call(t,r)&&ca(i,r,t[r],e)},rc=function(i){if(i==null)throw new TypeError("can't convert "+i+" to object");return Object(i)};function nm(i){var t=+i;return t!==t?t=0:t!==0&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function am(i){return i>>>0}function sa(){}zi(tm,{bind:function(t){var e=this;if(!tc(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var r=oa.call(arguments,1),n=function(){if(this instanceof m){var f=e.apply(this,r.concat(oa.call(arguments)));return Object(f)===f?f:this}else return e.apply(t,r.concat(oa.call(arguments)))},a=Math.max(0,e.length-r.length),l=[],o=0;o<a;o++)l.push("$"+o);var m=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this, arguments); }")(n);return e.prototype&&(sa.prototype=e.prototype,m.prototype=new sa,sa.prototype=null),m}});zi(Array,{isArray:im});var Ks=Object("a"),nc=Ks[0]!=="a"||!(0 in Ks),om=function(t){var e=!0,r=!0;return t&&(t.call("foo",function(n,a,l){typeof l!="object"&&(e=!1)}),t.call([1],function(){"use strict";r=typeof this=="string"},"x")),!!t&&e&&r};zi(Vi,{forEach:function(t){var e=rc(this),r=nc&&ic(this)?this.split(""):e,n=arguments[1],a=-1,l=r.length>>>0;if(!tc(t))throw new TypeError;for(;++a<l;)a in r&&t.call(n,r[a],a,e)}},!om(Vi.forEach));var sm=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;zi(Vi,{indexOf:function(t){var e=nc&&ic(this)?this.split(""):rc(this),r=e.length>>>0;if(!r)return-1;var n=0;for(arguments.length>1&&(n=nm(arguments[1])),n=n>=0?n:Math.max(0,r+n);n<r;n++)if(n in e&&e[n]===t)return n;return-1}},sm);var ec=qi.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var i=/()??/.exec("")[1]===void 0;qi.split=function(t,e){var r=this;if(t===void 0&&e===0)return[];if(da.call(t)!=="[object RegExp]")return ec.call(this,t,e);var n=[],a=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),l=0,o,m,f,p;for(t=new RegExp(t.source,a+"g"),r+="",i||(o=new RegExp("^"+t.source+"$(?!\\s)",a)),e=e===void 0?-1>>>0:am(e);(m=t.exec(r))&&(f=m.index+m[0].length,!(f>l&&(n.push(r.slice(l,m.index)),!i&&m.length>1&&m[0].replace(o,function(){for(var h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(m[h]=void 0)}),m.length>1&&m.index<r.length&&Vi.push.apply(n,m.slice(1)),p=m[0].length,l=f,n.length>=e)));)t.lastIndex===m.index&&t.lastIndex++;return l===r.length?(p||!t.test(""))&&n.push(""):n.push(r.slice(l)),n.length>e?n.slice(0,e):n}}():"0".split(void 0,0).length&&(qi.split=function(t,e){return t===void 0&&e===0?[]:ec.call(this,t,e)});var cm=qi.substr,lm="".substr&&"0b".substr(-1)!=="b";zi(qi,{substr:function(t,e){return cm.call(this,t<0&&(t=this.length+t)<0?0:t,e)}},lm)});var sc=v((og,oc)=>{"use strict";var Qr=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,ma,dm=function(i){var t,e={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return i.lastIndex=0,r.join("").replace(i,function(n){return e[n]="\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4),""}),i.lastIndex=0,e};oc.exports={quote:function(i){var t=JSON.stringify(i);return Qr.lastIndex=0,Qr.test(t)?(ma||(ma=dm(Qr)),t.replace(Qr,function(e){return ma[e]})):t}}});var lc=v((sg,cc)=>{"use strict";var Jr=function(){};cc.exports=function(i){return{filterToEnabled:function(t,e){var r={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],i.forEach(function(n){if(n){if(n.transportName==="websocket"&&e.websocket===!1){Jr("disabled from server","websocket");return}if(t.length&&t.indexOf(n.transportName)===-1){Jr("not in whitelist",n.transportName);return}n.enabled(e)?(Jr("enabled",n.transportName),r.main.push(n),n.facadeTransport&&r.facade.push(n.facadeTransport)):Jr("disabled",n.transportName)}}),r}}}});var mc=v((cg,dc)=>{"use strict";var ua={};["log","debug","warn"].forEach(function(i){var t;try{t=global.console&&global.console[i]&&global.console[i].apply}catch{}ua[i]=t?function(){return global.console[i].apply(global.console,arguments)}:i==="log"?function(){}:ua.log});dc.exports=ua});var Yr=v((lg,uc)=>{"use strict";function Xt(i){this.type=i}Xt.prototype.initEvent=function(i,t,e){return this.type=i,this.bubbles=t,this.cancelable=e,this.timeStamp=+new Date,this};Xt.prototype.stopPropagation=function(){};Xt.prototype.preventDefault=function(){};Xt.CAPTURING_PHASE=1;Xt.AT_TARGET=2;Xt.BUBBLING_PHASE=3;uc.exports=Xt});var ha=v((dg,hc)=>{"use strict";hc.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}});var _c=v((mg,fc)=>{"use strict";var mm=R(),pc=Yr();function gc(){pc.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}mm(gc,pc);fc.exports=gc});var xc=v((ug,yc)=>{"use strict";var um=R(),bc=Yr();function vc(i){bc.call(this),this.initEvent("message",!1,!1),this.data=i}um(vc,bc);yc.exports=vc});var Cc=v((hg,wc)=>{"use strict";var kc=ee().EventEmitter,hm=R();function Hi(){var i=this;kc.call(this),this.to=setTimeout(function(){i.emit("finish",200,"{}")},Hi.timeout)}hm(Hi,kc);Hi.prototype.close=function(){clearTimeout(this.to)};Hi.timeout=2e3;wc.exports=Hi});var ga=v((pg,Ec)=>{"use strict";var Sc=ee().EventEmitter,pm=R(),gm=$r(),fm=function(){};function pa(i,t){Sc.call(this);var e=this,r=+new Date;this.xo=new t("GET",i),this.xo.once("finish",function(n,a){var l,o;if(n===200){if(o=+new Date-r,a)try{l=JSON.parse(a)}catch{fm("bad json",a)}gm.isObject(l)||(l={})}e.emit("finish",l,o),e.removeAllListeners()})}pm(pa,Sc);pa.prototype.close=function(){this.removeAllListeners(),this.xo.close()};Ec.exports=pa});var fa=v((gg,Tc)=>{"use strict";var _m=R(),Ic=ee().EventEmitter,bm=hi(),vm=ga();function Zr(i){var t=this;Ic.call(this),this.ir=new vm(i,bm),this.ir.once("finish",function(e,r){t.ir=null,t.emit("message",JSON.stringify([e,r]))})}_m(Zr,Ic);Zr.transportName="iframe-info-receiver";Zr.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};Tc.exports=Zr});var Ac=v((fg,Oc)=>{"use strict";var Mc=ee().EventEmitter,ym=R(),xm=et(),Rc=ta(),km=fa(),wm=function(){};function Kr(i,t){var e=this;Mc.call(this);var r=function(){var n=e.ifr=new Rc(km.transportName,t,i);n.once("message",function(a){if(a){var l;try{l=JSON.parse(a)}catch{wm("bad json",a),e.emit("finish"),e.close();return}var o=l[0],m=l[1];e.emit("finish",o,m)}e.close()}),n.once("close",function(){e.emit("finish"),e.close()})};global.document.body?r():xm.attachEvent("load",r)}ym(Kr,Mc);Kr.enabled=function(){return Rc.enabled()};Kr.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};Oc.exports=Kr});var jc=v((_g,Fc)=>{"use strict";var Nc=ee().EventEmitter,Cm=R(),Sm=ue(),Pc=zr(),Dc=Di(),Em=hi(),Im=Cc(),Gc=Ac(),en=ga(),vi=function(){};function st(i,t){vi(i);var e=this;Nc.call(this),setTimeout(function(){e.doXhr(i,t)},0)}Cm(st,Nc);st._getReceiver=function(i,t,e){return e.sameOrigin?new en(t,Em):Dc.enabled?new en(t,Dc):Pc.enabled&&e.sameScheme?new en(t,Pc):Gc.enabled()?new Gc(i,t):new en(t,Im)};st.prototype.doXhr=function(i,t){var e=this,r=Sm.addPath(i,"/info");vi("doXhr",r),this.xo=st._getReceiver(i,r,t),this.timeoutRef=setTimeout(function(){vi("timeout"),e._cleanup(!1),e.emit("finish")},st.timeout),this.xo.once("finish",function(n,a){vi("finish",n,a),e._cleanup(!0),e.emit("finish",n,a)})};st.prototype._cleanup=function(i){vi("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!i&&this.xo&&this.xo.close(),this.xo=null};st.prototype.close=function(){vi("close"),this.removeAllListeners(),this._cleanup(!1)};st.timeout=8e3;Fc.exports=st});var Bc=v((bg,Lc)=>{"use strict";var Uc=bi();function $i(i){this._transport=i,i.on("message",this._transportMessage.bind(this)),i.on("close",this._transportClose.bind(this))}$i.prototype._transportClose=function(i,t){Uc.postMessage("c",JSON.stringify([i,t]))};$i.prototype._transportMessage=function(i){Uc.postMessage("t",i)};$i.prototype._send=function(i){this._transport.send(i)};$i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()};Lc.exports=$i});var Hc=v((vg,zc)=>{"use strict";var Vc=ue(),Tm=et(),Mm=Bc(),qc=fa(),_a=bi(),tn=ha(),ba=function(){};zc.exports=function(i,t){var e={};t.forEach(function(n){n.facadeTransport&&(e[n.facadeTransport.transportName]=n.facadeTransport)}),e[qc.transportName]=qc;var r;i.bootstrap_iframe=function(){var n;_a.currentWindowId=tn.hash.slice(1);var a=function(l){if(l.source===parent&&(typeof r>"u"&&(r=l.origin),l.origin===r)){var o;try{o=JSON.parse(l.data)}catch{ba("bad json",l.data);return}if(o.windowId===_a.currentWindowId)switch(o.type){case"s":var m;try{m=JSON.parse(o.data)}catch{ba("bad json",o.data);break}var f=m[0],p=m[1],h=m[2],b=m[3];if(ba(f,p,h,b),f!==i.version)throw new Error('Incompatible SockJS! Main site uses: "'+f+'", the iframe: "'+i.version+'".');if(!Vc.isOriginEqual(h,tn.href)||!Vc.isOriginEqual(b,tn.href))throw new Error("Can't connect to different domain from within an iframe. ("+tn.href+", "+h+", "+b+")");n=new Mm(new e[p](h,b));break;case"m":n._send(o.data);break;case"c":n&&n._close(),n=null;break}}};Tm.attachEvent("message",a),_a.postMessage("s")}}});var Zc=v((yg,Yc)=>{"use strict";ac();var Rm=Nn(),Om=R(),$c=Bt(),Am=sc(),Wi=ue(),Pm=et(),Dm=lc(),Gm=$r(),Nm=pi(),Fm=mc(),va=Yr(),Xc=jn(),rn=ha(),jm=_c(),Wc=xc(),Um=jc(),$=function(){},Qc;function O(i,t,e){if(!(this instanceof O))return new O(i,t,e);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");Xc.call(this),this.readyState=O.CONNECTING,this.extensions="",this.protocol="",e=e||{},e.protocols_whitelist&&Fm.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=e.transports,this._transportOptions=e.transportOptions||{},this._timeout=e.timeout||0;var r=e.sessionId||8;if(typeof r=="function")this._generateSessionId=r;else if(typeof r=="number")this._generateSessionId=function(){return $c.string(r)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=e.server||$c.numberString(1e3);var n=new Rm(i);if(!n.host||!n.protocol)throw new SyntaxError("The URL '"+i+"' is invalid");if(n.hash)throw new SyntaxError("The URL must not contain a fragment");if(n.protocol!=="http:"&&n.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+n.protocol+"' is not allowed.");var a=n.protocol==="https:";if(rn.protocol==="https:"&&!a&&!Wi.isLoopbackAddr(n.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var l=t.sort();l.forEach(function(m,f){if(!m)throw new SyntaxError("The protocols entry '"+m+"' is invalid.");if(f<l.length-1&&m===l[f+1])throw new SyntaxError("The protocols entry '"+m+"' is duplicated.")});var o=Wi.getOrigin(rn.href);this._origin=o?o.toLowerCase():null,n.set("pathname",n.pathname.replace(/\/+$/,"")),this.url=n.href,$("using url",this.url),this._urlInfo={nullOrigin:!Nm.hasDomain(),sameOrigin:Wi.isOriginEqual(this.url,rn.href),sameScheme:Wi.isSchemeEqual(this.url,rn.href)},this._ir=new Um(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}Om(O,Xc);function Jc(i){return i===1e3||i>=3e3&&i<=4999}O.prototype.close=function(i,t){if(i&&!Jc(i))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===O.CLOSING||this.readyState===O.CLOSED)){var e=!0;this._close(i||1e3,t||"Normal closure",e)}};O.prototype.send=function(i){if(typeof i!="string"&&(i=""+i),this.readyState===O.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===O.OPEN&&this._transport.send(Am.quote(i))};O.version=Kn();O.CONNECTING=0;O.OPEN=1;O.CLOSING=2;O.CLOSED=3;O.prototype._receiveInfo=function(i,t){if($("_receiveInfo",t),this._ir=null,!i){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=i.base_url?i.base_url:this.url,i=Gm.extend(i,this._urlInfo),$("info",i);var e=Qc.filterToEnabled(this._transportsWhitelist,i);this._transports=e.main,$(this._transports.length+" enabled transports"),this._connect()};O.prototype._connect=function(){for(var i=this._transports.shift();i;i=this._transports.shift()){if($("attempt",i.transportName),i.needBody&&(!global.document.body||typeof global.document.readyState<"u"&&global.document.readyState!=="complete"&&global.document.readyState!=="interactive")){$("waiting for body"),this._transports.unshift(i),Pm.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*i.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t),$("using timeout",t);var e=Wi.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[i.transportName];$("transport url",e);var n=new i(e,this._transUrl,r);n.on("message",this._transportMessage.bind(this)),n.once("close",this._transportClose.bind(this)),n.transportName=i.transportName,this._transport=n;return}this._close(2e3,"All transports failed",!1)};O.prototype._transportTimeout=function(){$("_transportTimeout"),this.readyState===O.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};O.prototype._transportMessage=function(i){$("_transportMessage",i);var t=this,e=i.slice(0,1),r=i.slice(1),n;switch(e){case"o":this._open();return;case"h":this.dispatchEvent(new va("heartbeat")),$("heartbeat",this.transport);return}if(r)try{n=JSON.parse(r)}catch{$("bad json",r)}if(typeof n>"u"){$("empty payload",r);return}switch(e){case"a":Array.isArray(n)&&n.forEach(function(a){$("message",t.transport,a),t.dispatchEvent(new Wc(a))});break;case"m":$("message",this.transport,n),this.dispatchEvent(new Wc(n));break;case"c":Array.isArray(n)&&n.length===2&&this._close(n[0],n[1],!0);break}};O.prototype._transportClose=function(i,t){if($("_transportClose",this.transport,i,t),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!Jc(i)&&i!==2e3&&this.readyState===O.CONNECTING){this._connect();return}this._close(i,t)};O.prototype._open=function(){$("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===O.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=O.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new va("open")),$("connected",this.transport)):this._close(1006,"Server lost session")};O.prototype._close=function(i,t,e){$("_close",this.transport,i,t,e,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===O.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=O.CLOSING,setTimeout(function(){this.readyState=O.CLOSED,r&&this.dispatchEvent(new va("error"));var n=new jm("close");n.wasClean=e||!1,n.code=i||1e3,n.reason=t,this.dispatchEvent(n),this.onmessage=this.onclose=this.onerror=null,$("disconnected")}.bind(this),0)};O.prototype.countRTO=function(i){return i>100?4*i:300+i};Yc.exports=function(i){return Qc=Dm(i),Hc()(O,i),O}});var el=v((xg,Kc)=>{"use strict";var Lm=Zs();Kc.exports=Zc()(Lm);"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)});var bl=v((_l,Ta)=>{(function(i,t,e){function r(o){var m=this,f=l();m.next=function(){var p=2091639*m.s0+m.c*23283064365386963e-26;return m.s0=m.s1,m.s1=m.s2,m.s2=p-(m.c=p|0)},m.c=1,m.s0=f(" "),m.s1=f(" "),m.s2=f(" "),m.s0-=f(o),m.s0<0&&(m.s0+=1),m.s1-=f(o),m.s1<0&&(m.s1+=1),m.s2-=f(o),m.s2<0&&(m.s2+=1),f=null}function n(o,m){return m.c=o.c,m.s0=o.s0,m.s1=o.s1,m.s2=o.s2,m}function a(o,m){var f=new r(o),p=m&&m.state,h=f.next;return h.int32=function(){return f.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,p&&(typeof p=="object"&&n(p,f),h.state=function(){return n(f,{})}),h}function l(){var o=4022871197,m=function(f){f=String(f);for(var p=0;p<f.length;p++){o+=f.charCodeAt(p);var h=.02519603282416938*o;o=h>>>0,h-=o,h*=o,o=h>>>0,h-=o,o+=h*4294967296}return(o>>>0)*23283064365386963e-26};return m}t&&t.exports?t.exports=a:e&&e.amd?e(function(){return a}):this.alea=a})(_l,typeof Ta=="object"&&Ta,typeof define=="function"&&define)});var yl=v((vl,Ma)=>{(function(i,t,e){function r(l){var o=this,m="";o.x=0,o.y=0,o.z=0,o.w=0,o.next=function(){var p=o.x^o.x<<11;return o.x=o.y,o.y=o.z,o.z=o.w,o.w^=o.w>>>19^p^p>>>8},l===(l|0)?o.x=l:m+=l;for(var f=0;f<m.length+64;f++)o.x^=m.charCodeAt(f)|0,o.next()}function n(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o}function a(l,o){var m=new r(l),f=o&&o.state,p=function(){return(m.next()>>>0)/4294967296};return p.double=function(){do var h=m.next()>>>11,b=(m.next()>>>0)/4294967296,k=(h+b)/(1<<21);while(k===0);return k},p.int32=m.next,p.quick=p,f&&(typeof f=="object"&&n(f,m),p.state=function(){return n(m,{})}),p}t&&t.exports?t.exports=a:e&&e.amd?e(function(){return a}):this.xor128=a})(vl,typeof Ma=="object"&&Ma,typeof define=="function"&&define)});var kl=v((xl,Ra)=>{(function(i,t,e){function r(l){var o=this,m="";o.next=function(){var p=o.x^o.x>>>2;return o.x=o.y,o.y=o.z,o.z=o.w,o.w=o.v,(o.d=o.d+362437|0)+(o.v=o.v^o.v<<4^(p^p<<1))|0},o.x=0,o.y=0,o.z=0,o.w=0,o.v=0,l===(l|0)?o.x=l:m+=l;for(var f=0;f<m.length+64;f++)o.x^=m.charCodeAt(f)|0,f==m.length&&(o.d=o.x<<10^o.x>>>4),o.next()}function n(l,o){return o.x=l.x,o.y=l.y,o.z=l.z,o.w=l.w,o.v=l.v,o.d=l.d,o}function a(l,o){var m=new r(l),f=o&&o.state,p=function(){return(m.next()>>>0)/4294967296};return p.double=function(){do var h=m.next()>>>11,b=(m.next()>>>0)/4294967296,k=(h+b)/(1<<21);while(k===0);return k},p.int32=m.next,p.quick=p,f&&(typeof f=="object"&&n(f,m),p.state=function(){return n(m,{})}),p}t&&t.exports?t.exports=a:e&&e.amd?e(function(){return a}):this.xorwow=a})(xl,typeof Ra=="object"&&Ra,typeof define=="function"&&define)});var Cl=v((wl,Oa)=>{(function(i,t,e){function r(l){var o=this;o.next=function(){var f=o.x,p=o.i,h,b,k;return h=f[p],h^=h>>>7,b=h^h<<24,h=f[p+1&7],b^=h^h>>>10,h=f[p+3&7],b^=h^h>>>3,h=f[p+4&7],b^=h^h<<7,h=f[p+7&7],h=h^h<<13,b^=h^h<<9,f[p]=b,o.i=p+1&7,b};function m(f,p){var h,b,k=[];if(p===(p|0))b=k[0]=p;else for(p=""+p,h=0;h<p.length;++h)k[h&7]=k[h&7]<<15^p.charCodeAt(h)+k[h+1&7]<<13;for(;k.length<8;)k.push(0);for(h=0;h<8&&k[h]===0;++h);for(h==8?b=k[7]=-1:b=k[h],f.x=k,f.i=0,h=256;h>0;--h)f.next()}m(o,l)}function n(l,o){return o.x=l.x.slice(),o.i=l.i,o}function a(l,o){l==null&&(l=+new Date);var m=new r(l),f=o&&o.state,p=function(){return(m.next()>>>0)/4294967296};return p.double=function(){do var h=m.next()>>>11,b=(m.next()>>>0)/4294967296,k=(h+b)/(1<<21);while(k===0);return k},p.int32=m.next,p.quick=p,f&&(f.x&&n(f,m),p.state=function(){return n(m,{})}),p}t&&t.exports?t.exports=a:e&&e.amd?e(function(){return a}):this.xorshift7=a})(wl,typeof Oa=="object"&&Oa,typeof define=="function"&&define)});var El=v((Sl,Aa)=>{(function(i,t,e){function r(l){var o=this;o.next=function(){var f=o.w,p=o.X,h=o.i,b,k;return o.w=f=f+1640531527|0,k=p[h+34&127],b=p[h=h+1&127],k^=k<<13,b^=b<<17,k^=k>>>15,b^=b>>>12,k=p[h]=k^b,o.i=h,k+(f^f>>>16)|0};function m(f,p){var h,b,k,re,lt,Re=[],wi=128;for(p===(p|0)?(b=p,p=null):(p=p+"\0",b=0,wi=Math.max(wi,p.length)),k=0,re=-32;re<wi;++re)p&&(b^=p.charCodeAt((re+32)%p.length)),re===0&&(lt=b),b^=b<<10,b^=b>>>15,b^=b<<4,b^=b>>>13,re>=0&&(lt=lt+1640531527|0,h=Re[re&127]^=b+lt,k=h==0?k+1:0);for(k>=128&&(Re[(p&&p.length||0)&127]=-1),k=127,re=4*128;re>0;--re)b=Re[k+34&127],h=Re[k=k+1&127],b^=b<<13,h^=h<<17,b^=b>>>15,h^=h>>>12,Re[k]=b^h;f.w=lt,f.X=Re,f.i=k}m(o,l)}function n(l,o){return o.i=l.i,o.w=l.w,o.X=l.X.slice(),o}function a(l,o){l==null&&(l=+new Date);var m=new r(l),f=o&&o.state,p=function(){return(m.next()>>>0)/4294967296};return p.double=function(){do var h=m.next()>>>11,b=(m.next()>>>0)/4294967296,k=(h+b)/(1<<21);while(k===0);return k},p.int32=m.next,p.quick=p,f&&(f.X&&n(f,m),p.state=function(){return n(m,{})}),p}t&&t.exports?t.exports=a:e&&e.amd?e(function(){return a}):this.xor4096=a})(Sl,typeof Aa=="object"&&Aa,typeof define=="function"&&define)});var Tl=v((Il,Pa)=>{(function(i,t,e){function r(l){var o=this,m="";o.next=function(){var p=o.b,h=o.c,b=o.d,k=o.a;return p=p<<25^p>>>7^h,h=h-b|0,b=b<<24^b>>>8^k,k=k-p|0,o.b=p=p<<20^p>>>12^h,o.c=h=h-b|0,o.d=b<<16^h>>>16^k,o.a=k-p|0},o.a=0,o.b=0,o.c=-1640531527,o.d=1367130551,l===Math.floor(l)?(o.a=l/4294967296|0,o.b=l|0):m+=l;for(var f=0;f<m.length+20;f++)o.b^=m.charCodeAt(f)|0,o.next()}function n(l,o){return o.a=l.a,o.b=l.b,o.c=l.c,o.d=l.d,o}function a(l,o){var m=new r(l),f=o&&o.state,p=function(){return(m.next()>>>0)/4294967296};return p.double=function(){do var h=m.next()>>>11,b=(m.next()>>>0)/4294967296,k=(h+b)/(1<<21);while(k===0);return k},p.int32=m.next,p.quick=p,f&&(typeof f=="object"&&n(f,m),p.state=function(){return n(m,{})}),p}t&&t.exports?t.exports=a:e&&e.amd?e(function(){return a}):this.tychei=a})(Il,typeof Pa=="object"&&Pa,typeof define=="function"&&define)});var Ml=v(()=>{});var Ol=v((Rl,fn)=>{(function(i,t,e){var r=256,n=6,a=52,l="random",o=e.pow(r,n),m=e.pow(2,a),f=m*2,p=r-1,h;function b(A,N,ne){var Q=[];N=N==!0?{entropy:!0}:N||{};var W=Re(lt(N.entropy?[A,Ci(t)]:A??wi(),3),Q),pe=new k(Q),ke=function(){for(var ge=pe.g(n),Je=o,Oe=0;ge<m;)ge=(ge+Oe)*r,Je*=r,Oe=pe.g(1);for(;ge>=f;)ge/=2,Je/=2,Oe>>>=1;return(ge+Oe)/Je};return ke.int32=function(){return pe.g(4)|0},ke.quick=function(){return pe.g(4)/4294967296},ke.double=ke,Re(Ci(pe.S),t),(N.pass||ne||function(ge,Je,Oe,dt){return dt&&(dt.S&&re(dt,pe),ge.state=function(){return re(pe,{})}),Oe?(e[l]=ge,Je):ge})(ke,W,"global"in N?N.global:this==e,N.state)}function k(A){var N,ne=A.length,Q=this,W=0,pe=Q.i=Q.j=0,ke=Q.S=[];for(ne||(A=[ne++]);W<r;)ke[W]=W++;for(W=0;W<r;W++)ke[W]=ke[pe=p&pe+A[W%ne]+(N=ke[W])],ke[pe]=N;(Q.g=function(ge){for(var Je,Oe=0,dt=Q.i,Ki=Q.j,Si=Q.S;ge--;)Je=Si[dt=p&dt+1],Oe=Oe*r+Si[p&(Si[dt]=Si[Ki=p&Ki+Je])+(Si[Ki]=Je)];return Q.i=dt,Q.j=Ki,Oe})(r)}function re(A,N){return N.i=A.i,N.j=A.j,N.S=A.S.slice(),N}function lt(A,N){var ne=[],Q=typeof A,W;if(N&&Q=="object")for(W in A)try{ne.push(lt(A[W],N-1))}catch{}return ne.length?ne:Q=="string"?A:A+"\0"}function Re(A,N){for(var ne=A+"",Q,W=0;W<ne.length;)N[p&W]=p&(Q^=N[p&W]*19)+ne.charCodeAt(W++);return Ci(N)}function wi(){try{var A;return h&&(A=h.randomBytes)?A=A(r):(A=new Uint8Array(r),(i.crypto||i.msCrypto).getRandomValues(A)),Ci(A)}catch{var N=i.navigator,ne=N&&N.plugins;return[+new Date,i,ne,i.screen,Ci(t)]}}function Ci(A){return String.fromCharCode.apply(0,A)}if(Re(e.random(),t),typeof fn=="object"&&fn.exports){fn.exports=b;try{h=Ml()}catch{}}else typeof define=="function"&&define.amd?define(function(){return b}):e["seed"+l]=b})(typeof self<"u"?self:Rl,[],Math)});var Pl=v((W0,Al)=>{var Qu=bl(),Ju=yl(),Yu=kl(),Zu=Cl(),Ku=El(),eh=Tl(),Kt=Ol();Kt.alea=Qu;Kt.xor128=Ju;Kt.xorwow=Yu;Kt.xorshift7=Zu;Kt.xor4096=Ku;Kt.tychei=eh;Al.exports=Kt});var me="http://localhost:8080/api/games",ye=class i{constructor(t){this.http=t}apiUrl="http://localhost:8080/api";getActiveGames(){let t=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${me}/active`,{headers:t})}joinGame(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${me}/${t}`,{headers:e}).pipe(Gt(r=>{let n=_.getUser().nickname;if(!r.player1)r.player1=n;else if(!r.player2)r.player2=n;else return Ga(()=>new Error("Cette partie est d\xE9j\xE0 pleine"));return this.http.put(`${me}/${t}`,r,{headers:e})}))}watchGame(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.post(`${me}/${t}/spectate`,{},{headers:e})}createGame(t){console.log("[GameService] Starting game creation with data:",t);let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.post(`${me}`,t,{headers:e}).pipe(Gt(r=>t.gameRules?this.updateGameRules(r.idG,t.gameRules).pipe(tr(n=>console.log("Game created with rules:",n))):En(r)))}setPlayerReadyStatus(t,e,r){let n=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.post(`${me}/games/${t}/ready-status`,{player:e,ready:r},{headers:n})}leaveGame(t){if(!t)return En(null);let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.post(`${me}/games/${t}/leave`,{player:_.getUser().nickname},{headers:e})}updateGame(t,e){let r=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.put(`${me}/${t}`,e,{headers:r})}deleteGame(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.delete(`${me}/${t}`,{headers:e})}getGame(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${me}/${t}`,{headers:e}).pipe(we(r=>((!r.gameRules||!r.gameRules.maxRounds)&&(console.warn("Incomplete game rules detected, fetching rules..."),this.http.get(`${me}/${t}/rules`,{headers:e}).subscribe(n=>{n.gameRules&&(r.gameRules=n.gameRules,console.log("Updated game rules:",r.gameRules))})),r)),tr(r=>{console.log("Complete game data:",{id:r.idG,rules:r.gameRules,players:{player1:r.player1,player2:r.player2}})}))}getGridById(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${this.apiUrl}/grids/${t}`,{headers:e})}updateGameRules(t,e){let r=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.put(`${me}/${t}/rules`,e,{headers:r})}updateScore(t,e){let r=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.put(`${this.apiUrl}/games/${t}/score`,{pointForPlayer1:e},{headers:r}).pipe(we(n=>({idG:n.idG,winner:null,player1:n.player1,player2:n.player2,score1:n.score1,score2:n.score2,grid:n.grid,gameRules:n.gameRules})),tr(n=>console.log("Processed game update:",n)))}endGame(t,e){let r=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.put(`${me}/${t}/end`,{winner:e},{headers:r})}static \u0275fac=function(e){return new(e||i)(Ce(De))};static \u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"})};function po(i,t){i.terminate=function(){let e=()=>{};this.onerror=e,this.onmessage=e,this.onopen=e;let r=new Date,n=Math.random().toString().substring(2,8),a=this.onclose;this.onclose=l=>{let o=new Date().getTime()-r.getTime();t(`Discarded socket (#${n})  closed after ${o}ms, with code/reason: ${l.code}/${l.reason}`)},this.close(),a?.call(i,{code:4001,reason:`Quick discarding socket (#${n}) without waiting for the shutdown sequence.`,wasClean:!1})}}var Lt={LF:`
`,NULL:"\0"};var Mi=class i{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(t){let{command:e,headers:r,body:n,binaryBody:a,escapeHeaderValues:l,skipContentLengthHeader:o}=t;this.command=e,this.headers=Object.assign({},r||{}),a?(this._binaryBody=a,this.isBinaryBody=!0):(this._body=n||"",this.isBinaryBody=!1),this.escapeHeaderValues=l||!1,this.skipContentLengthHeader=o||!1}static fromRawFrame(t,e){let r={},n=a=>a.replace(/^\s+|\s+$/g,"");for(let a of t.headers.reverse()){let l=a.indexOf(":"),o=n(a[0]),m=n(a[1]);e&&t.command!=="CONNECT"&&t.command!=="CONNECTED"&&(m=i.hdrValueUnEscape(m)),r[o]=m}return new i({command:t.command,headers:r,binaryBody:t.binaryBody,escapeHeaderValues:e})}toString(){return this.serializeCmdAndHeaders()}serialize(){let t=this.serializeCmdAndHeaders();return this.isBinaryBody?i.toUnit8Array(t,this._binaryBody).buffer:t+this._body+Lt.NULL}serializeCmdAndHeaders(){let t=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(let e of Object.keys(this.headers||{})){let r=this.headers[e];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?t.push(`${e}:${i.hdrValueEscape(`${r}`)}`):t.push(`${e}:${r}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&t.push(`content-length:${this.bodyLength()}`),t.join(Lt.LF)+Lt.LF+Lt.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){let t=this.binaryBody;return t?t.length:0}static sizeOfUTF8(t){return t?new TextEncoder().encode(t).length:0}static toUnit8Array(t,e){let r=new TextEncoder().encode(t),n=new Uint8Array([0]),a=new Uint8Array(r.length+e.length+n.length);return a.set(r),a.set(e,r.length),a.set(n,r.length+e.length),a}static marshall(t){return new i(t).serialize()}static hdrValueEscape(t){return t.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(t){return t.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}};var Ar=class{constructor(t,e){this.onFrame=t,this.onIncomingPing=e,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(t,e=!1){let r;if(typeof t=="string"?r=this._encoder.encode(t):r=new Uint8Array(t),e&&r[r.length-1]!==0){let n=new Uint8Array(r.length+1);n.set(r,0),n[r.length]=0,r=n}for(let n=0;n<r.length;n++){let a=r[n];this._onByte(a)}}_collectFrame(t){if(t!==0&&t!==13){if(t===10){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(t)}}_collectCommand(t){if(t!==13){if(t===10){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_collectHeaders(t){if(t!==13){if(t===10){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(t)}}_reinjectByte(t){this._onByte(t)}_collectHeaderKey(t){if(t===58){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(t)}_collectHeaderValue(t){if(t!==13){if(t===10){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(t)}}_setupCollectBody(){let t=this._results.headers.filter(e=>e[0]==="content-length")[0];t?(this._bodyBytesRemaining=parseInt(t[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(t){if(t===0){this._retrievedBody();return}this._consumeByte(t)}_collectBodyFixedSize(t){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(t)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(t){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",t)}this._initState()}_consumeByte(t){this._token.push(t)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){let t=new Uint8Array(this._token);return this._token=[],t}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}};var Ke=function(i){return i[i.CONNECTING=0]="CONNECTING",i[i.OPEN=1]="OPEN",i[i.CLOSING=2]="CLOSING",i[i.CLOSED=3]="CLOSED",i}(Ke||{}),Ee=function(i){return i[i.ACTIVE=0]="ACTIVE",i[i.DEACTIVATING=1]="DEACTIVATING",i[i.INACTIVE=2]="INACTIVE",i}(Ee||{}),Pr=function(i){return i[i.LINEAR=0]="LINEAR",i[i.EXPONENTIAL=1]="EXPONENTIAL",i}(Pr||{}),mi=function(i){return i.Interval="interval",i.Worker="worker",i}(mi||{});var Dr=class{constructor(t,e=mi.Interval,r){this._interval=t,this._strategy=e,this._debug=r,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(t){this.stop(),this.shouldUseWorker()?this.runWorker(t):this.runInterval(t)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===mi.Worker}runWorker(t){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=e=>t(e.data))}runInterval(t){if(this._debug("Using runInterval for outgoing pings"),!this._timer){let e=Date.now();this._timer=setInterval(()=>{t(Date.now()-e)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}};var X=class{constructor(t){this.versions=t}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(t=>`v${t.replace(".","")}.stomp`)}};X.V1_0="1.0";X.V1_1="1.1";X.V1_2="1.2";X.default=new X([X.V1_2,X.V1_1,X.V1_0]);var Gr=class{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(t,e,r){this._client=t,this._webSocket=e,this._connected=!1,this._serverFrameHandlers={CONNECTED:n=>{this.debug(`connected to server ${n.headers.server}`),this._connected=!0,this._connectedVersion=n.headers.version,this._connectedVersion===X.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(n.headers),this.onConnect(n)},MESSAGE:n=>{let a=n.headers.subscription,l=this._subscriptions[a]||this.onUnhandledMessage,o=n,m=this,f=this._connectedVersion===X.V1_2?o.headers.ack:o.headers["message-id"];o.ack=(p={})=>m.ack(f,a,p),o.nack=(p={})=>m.nack(f,a,p),l(o)},RECEIPT:n=>{let a=this._receiptWatchers[n.headers["receipt-id"]];a?(a(n),delete this._receiptWatchers[n.headers["receipt-id"]]):this.onUnhandledReceipt(n)},ERROR:n=>{this.onStompError(n)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=r.debug,this.stompVersions=r.stompVersions,this.connectHeaders=r.connectHeaders,this.disconnectHeaders=r.disconnectHeaders,this.heartbeatIncoming=r.heartbeatIncoming,this.heartbeatOutgoing=r.heartbeatOutgoing,this.splitLargeFrames=r.splitLargeFrames,this.maxWebSocketChunkSize=r.maxWebSocketChunkSize,this.forceBinaryWSFrames=r.forceBinaryWSFrames,this.logRawCommunication=r.logRawCommunication,this.appendMissingNULLonIncoming=r.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=r.discardWebsocketOnCommFailure,this.onConnect=r.onConnect,this.onDisconnect=r.onDisconnect,this.onStompError=r.onStompError,this.onWebSocketClose=r.onWebSocketClose,this.onWebSocketError=r.onWebSocketError,this.onUnhandledMessage=r.onUnhandledMessage,this.onUnhandledReceipt=r.onUnhandledReceipt,this.onUnhandledFrame=r.onUnhandledFrame}start(){let t=new Ar(e=>{let r=Mi.fromRawFrame(e,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${r}`),(this._serverFrameHandlers[r.command]||this.onUnhandledFrame)(r)},()=>{this.debug("<<< PONG")});this._webSocket.onmessage=e=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){let r=e.data instanceof ArrayBuffer?new TextDecoder().decode(e.data):e.data;this.debug(`<<< ${r}`)}t.parseChunk(e.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=e=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(e)},this._webSocket.onerror=e=>{this.onWebSocketError(e)},this._webSocket.onopen=()=>{let e=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),e["accept-version"]=this.stompVersions.supportedVersions(),e["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:e})}}_setupHeartbeat(t){if(t.version!==X.V1_1&&t.version!==X.V1_2||!t["heart-beat"])return;let[e,r]=t["heart-beat"].split(",").map(n=>parseInt(n,10));if(this.heartbeatOutgoing!==0&&r!==0){let n=Math.max(this.heartbeatOutgoing,r);this.debug(`send PING every ${n}ms`),this._pinger=new Dr(n,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===Ke.OPEN&&(this._webSocket.send(Lt.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&e!==0){let n=Math.max(this.heartbeatIncoming,e);this.debug(`check PONG every ${n}ms`),this._ponger=setInterval(()=>{let a=Date.now()-this._lastServerActivityTS;a>n*2&&(this.debug(`did not receive server activity for the last ${a}ms`),this._closeOrDiscardWebsocket())},n)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===Ke.CONNECTING||this._webSocket.readyState===Ke.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&po(this._webSocket,t=>this.debug(t)),this._webSocket.terminate()}_transmit(t){let{command:e,headers:r,body:n,binaryBody:a,skipContentLengthHeader:l}=t,o=new Mi({command:e,headers:r,body:n,binaryBody:a,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:l}),m=o.serialize();if(this.logRawCommunication?this.debug(`>>> ${m}`):this.debug(`>>> ${o}`),this.forceBinaryWSFrames&&typeof m=="string"&&(m=new TextEncoder().encode(m)),typeof m!="string"||!this.splitLargeFrames)this._webSocket.send(m);else{let f=m;for(;f.length>0;){let p=f.substring(0,this.maxWebSocketChunkSize);f=f.substring(this.maxWebSocketChunkSize),this._webSocket.send(p),this.debug(`chunk sent = ${p.length}, remaining = ${f.length}`)}}}dispose(){if(this.connected)try{let t=Object.assign({},this.disconnectHeaders);t.receipt||(t.receipt=`close-${this._counter++}`),this.watchForReceipt(t.receipt,e=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(e)}),this._transmit({command:"DISCONNECT",headers:t})}catch(t){this.debug(`Ignoring error during disconnect ${t}`)}else(this._webSocket.readyState===Ke.CONNECTING||this._webSocket.readyState===Ke.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(t){let{destination:e,headers:r,body:n,binaryBody:a,skipContentLengthHeader:l}=t,o=Object.assign({destination:e},r);this._transmit({command:"SEND",headers:o,body:n,binaryBody:a,skipContentLengthHeader:l})}watchForReceipt(t,e){this._receiptWatchers[t]=e}subscribe(t,e,r={}){r=Object.assign({},r),r.id||(r.id=`sub-${this._counter++}`),r.destination=t,this._subscriptions[r.id]=e,this._transmit({command:"SUBSCRIBE",headers:r});let n=this;return{id:r.id,unsubscribe(a){return n.unsubscribe(r.id,a)}}}unsubscribe(t,e={}){e=Object.assign({},e),delete this._subscriptions[t],e.id=t,this._transmit({command:"UNSUBSCRIBE",headers:e})}begin(t){let e=t||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:e}});let r=this;return{id:e,commit(){r.commit(e)},abort(){r.abort(e)}}}commit(t){this._transmit({command:"COMMIT",headers:{transaction:t}})}abort(t){this._transmit({command:"ABORT",headers:{transaction:t}})}ack(t,e,r={}){r=Object.assign({},r),this._connectedVersion===X.V1_2?r.id=t:r["message-id"]=t,r.subscription=e,this._transmit({command:"ACK",headers:r})}nack(t,e,r={}){return r=Object.assign({},r),this._connectedVersion===X.V1_2?r.id=t:r["message-id"]=t,r.subscription=e,this._transmit({command:"NACK",headers:r})}};var Nr=class{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(t){this._disconnectHeaders=t,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Ee.ACTIVE}_changeState(t){this.state=t,this.onChangeState(t)}constructor(t={}){this.stompVersions=X.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=15*60*1e3,this.reconnectTimeMode=Pr.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=mi.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Ee.INACTIVE;let e=()=>{};this.debug=e,this.beforeConnect=e,this.onConnect=e,this.onDisconnect=e,this.onUnhandledMessage=e,this.onUnhandledReceipt=e,this.onUnhandledFrame=e,this.onStompError=e,this.onWebSocketClose=e,this.onWebSocketError=e,this.logRawCommunication=!1,this.onChangeState=e,this.connectHeaders={},this._disconnectHeaders={},this.configure(t)}configure(t){Object.assign(this,t),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){let t=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Ee.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Ee.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{t()})):t()}_connect(){return Sn(this,null,function*(){if(yield this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");let t=this._createWebSocket();this._stompHandler=new Gr(this,t,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:e=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(e)},onDisconnect:e=>{this.onDisconnect(e)},onStompError:e=>{this.onStompError(e)},onWebSocketClose:e=>{this._stompHandler=void 0,this.state===Ee.DEACTIVATING&&this._changeState(Ee.INACTIVE),this.onWebSocketClose(e),this.active&&this._schedule_reconnect()},onWebSocketError:e=>{this.onWebSocketError(e)},onUnhandledMessage:e=>{this.onUnhandledMessage(e)},onUnhandledReceipt:e=>{this.onUnhandledReceipt(e)},onUnhandledFrame:e=>{this.onUnhandledFrame(e)}}),this._stompHandler.start()})}_createWebSocket(){let t;if(this.webSocketFactory)t=this.webSocketFactory();else if(this.brokerURL)t=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return t.binaryType="arraybuffer",t}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===Pr.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}deactivate(){return Sn(this,arguments,function*(t={}){let e=t.force||!1,r=this.active,n;if(this.state===Ee.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Ee.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==Ke.CLOSED){let a=this._stompHandler.onWebSocketClose;n=new Promise((l,o)=>{this._stompHandler.onWebSocketClose=m=>{a(m),l()}})}else return this._changeState(Ee.INACTIVE),Promise.resolve();return e?this._stompHandler?.discardWebsocket():r&&this._disposeStompHandler(),n})}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(t){this._checkConnection(),this._stompHandler.publish(t)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(t,e){this._checkConnection(),this._stompHandler.watchForReceipt(t,e)}subscribe(t,e,r={}){return this._checkConnection(),this._stompHandler.subscribe(t,e,r)}unsubscribe(t,e={}){this._checkConnection(),this._stompHandler.unsubscribe(t,e)}begin(t){return this._checkConnection(),this._stompHandler.begin(t)}commit(t){this._checkConnection(),this._stompHandler.commit(t)}abort(t){this._checkConnection(),this._stompHandler.abort(t)}ack(t,e,r={}){this._checkConnection(),this._stompHandler.ack(t,e,r)}nack(t,e,r={}){this._checkConnection(),this._stompHandler.nack(t,e,r)}};var tl=Da(el());var Bm="http://localhost:8080/ws",We=class i{constructor(t){this.gameService=t;this.initializeWebSocketConnection()}client;gamesList=new er([]);connected=!1;messageSubjects=new Map;subscriptions=[];onlinePlayersSubject=new er([]);token;initializeWebSocketConnection(){this.token=_.getToken(),this.client=new Nr({webSocketFactory:()=>new tl.default(Bm),connectHeaders:{Authorization:"Bearer "+this.token},debug:t=>console.log(t)}),this.client.onConnect=()=>{console.log("Connected to WebSocket"),this.connected=!0,this.fetchGames(),this.client.subscribe("/topic/games",t=>{let e=JSON.parse(t.body);this.updateGamesList(e)})},this.subscribeToOnlineStatus(),this.notifyOnlineStatus(!0),this.client.onStompError=t=>{console.error("Erreur STOMP:",t)},this.client.activate()}fetchGames(){fetch("http://localhost:8080/api/games/active",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+_.getToken()}}).then(t=>t.json()).then(t=>{this.gamesList.next(t)}).catch(t=>console.error("Erreur lors de la r\xE9cup\xE9ration des parties:",t))}connect(){return new ei(t=>{if(this.connected&&this.client.connected){t.next(!0),t.complete();return}this.client.active||this.client.activate();let e=setTimeout(()=>{t.error(new Error("Connection timeout"))},5e3),r=()=>{clearTimeout(e),this.connected=!0,t.next(!0),t.complete()};this.client.onConnect=r})}getOnlinePlayers(){return this.onlinePlayersSubject.asObservable()}disconnect(){this.connected&&(this.subscriptions.forEach(t=>{t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}),this.subscriptions=[],this.messageSubjects.clear(),this.client.deactivate(),this.connected=!1)}updateGamesList(t){let e=this.gamesList.value;if(t.status==="JOINED"){let r=e.map(n=>n.idG===t.gameId?Pt(At({},n),{player2:t.player2Nickname}):n);this.gamesList.next(r)}else if(t.status==="CREATED"){let r={idG:t.gameId,player1:t.player1Nickname,player2:null,grid:t.gridId,score1:0,score2:0,winner:null,status:"CREATED"};this.gamesList.next([...e,r])}}getGamesList(){return this.gamesList.asObservable()}getMessageSubject(t){return this.messageSubjects.has(t)||this.messageSubjects.set(t,new er(null)),this.messageSubjects.get(t)}subscribeToTopic(t,e){return this.connect().pipe(mt(1),Dt(r=>r===!0),Dt(()=>{if(!this.subscriptions.some(n=>n.id&&n.id.includes(t))){let n=this.getMessageSubject(t),a=this.client.subscribe(t,l=>{try{let o=JSON.parse(l.body);console.log(`Message parsed on ${t}:`,o),e==="PLAYER_READY"&&console.log("Ready status message received:",o),n.next(o)}catch(o){console.error(`Erreur lors du parsing du message sur ${t}:`,o)}});this.subscriptions.push(a)}return!0}))}getGameStartNotification(t){let e=`/topic/games/${t}/start`;return this.subscribeToTopic(e,"GAME_STARTED"),this.getMessageSubject(e).asObservable().pipe(Dt(r=>r&&r.status==="GAME_STARTED"))}setPlayerReady(t,e,r){console.log("Setting player ready:",{gameId:t,playerNickname:e,isReady:r}),this.connect().pipe(mt(1)).subscribe(()=>{let n={gameId:t,playerNickname:e,ready:r,event:"PLAYER_READY",type:"PLAYER_READY",status:"PLAYER_READY"};try{this.client.publish({destination:"/app/games/ready",headers:{"content-type":"application/json"},body:JSON.stringify(n)}),setTimeout(()=>{this.requestReadyStatus(t)},100)}catch(a){console.error("Error sending ready message:",a)}})}getPlayerReadyUpdates(t){let e=`/topic/games/${t}/ready`,r=`/topic/games/${t}/readystatus`;return new ei(n=>{let a=this.subscribeToTopic(e,"PLAYER_READY").subscribe(),l=this.subscribeToTopic(r,"READY_STATUS").subscribe(),o=this.getMessageSubject(e).asObservable(),m=this.getMessageSubject(r).asObservable(),f=Na(o.pipe(Dt(p=>p&&(p.event==="PLAYER_READY"||p.type==="PLAYER_READY"))),m.pipe(Dt(p=>p&&typeof p=="object"))).subscribe(p=>{console.log("Ready update received:",p),n.next(p)});return this.requestReadyStatus(t),()=>{a.unsubscribe(),l.unsubscribe(),f.unsubscribe()}})}requestReadyStatus(t){this.connect().pipe(mt(1)).subscribe(()=>{console.log("Requesting ready status for game:",t);let e={idG:t};try{this.client.publish({destination:"/app/games/readystatus",headers:{"content-type":"application/json"},body:JSON.stringify(e)})}catch(r){console.error("Error requesting ready status:",r)}})}setGameStarted(t){console.log("Setting game as started:",t),this.connect().pipe(mt(1)).subscribe(()=>{let e={gameId:t,status:"GAME_STARTED",event:"GAME_START"};console.log("Sending game start message:",e),this.client.publish({destination:"/app/games/start",headers:{"content-type":"application/json"},body:JSON.stringify(e)})})}leaveLobby(t,e,r){this.connect().pipe(mt(1)).subscribe(()=>{this.client.publish({destination:"/app/games/leave",headers:{},body:JSON.stringify({gameId:t,playerNickname:e,isCreator:r,event:"PLAYER_LEAVE"})})})}getPlayerLeaveUpdates(t){let e=`/topic/games/${t}/leave`;return this.subscribeToTopic(e,"PLAYER_LEAVE"),this.getMessageSubject(e).asObservable().pipe(Dt(r=>r&&r.event==="PLAYER_LEAVE"))}getPlayerJoinUpdates(t){let e=[`/topic/games/${t}/join`,`/topic/games/${t}`,"/topic/games"];return new ei(r=>{let n=e.map(l=>this.subscribeToTopic(l,"JOINED").subscribe(o=>{console.log(`Message re\xE7u sur ${l}:`,o),o&&(o.status==="JOINED"||o.event==="JOINED")&&o.gameId===t&&r.next(o)})),a=setInterval(()=>{this.gameService.getGame(t).subscribe({next:l=>{l.player2&&r.next({status:"JOINED",gameId:t,player2:l.player2})},error:l=>console.error("Polling error:",l)})},2e3);return()=>{n.forEach(l=>l.unsubscribe()),clearInterval(a)}})}joinGame(t,e){return e||(e=_.getUser().nickname),new ei(r=>{this.connect().subscribe({next:()=>{try{if(console.log(`WebSocket connect\xE9, tentative d'abonnement \xE0 /topic/games/${t}`),this.connected&&this.client){let n=this.client.subscribe(`/topic/games/${t}`,a=>{try{console.log(`Message re\xE7u sur /topic/games/${t}:`,a.body);let l=JSON.parse(a.body);l.status==="JOINED"&&(console.log("Statut JOINED re\xE7u, confirmation de jointure"),n.unsubscribe(),r.next(l),r.complete())}catch(l){console.error("Erreur lors du parsing du message:",l)}});setTimeout(()=>{console.log(`Envoi de la demande de jointure \xE0 /app/games/${t}/join`),this.client.publish({destination:`/app/games/${t}/join`,body:JSON.stringify({player2:e}),headers:{"Content-Type":"application/json"}}),console.log("Demande envoy\xE9e, en attente de r\xE9ponse...")},500),setTimeout(()=>{r.closed||(console.error("D\xE9lai d'attente d\xE9pass\xE9 pour rejoindre la partie"),n.unsubscribe(),r.error(new Error("D\xE9lai d'attente d\xE9pass\xE9 pour rejoindre la partie")))},1e4)}else console.error("WebSocket non connect\xE9"),r.error(new Error("Non connect\xE9 aux WebSockets"))}catch(n){console.error("Erreur dans joinGame:",n),r.error(n)}},error:n=>{console.error("Erreur de connexion WebSocket:",n),r.error(n)}})})}getClient(){return this.client}getGameMessages(t){return this.connect().pipe(mt(1),Gt(()=>new ei(e=>{console.log("Subscribing to chat topic:",`/topic/games/${t}/chat`);let r=this.client.subscribe(`/topic/games/${t}/chat`,n=>{try{let a=JSON.parse(n.body);e.next(a)}catch(a){console.error("Error parsing message:",a)}});return this.subscriptions.push(r),()=>{r&&r.unsubscribe()}})))}sendGameMessage(t){this.connect().pipe(mt(1)).subscribe({next:()=>{console.log("Sending game message:",t),this.client.publish({destination:`/app/games/${t.gameId}/chat`,body:JSON.stringify(t)})},error:e=>console.error("Error sending message:",e)})}notifyOnlineStatus(t){if(!this.connected||!this.client||!this.client.connected){console.log("WebSocket non connect\xE9, impossible de notifier le statut en ligne");return}let e=_.getUser();if(!e||!e.nickname){console.log("Aucun utilisateur connect\xE9, impossible de notifier le statut en ligne");return}let r={playerNickname:e.nickname,online:t,type:"PLAYER_STATUS"};console.log(`Notification de statut en ligne: ${e.nickname} est ${t?"en ligne":"hors ligne"}`),this.client.publish({destination:"/app/players/status",headers:{"content-type":"application/json"},body:JSON.stringify(r)})}subscribeToOnlineStatus(){if(!this.connected||!this.client){console.log("WebSocket non connect\xE9, impossible de s'abonner aux statuts en ligne");return}let t=this.client.subscribe("/topic/players/online",e=>{try{let r=JSON.parse(e.body);r.type==="ONLINE_PLAYERS"&&Array.isArray(r.players)&&(console.log("Liste des joueurs en ligne re\xE7ue:",r.players),this.onlinePlayersSubject.next(r.players))}catch(r){console.error("Erreur lors du parsing du message de statut en ligne:",r)}});this.subscriptions.push(t)}static \u0275fac=function(e){return new(e||i)(Ce(ye))};static \u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"})};function Vm(i,t){i&1&&(c(0,"div",6),d(1," Chargement des parties en cours... "),s())}function qm(i,t){if(i&1){let e=j();c(0,"div",7)(1,"p"),d(2,"Aucune partie en cours pour le moment."),s(),c(3,"button",2),S("click",function(){I(e);let n=C();return T(n.createNewGame())}),d(4," Cr\xE9er la premi\xE8re partie "),s()()}}function zm(i,t){if(i&1){let e=j();c(0,"mat-card",10)(1,"mat-card-header")(2,"mat-card-title"),d(3),s(),c(4,"mat-card-subtitle"),d(5),s()(),c(6,"mat-card-content")(7,"p")(8,"strong"),d(9,"Statut:"),s(),d(10),s(),c(11,"p")(12,"strong"),d(13,"Joueurs:"),s(),d(14),s(),c(15,"p")(16,"strong"),d(17,"Grille:"),s(),d(18),s()(),w(19,"mat-divider"),c(20,"mat-card-actions")(21,"button",11),S("click",function(){let n=I(e).$implicit,a=C(2);return T(a.joinGame(n.idG))}),c(22,"mat-icon"),d(23,"person_add"),s(),d(24," REJOINDRE "),s(),c(25,"button",12),S("click",function(){let n=I(e).$implicit,a=C(2);return T(a.watchGame(n.idG))}),c(26,"mat-icon"),d(27,"visibility"),s(),d(28," OBSERVER "),s()()()}if(i&2){let e=t.$implicit,r=C(2);u(3),E("Partie #",e.idG,""),u(2),E("Cr\xE9\xE9e par: ",e.player1,""),u(5),E(" ",e.status||"En attente",""),u(4),ai(" ",r.getCurrentPlayerCount(e),"/",r.getGameMaxPlayers(),""),u(4),E(" ",e.grid," "),u(3),g("disabled",r.getCurrentPlayerCount(e)>=r.getGameMaxPlayers())}}function Hm(i,t){if(i&1&&(c(0,"div",8),y(1,zm,29,7,"mat-card",9),s()),i&2){let e=C();u(),g("ngForOf",e.activeGames)}}var $m=2,Xi=class i{constructor(t,e,r,n){this.gameService=t;this.router=e;this.snackBar=r;this.webSocketService=n}activeGames=[];loading=!0;currentUser;subscription;ngOnInit(){this.currentUser=_.getUser(),this.subscription=this.webSocketService.getGamesList().subscribe(t=>{this.activeGames=t}),this.loadActiveGames()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadActiveGames(){this.loading=!0,this.gameService.getActiveGames().subscribe({next:t=>{this.activeGames=t,this.loading=!1},error:t=>{console.error("Erreur lors du chargement des parties",t),this.snackBar.open("Erreur lors du chargement des parties en cours","Fermer",{duration:3e3}),this.loading=!1}})}joinGame(t){if(!t)return;let e=this.activeGames.find(r=>r.idG===t);if(e&&e.player1===this.currentUser.nickname){this.router.navigate(["/player/lobby",t]);return}this.webSocketService.joinGame(t,this.currentUser.nickname).subscribe({next:r=>{console.log("Partie rejointe avec succ\xE8s:",r),this.router.navigate(["/player/lobby",t])},error:r=>{console.error("Erreur lors de la tentative de rejoindre la partie:",r),this.snackBar.open("Impossible de rejoindre cette partie","Fermer",{duration:3e3})}})}watchGame(t){this.gameService.watchGame(t).subscribe({next:e=>{this.router.navigate(["/player/game",t,"spectate"])},error:e=>{console.error("Erreur lors de la tentative de regarder la partie",e),this.snackBar.open("Impossible de regarder cette partie","Fermer",{duration:3e3})}})}createNewGame(){this.router.navigate(["/player/create-game"])}getCurrentPlayerCount(t){let e=0;return t.player1&&t.player1.trim()!==""&&e++,t.player2&&t.player2.trim()!==""&&e++,e}getGameMaxPlayers(){return $m}static \u0275fac=function(e){return new(e||i)(x(ye),x(oe),x(K),x(We))};static \u0275cmp=M({type:i,selectors:[["app-home"]],decls:11,vars:3,consts:[[1,"home-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],["class","loading",4,"ngIf"],["class","no-games",4,"ngIf"],["class","games-grid",4,"ngIf"],[1,"loading"],[1,"no-games"],[1,"games-grid"],["class","game-card",4,"ngFor","ngForOf"],[1,"game-card"],["mat-button","","color","primary",3,"click","disabled"],["mat-button","","color","accent",3,"click"]],template:function(e,r){e&1&&(c(0,"div",0)(1,"div",1)(2,"h1"),d(3,"Parties en cours"),s(),c(4,"button",2),S("click",function(){return r.createNewGame()}),c(5,"mat-icon"),d(6,"add"),s(),d(7," Cr\xE9er une nouvelle partie "),s()(),y(8,Vm,2,0,"div",3)(9,qm,5,0,"div",4)(10,Hm,2,1,"div",5),s()),e&2&&(u(8),g("ngIf",r.loading),u(),g("ngIf",!r.loading&&r.activeGames.length===0),u(),g("ngIf",!r.loading&&r.activeGames.length>0))},dependencies:[B,ae,L,z,V,wt,q,Z,Ne,Y,J,H,le,ce,Be,li],styles:[".home-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.loading[_ngcontent-%COMP%], .no-games[_ngcontent-%COMP%]{text-align:center;padding:50px;background-color:#f5f5f5;border-radius:8px;margin:20px 0}.games-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.game-card[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.game-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-grow:1}.game-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 16px}"]})};var xi="http://localhost:8080/api/players/",ki=class i{constructor(t,e){this.http=t;this.storageService=e}getHeaders(){return new P({"Content-Type":"application/json",Authorization:`Bearer ${_.getToken()}`})}getGridsByPlayerNickname(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${xi}grids/${t}`,{headers:e})}getUserStats(t){return this.http.get(`${xi}${t}/stats`,{headers:this.getHeaders()})}updateUser(t){return this.http.put(`${xi}${t.nickname}`,t,{headers:this.getHeaders()})}changePassword(t,e,r){return this.http.post(`${xi}${t}/change-password`,{currentPassword:e,newPassword:r},{headers:this.getHeaders()})}getPlayerByNickname(t){return this.http.get(`${xi}${t}`,{headers:this.getHeaders()})}getPlayerRankings(){return this.http.get(`${xi}rankings`,{headers:this.getHeaders()})}static \u0275fac=function(e){return new(e||i)(Ce(De),Ce(_))};static \u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"})};function Xm(i,t){i&1&&(c(0,"div",3),w(1,"mat-spinner"),c(2,"p"),d(3,"Chargement de vos informations..."),s()())}function Qm(i,t){i&1&&(c(0,"mat-error"),d(1," L'\xE2ge doit \xEAtre compris entre 13 et 120 ans "),s())}function Jm(i,t){i&1&&w(0,"mat-spinner",24)}function Ym(i,t){i&1&&(c(0,"span"),d(1,"Mettre \xE0 jour le profil"),s())}function Zm(i,t){i&1&&(c(0,"mat-error"),d(1," Le mot de passe actuel est obligatoire "),s())}function Km(i,t){i&1&&(c(0,"mat-error"),d(1," Le nouveau mot de passe est obligatoire "),s())}function eu(i,t){i&1&&(c(0,"mat-error"),d(1," Le mot de passe doit contenir au moins 8 caract\xE8res "),s())}function tu(i,t){i&1&&(c(0,"mat-error"),d(1," La confirmation du mot de passe est obligatoire "),s())}function iu(i,t){i&1&&(c(0,"mat-error"),d(1," Les mots de passe ne correspondent pas "),s())}function ru(i,t){i&1&&(c(0,"div",3),w(1,"mat-spinner"),s())}function nu(i,t){if(i&1&&(c(0,"div")(1,"div",25)(2,"div",26)(3,"div",27),d(4),s(),c(5,"div",28),d(6,"Parties jou\xE9es"),s()(),c(7,"div",26)(8,"div",27),d(9),s(),c(10,"div",28),d(11,"Victoires"),s()(),c(12,"div",26)(13,"div",27),d(14),s(),c(15,"div",28),d(16,"Taux de victoire"),s()(),c(17,"div",26)(18,"div",27),d(19),Ba(20,"number"),s(),c(21,"div",28),d(22,"Score moyen"),s()()()()),i&2){let e=C(2);u(4),G(e.playerStats.gamesPlayed),u(5),G(e.playerStats.gamesWon),u(5),E("",e.playerStats.winRate,"%"),u(5),G(Va(20,4,e.playerStats.averageScore,"1.1-1"))}}function au(i,t){i&1&&(c(0,"div",29),d(1," Aucune statistique disponible. Jouez quelques parties ! "),s())}function ou(i,t){if(i&1){let e=j();c(0,"div")(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),d(4),s()(),c(5,"mat-card-content")(6,"div",4)(7,"p",5),d(8,"Pseudo :"),s(),c(9,"p",6),d(10),s()(),c(11,"form",7),S("ngSubmit",function(){I(e);let n=C();return T(n.updateProfile())}),c(12,"mat-form-field",8)(13,"mat-label"),d(14),s(),w(15,"input",9),y(16,Qm,2,0,"mat-error",2),s(),c(17,"mat-form-field",8)(18,"mat-label"),d(19),s(),c(20,"mat-select",10)(21,"mat-option",11),d(22,"Homme"),s(),c(23,"mat-option",12),d(24,"Femme"),s(),c(25,"mat-option",13),d(26,"Autre"),s()()(),c(27,"div",14)(28,"button",15),y(29,Jm,1,0,"mat-spinner",16)(30,Ym,2,0,"span",2),s(),c(31,"button",17),S("click",function(){I(e);let n=C();return T(n.initializeFormValues())}),d(32," R\xE9initialiser "),s()()()()(),c(33,"mat-card",18)(34,"mat-card-header")(35,"mat-card-title"),d(36,"Changer le mot de passe"),s()(),c(37,"mat-card-content")(38,"form",7),S("ngSubmit",function(){I(e);let n=C();return T(n.changePassword())}),c(39,"mat-form-field",8)(40,"mat-label"),d(41,"Mot de passe actuel"),s(),w(42,"input",19),y(43,Zm,2,0,"mat-error",2),s(),c(44,"mat-form-field",8)(45,"mat-label"),d(46,"Nouveau mot de passe"),s(),w(47,"input",20),y(48,Km,2,0,"mat-error",2)(49,eu,2,0,"mat-error",2),s(),c(50,"mat-form-field",8)(51,"mat-label"),d(52,"Confirmer le mot de passe"),s(),w(53,"input",21),y(54,tu,2,0,"mat-error",2)(55,iu,2,0,"mat-error",2),s(),c(56,"button",22),d(57," Changer le mot de passe "),s()()()(),c(58,"mat-card",18)(59,"mat-card-header")(60,"mat-card-title"),d(61,"Statistiques de jeu"),s()(),c(62,"mat-card-content"),y(63,ru,2,0,"div",1)(64,nu,23,7,"div",2)(65,au,2,0,"div",23),s()()()}if(i&2){let e,r,n,a,l,o=C();u(4),E("Profil de ",o.currentPlayer.nickname,""),u(6),G(o.currentPlayer.nickname),u(),g("formGroup",o.profileForm),u(3),E("\xC2ge (actuel : ",o.currentPlayer.age||"Non sp\xE9cifi\xE9",")"),u(),g("placeholder",(o.currentPlayer.age==null?null:o.currentPlayer.age.toString())||"Entrez votre \xE2ge"),u(),g("ngIf",((e=o.profileForm.get("age"))==null||e.errors==null?null:e.errors.min)||((e=o.profileForm.get("age"))==null||e.errors==null?null:e.errors.max)),u(3),E("Genre (actuel : ",o.getGenderLabel(o.currentPlayer.gender),")"),u(9),g("disabled",o.profileForm.invalid||o.loading),u(),g("ngIf",o.loading),u(),g("ngIf",!o.loading),u(),g("disabled",o.loading),u(7),g("formGroup",o.passwordForm),u(5),g("ngIf",(r=o.passwordForm.get("currentPassword"))==null||r.errors==null?null:r.errors.required),u(5),g("ngIf",(n=o.passwordForm.get("newPassword"))==null||n.errors==null?null:n.errors.required),u(),g("ngIf",(a=o.passwordForm.get("newPassword"))==null||a.errors==null?null:a.errors.minlength),u(5),g("ngIf",(l=o.passwordForm.get("confirmPassword"))==null||l.errors==null?null:l.errors.required),u(),g("ngIf",o.passwordForm.hasError("notSame")),u(),g("disabled",o.passwordForm.invalid||o.loading),u(7),g("ngIf",o.loading),u(),g("ngIf",!o.loading&&o.playerStats),u(),g("ngIf",!o.loading&&!o.playerStats)}}var an=class i{constructor(t,e,r){this.fb=t;this.playerService=e;this.snackBar=r;this.currentPlayer=_.getUser(),console.log(this.currentPlayer),this.profileForm=this.fb.group({age:[this.currentPlayer.age,[D.min(13),D.max(120)]],gender:[this.currentPlayer.gender]}),this.passwordForm=this.fb.group({currentPassword:["",[D.required]],newPassword:["",[D.required,D.minLength(8)]],confirmPassword:["",[D.required]]},{validators:this.checkPasswords})}currentPlayer;playerStats=null;profileForm;passwordForm;loading=!1;dataLoading=!0;ngOnInit(){this.loadPlayerData(),this.loadUserStats(),this.initializeFormValues()}loadPlayerData(){this.dataLoading=!0,this.playerService.getPlayerByNickname(this.currentPlayer.nickname).subscribe({next:t=>{console.log("Donn\xE9es joueur r\xE9cup\xE9r\xE9es:",t),this.currentPlayer=t,_.saveUser(t),this.initializeFormValues(),this.dataLoading=!1},error:t=>{console.error("Erreur lors du chargement des donn\xE9es du joueur:",t),this.snackBar.open("Impossible de charger les donn\xE9es du profil","Fermer",{duration:3e3}),this.dataLoading=!1}})}initializeFormValues(){this.profileForm.patchValue({age:this.currentPlayer.age,gender:this.currentPlayer.gender})}updateFormAfterPlayerChange(){this.currentPlayer&&this.initializeFormValues()}loadUserStats(){this.loading=!0,this.playerService.getUserStats(this.currentPlayer.nickname).subscribe({next:t=>{this.playerStats=t,this.loading=!1},error:t=>{console.error("Erreur lors du chargement des statistiques",t),this.snackBar.open("Impossible de charger vos statistiques","Fermer",{duration:3e3}),this.loading=!1}})}updateProfile(){if(this.profileForm.invalid)return;let t={nickname:this.currentPlayer.nickname,age:this.profileForm.get("age")?.value??this.currentPlayer.age,gender:this.profileForm.get("gender")?.value??this.currentPlayer.gender};this.loading=!0,this.playerService.updateUser(t).subscribe({next:e=>{this.currentPlayer=e,_.saveUser(e),this.snackBar.open("Profil mis \xE0 jour avec succ\xE8s","Fermer",{duration:3e3}),this.loading=!1,this.updateFormAfterPlayerChange()},error:e=>{console.error("Erreur lors de la mise \xE0 jour du profil",e),this.snackBar.open("Erreur lors de la mise \xE0 jour du profil","Fermer",{duration:3e3}),this.loading=!1}})}changePassword(){if(this.passwordForm.invalid)return;this.loading=!0;let{currentPassword:t,newPassword:e}=this.passwordForm.value;this.playerService.changePassword(this.currentPlayer.nickname,t,e).subscribe({next:()=>{this.passwordForm.reset(),this.snackBar.open("Mot de passe chang\xE9 avec succ\xE8s","Fermer",{duration:3e3}),this.loading=!1},error:r=>{console.error("Erreur lors du changement de mot de passe",r),this.snackBar.open("Erreur lors du changement de mot de passe","Fermer",{duration:3e3}),this.loading=!1}})}checkPasswords(t){let e=t.get("newPassword")?.value,r=t.get("confirmPassword")?.value;return e===r?null:{notSame:!0}}getGenderLabel(t){if(!t)return"Non sp\xE9cifi\xE9";switch(t){case"M":return"Homme";case"F":return"Femme";case"O":return"Autre";default:return"Non sp\xE9cifi\xE9"}}static \u0275fac=function(e){return new(e||i)(x(yt),x(ki),x(K))};static \u0275cmp=M({type:i,selectors:[["app-account"]],decls:5,vars:2,consts:[[1,"account-container"],["class","center-spinner",4,"ngIf"],[4,"ngIf"],[1,"center-spinner"],[1,"nickname-display"],[1,"label"],[1,"value"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","number","formControlName","age",3,"placeholder"],["formControlName","gender"],["value","M"],["value","F"],["value","O"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["diameter","20",4,"ngIf"],["mat-button","","type","button",3,"click","disabled"],[1,"mt-20"],["matInput","","type","password","formControlName","currentPassword"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","confirmPassword"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["class","no-stats",4,"ngIf"],["diameter","20"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"no-stats"]],template:function(e,r){e&1&&(c(0,"div",0)(1,"h1"),d(2,"Gestion du compte"),s(),y(3,Xm,4,0,"div",1)(4,ou,66,21,"div",2),s()),e&2&&(u(3),g("ngIf",r.dataLoading),u(),g("ngIf",!r.dataLoading))},dependencies:[B,L,qa,kt,_t,Ge,br,be,ft,bt,vt,St,ve,Fe,Ct,Ue,je,J,H,Le,ci,si,z,V,q,Z,Y,Be,It,Et],styles:[".account-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto;padding:0 20px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:20px;margin-top:20px}.stat-item[_ngcontent-%COMP%]{text-align:center;padding:15px;background-color:#f5f5f5;border-radius:8px}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#3f51b5}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-top:5px}.no-stats[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#666}mat-hint[_ngcontent-%COMP%]{font-style:italic;color:#666}.center-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:15px}.nickname-display[_ngcontent-%COMP%]{display:flex;margin-bottom:20px;padding:10px;background-color:#f5f5f5;border-radius:4px}.nickname-display[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;margin-right:10px;min-width:80px}.nickname-display[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#3f51b5;font-weight:500}"]})};var sn="http://localhost:8080/api",Xe=class i{constructor(t){this.http=t}getDefaultGrids(){let t=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${sn}/players/grids/default`,{headers:t})}getPlayerGrids(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${sn}/players/${t}/grids`,{headers:e})}getGridDetails(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${sn}/grids/${t}`,{headers:e})}getAvailableGrids(){return this.getDefaultGrids().pipe(Gt(t=>this.getPlayerGrids(_.getUser().nickname).pipe(we(e=>[...t,...e]))))}createGrid(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.post(`${sn}/grids`,t,{headers:e})}static \u0275fac=function(e){return new(e||i)(Ce(De))};static \u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"})};function su(i,t){i&1&&(c(0,"div"),d(1,"Chargement des grilles..."),s())}function cu(i,t){if(i&1){let e=j();c(0,"mat-card",9),S("click",function(){let n=I(e).$implicit,a=C(3);return T(a.openGridDetails(n))}),c(1,"mat-card-header")(2,"mat-card-title"),d(3),s()(),c(4,"mat-card-content")(5,"p")(6,"strong"),d(7,"Personnages:"),s(),d(8),s()(),c(9,"mat-card-actions")(10,"button",10)(11,"mat-icon"),d(12,"visibility"),s(),d(13," VOIR LES PERSONNAGES "),s()()()}if(i&2){let e=t.$implicit;u(3),G(e.nameGrid),u(5),E(" ",e.characs.length,"")}}function lu(i,t){if(i&1&&(c(0,"div",7),y(1,cu,14,2,"mat-card",8),s()),i&2){let e=C(2);u(),g("ngForOf",e.defaultGrids)}}function du(i,t){i&1&&(c(0,"p"),d(1,"Aucune grille par d\xE9faut disponible."),s())}function mu(i,t){if(i&1){let e=j();c(0,"mat-card",9),S("click",function(){let n=I(e).$implicit,a=C(3);return T(a.openGridDetails(n))}),c(1,"mat-card-header")(2,"mat-card-title"),d(3),s()(),c(4,"mat-card-content")(5,"p")(6,"strong"),d(7,"Personnages:"),s(),d(8),s()(),c(9,"mat-card-actions")(10,"button",10)(11,"mat-icon"),d(12,"visibility"),s(),d(13," VOIR LES PERSONNAGES "),s()()()}if(i&2){let e=t.$implicit;u(3),G(e.nameGrid),u(5),E(" ",e.characs.length,"")}}function uu(i,t){if(i&1&&(c(0,"div",7),y(1,mu,14,2,"mat-card",8),s()),i&2){let e=C(2);u(),g("ngForOf",e.playerGrids)}}function hu(i,t){i&1&&(c(0,"p"),d(1,"Vous n'avez cr\xE9\xE9 aucune grille."),s())}function pu(i,t){if(i&1&&(c(0,"div")(1,"h2"),d(2,"Grilles par d\xE9faut"),s(),y(3,lu,2,1,"div",6)(4,du,2,0,"ng-template",null,0,Mn),c(6,"h2"),d(7,"Mes grilles personnalis\xE9es"),s(),y(8,uu,2,1,"div",6)(9,hu,2,0,"ng-template",null,1,Mn),s()),i&2){let e=Ze(5),r=Ze(10),n=C();u(3),g("ngIf",n.defaultGrids.length>0)("ngIfElse",e),u(5),g("ngIf",n.playerGrids.length>0)("ngIfElse",r)}}var ln=class i{constructor(t,e,r){this.gridService=t;this.router=e;this.dialog=r}defaultGrids=[];playerGrids=[];loading=!0;currentPlayer;ngOnInit(){this.currentPlayer=_.getUser(),this.loadGrids()}loadGrids(){this.loading=!0,this.gridService.getDefaultGrids().subscribe({next:t=>{this.defaultGrids=t,this.loading=!1},error:t=>{console.error("Erreur lors du chargement des grilles par d\xE9faut",t),this.loading=!1}}),this.gridService.getPlayerGrids(this.currentPlayer.nickname).subscribe({next:t=>{this.playerGrids=t,this.loading=!1},error:t=>{console.error("Erreur lors du chargement des grilles du joueur",t),this.loading=!1}})}openGridDetails(t){this.router.navigate(["/player/grid-details",t.idGrid])}createNewGrid(){this.router.navigate(["/player/create-grid"])}static \u0275fac=function(e){return new(e||i)(x(Xe),x(oe),x(Er))};static \u0275cmp=M({type:i,selectors:[["app-grids"]],decls:10,vars:2,consts:[["noDefaultGrids",""],["noPlayerGrids",""],[1,"grids-container"],[1,"header"],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],["class","grids-grid",4,"ngIf","ngIfElse"],[1,"grids-grid"],["class","grid-card",3,"click",4,"ngFor","ngForOf"],[1,"grid-card",3,"click"],["mat-button","","color","primary"]],template:function(e,r){e&1&&(c(0,"div",2)(1,"div",3)(2,"h1"),d(3,"Grilles"),s(),c(4,"button",4),S("click",function(){return r.createNewGrid()}),c(5,"mat-icon"),d(6,"add"),s(),d(7," Cr\xE9er une nouvelle grille "),s()(),y(8,su,2,0,"div",5)(9,pu,11,4,"div",5),s()),e&2&&(u(8),g("ngIf",r.loading),u(),g("ngIf",!r.loading))},dependencies:[L,ae,le,ce,z,V,wt,q,Z,Y,H],styles:[".grids-container[_ngcontent-%COMP%]{padding:20px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px;font-size:18px;color:#666}.grids-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;margin-bottom:30px}.grid-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s}.grid-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 6px 12px #00000026}h2[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:15px;color:#333;border-bottom:1px solid #eee;padding-bottom:10px}"]})};var _u=["switch"],bu=["*"];function vu(i,t){i&1&&(c(0,"span",10),nr(),c(1,"svg",12),w(2,"path",13),s(),c(3,"svg",14),w(4,"path",15),s()())}var yu=new ii("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),xu={provide:gr,useExisting:ir(()=>un),multi:!0},dn=class{source;checked;constructor(t,e){this.source=t,this.checked=e}},un=(()=>{class i{_elementRef=F(Nt);_focusMonitor=F(Xa);_changeDetectorRef=F(mr);defaults=F(yu);_onChange=e=>{};_onTouched=()=>{};_validatorOnChange=()=>{};_uniqueId;_checked=!1;_createChangeEvent(e){return new dn(this,e)}_labelId;get buttonId(){return`${this.id||this._uniqueId}-button`}_switchElement;focus(){this._switchElement.nativeElement.focus()}_noopAnimations;_focused;name=null;id;labelPosition="after";ariaLabel=null;ariaLabelledby=null;ariaDescribedby;required;color;disabled=!1;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}hideIcon;disabledInteractive;change=new ri;toggleChange=new ri;get inputId(){return`${this.id||this._uniqueId}-input`}constructor(){F(yr).load(wr);let e=F(new ar("tabindex"),{optional:!0}),r=this.defaults,n=F(or,{optional:!0});this.tabIndex=e==null?0:parseInt(e)||0,this.color=r.color||"accent",this._noopAnimations=n==="NoopAnimations",this.id=this._uniqueId=F(Ii).getId("mat-mdc-slide-toggle-"),this.hideIcon=r.hideIcon??!1,this.disabledInteractive=r.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new dn(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=M({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(r,n){if(r&1&&ni(_u,5),r&2){let a;pt(a=gt())&&(n._switchElement=a.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(r,n){r&2&&(sr("id",n.id),Se("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Ei(n.color?"mat-"+n.color:""),Pe("mat-mdc-slide-toggle-focused",n._focused)("mat-mdc-slide-toggle-checked",n.checked)("_mat-animation-noopable",n._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",ie],color:"color",disabled:[2,"disabled","disabled",ie],disableRipple:[2,"disableRipple","disableRipple",ie],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ur(e)],checked:[2,"checked","checked",ie],hideIcon:[2,"hideIcon","hideIcon",ie],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ie]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],features:[Ut([xu,{provide:fr,useExisting:i,multi:!0}]),rr],ngContentSelectors:bu,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(r,n){if(r&1){let a=j();ut(),c(0,"div",1)(1,"button",2,0),S("click",function(){return I(a),T(n._handleClick())}),w(3,"span",3),c(4,"span",4)(5,"span",5)(6,"span",6),w(7,"span",7),s(),c(8,"span",8),w(9,"span",9),s(),y(10,vu,5,0,"span",10),s()()(),c(11,"label",11),S("click",function(o){return I(a),T(o.stopPropagation())}),ht(12),s()()}if(r&2){let a=Ze(2);g("labelPosition",n.labelPosition),u(),Pe("mdc-switch--selected",n.checked)("mdc-switch--unselected",!n.checked)("mdc-switch--checked",n.checked)("mdc-switch--disabled",n.disabled)("mat-mdc-slide-toggle-disabled-interactive",n.disabledInteractive),g("tabIndex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex)("disabled",n.disabled&&!n.disabledInteractive),Se("id",n.buttonId)("name",n.name)("aria-label",n.ariaLabel)("aria-labelledby",n._getAriaLabelledBy())("aria-describedby",n.ariaDescribedby)("aria-required",n.required||null)("aria-checked",n.checked)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),u(8),g("matRippleTrigger",a)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),u(),In(n.hideIcon?-1:10),u(),g("for",n.buttonId),Se("id",n._labelId)}},dependencies:[kr,Rr],styles:[`.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width, 52px)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height, 32px);border-radius:var(--mdc-switch-track-shape, var(--mat-sys-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width, 2px);border-color:var(--mat-switch-track-outline-color, var(--mat-sys-outline))}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width, 2px);border-color:var(--mat-switch-selected-track-outline-color, transparent)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width, 2px);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-sys-on-surface))}@media(forced-colors: active){.mdc-switch__track{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-sys-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-sys-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-sys-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-sys-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity, 1);transition:var(--mat-switch-visible-track-transition, opacity 75ms)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity, 0);transition:var(--mat-switch-hidden-track-transition, opacity 75ms)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-sys-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-sys-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-sys-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-sys-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size, 16px);height:var(--mat-switch-unselected-handle-size, 16px);margin:var(--mat-switch-unselected-handle-horizontal-margin, 0 8px)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin, 0 4px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size, 24px);height:var(--mat-switch-selected-handle-size, 24px);margin:var(--mat-switch-selected-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin, 0 24px)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size, 24px);height:var(--mat-switch-with-icon-handle-size, 24px)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size, 28px);height:var(--mat-switch-pressed-handle-size, 28px)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin, 0 22px)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin, 0 2px)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity, 1)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity, 0.38)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media(forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-sys-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-sys-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-sys-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-sys-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-sys-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-sys-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-sys-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size, 40px);height:var(--mdc-switch-state-layer-size, 40px)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-sys-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-sys-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1;transform:translateZ(0)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 16px);height:var(--mdc-switch-unselected-icon-size, 16px);fill:var(--mdc-switch-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-sys-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 16px);height:var(--mdc-switch-selected-icon-size, 16px);fill:var(--mdc-switch-selected-icon-color, var(--mat-sys-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-sys-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}
`],encapsulation:2,changeDetection:0})}return i})();var ol=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=_e({type:i});static \u0275inj=fe({imports:[un,se,se]})}return i})();var sl=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=_e({type:i});static \u0275inj=fe({imports:[se,Ka]})}return i})();var wu=["input"],Cu=["label"],Su=["*"],Eu=new ii("mat-checkbox-default-options",{providedIn:"root",factory:ll});function ll(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var te=function(i){return i[i.Init=0]="Init",i[i.Checked=1]="Checked",i[i.Unchecked=2]="Unchecked",i[i.Indeterminate=3]="Indeterminate",i}(te||{}),Iu={provide:gr,useExisting:ir(()=>dl),multi:!0},ka=class{source;checked},cl=ll(),dl=(()=>{class i{_elementRef=F(Nt);_changeDetectorRef=F(mr);_ngZone=F(ja);_animationMode=F(or,{optional:!0});_options=F(Eu,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let r=new ka;return r.source=this,r.checked=e,r}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new ri;indeterminateChange=new ri;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=te.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){F(yr).load(wr);let e=F(new ar("tabindex"),{optional:!0});this._options=this._options||cl,this.color=this._options.color||cl.color,this.tabIndex=e==null?0:parseInt(e)||0,this.id=this._uniqueId=F(Ii).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate}set indeterminate(e){let r=e!=this._indeterminate;this._indeterminate=e,r&&(this._indeterminate?this._transitionCheckState(te.Indeterminate):this._transitionCheckState(this.checked?te.Checked:te.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_indeterminate=!1;_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let r=this._currentCheckState,n=this._getAnimationTargetElement();if(!(r===e||!n)&&(this._currentAnimationClass&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(r,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);let a=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(a)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?te.Checked:te.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,r){if(this._animationMode==="NoopAnimations")return"";switch(e){case te.Init:if(r===te.Checked)return this._animationClasses.uncheckedToChecked;if(r==te.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case te.Unchecked:return r===te.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case te.Checked:return r===te.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case te.Indeterminate:return r===te.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let r=this._inputElement;r&&(r.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=M({type:i,selectors:[["mat-checkbox"]],viewQuery:function(r,n){if(r&1&&(ni(wu,5),ni(Cu,5)),r&2){let a;pt(a=gt())&&(n._inputElement=a.first),pt(a=gt())&&(n._labelElement=a.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(r,n){r&2&&(sr("id",n.id),Se("tabindex",null)("aria-label",null)("aria-labelledby",null),Ei(n.color?"mat-"+n.color:"mat-accent"),Pe("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mdc-checkbox--disabled",n.disabled)("mat-mdc-checkbox-disabled",n.disabled)("mat-mdc-checkbox-checked",n.checked)("mat-mdc-checkbox-disabled-interactive",n.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",ie],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",ie],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",ie],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:ur(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",ie],checked:[2,"checked","checked",ie],disabled:[2,"disabled","disabled",ie],indeterminate:[2,"indeterminate","indeterminate",ie]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Ut([Iu,{provide:fr,useExisting:i,multi:!0}]),rr],ngContentSelectors:Su,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(r,n){if(r&1){let a=j();ut(),c(0,"div",3),S("click",function(o){return I(a),T(n._preventBubblingFromLabel(o))}),c(1,"div",4,0)(3,"div",5),S("click",function(){return I(a),T(n._onTouchTargetClick())}),s(),c(4,"input",6,1),S("blur",function(){return I(a),T(n._onBlur())})("click",function(){return I(a),T(n._onInputClick())})("change",function(o){return I(a),T(n._onInteractionEvent(o))}),s(),w(6,"div",7),c(7,"div",8),nr(),c(8,"svg",9),w(9,"path",10),s(),Fa(),w(10,"div",11),s(),w(11,"div",12),s(),c(12,"label",13,2),ht(14),s()()}if(r&2){let a=Ze(2);g("labelPosition",n.labelPosition),u(4),Pe("mdc-checkbox--selected",n.checked),g("checked",n.checked)("indeterminate",n.indeterminate)("disabled",n.disabled&&!n.disabledInteractive)("id",n.inputId)("required",n.required)("tabIndex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex),Se("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("aria-checked",n.indeterminate?"mixed":null)("aria-controls",n.ariaControls)("aria-disabled",n.disabled&&n.disabledInteractive?!0:null)("aria-expanded",n.ariaExpanded)("aria-owns",n.ariaOwns)("name",n.name)("value",n.value),u(7),g("matRippleTrigger",a)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),u(),g("for",n.inputId)}},dependencies:[kr,Rr],styles:[`.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover>.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover>.mat-mdc-checkbox-ripple>.mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control+.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mdc-checkbox--disabled{opacity:.5}}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return i})();var ml=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=_e({type:i});static \u0275inj=fe({imports:[dl,se,se]})}return i})();function Tu(i,t){i&1&&(c(0,"div",7),d(1," Chargement des grilles disponibles... "),s())}function Mu(i,t){if(i&1&&(c(0,"mat-option",20),d(1),s()),i&2){let e=t.$implicit,r=C(2);g("value",e.idGrid),u(),ai(" ",e.nameGrid," (",r.elementCount(e)," \xE9l\xE9ments) ")}}function Ru(i,t){if(i&1&&(c(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),d(3,"Taille de la sous-grille"),s(),w(4,"input",21),c(5,"mat-hint"),d(6),s()()()),i&2){let e=C(2);u(6),E("Nombre d'\xE9l\xE9ments al\xE9atoires \xE0 s\xE9lectionner (min: 9, max: ",e.elementCount(),")")}}function Ou(i,t){i&1&&(c(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),d(3,"Nombre maximum de manches"),s(),w(4,"input",22),s()())}function Au(i,t){i&1&&(c(0,"mat-error"),d(1," Le mot de passe est requis "),s())}function Pu(i,t){i&1&&(c(0,"mat-error"),d(1," Le mot de passe doit contenir au moins 4 caract\xE8res "),s())}function Du(i,t){if(i&1&&(c(0,"div",8)(1,"mat-form-field",9)(2,"mat-label"),d(3,"Mot de passe"),s(),w(4,"input",23),y(5,Au,2,0,"mat-error",3)(6,Pu,2,0,"mat-error",3),s()()),i&2){let e,r,n=C(2);u(5),g("ngIf",(e=n.gameForm.get("password"))==null?null:e.hasError("required")),u(),g("ngIf",(r=n.gameForm.get("password"))==null?null:r.hasError("minlength"))}}function Gu(i,t){if(i&1&&(Ft(0),c(1,"h3"),d(2,"Configuration de la grille"),s(),c(3,"div",8)(4,"mat-form-field",9)(5,"mat-label"),d(6,"Grille"),s(),c(7,"mat-select",10),y(8,Mu,2,3,"mat-option",11),s()()(),c(9,"div",12)(10,"mat-slide-toggle",13),d(11," Utiliser une sous-grille al\xE9atoire "),s()(),y(12,Ru,7,1,"div",14),w(13,"mat-divider",15),c(14,"h3"),d(15,"Param\xE8tres de jeu"),s(),c(16,"div",12)(17,"mat-slide-toggle",16),d(18," Nombre de manches illimit\xE9 "),s()(),y(19,Ou,5,0,"div",14),c(20,"div",8)(21,"mat-form-field",9)(22,"mat-label"),d(23,"Nombre de tours"),s(),w(24,"input",17),c(25,"mat-hint"),d(26,"Nombre de questions qu'un joueur peut poser par manche"),s()()(),w(27,"mat-divider",15),c(28,"h3"),d(29,"Param\xE8tres d'acc\xE8s"),s(),c(30,"div",12)(31,"mat-slide-toggle",18),d(32," Prot\xE9ger la partie par mot de passe "),s()(),y(33,Du,7,2,"div",14),c(34,"div",12)(35,"mat-slide-toggle",19),d(36," Autoriser les spectateurs "),s()(),jt()),i&2){let e,r,n,a=C();u(8),g("ngForOf",a.availableGrids),u(4),g("ngIf",(e=a.gameForm.get("useRandomSubgrid"))==null?null:e.value),u(7),g("ngIf",!((r=a.gameForm.get("unlimitedRounds"))!=null&&r.value)),u(14),g("ngIf",(n=a.gameForm.get("usePassword"))==null?null:n.value)}}var hn=class i{constructor(t,e,r,n,a,l){this.fb=t;this.router=e;this.gridService=r;this.gameService=n;this.snackBar=a;this.storageService=l;this.gameForm=this.fb.group({gridId:[null,D.required],useRandomSubgrid:[!1],subgridSize:[24,[D.required,D.min(9),D.max(36)]],maxRounds:[10,[D.required,D.min(1)]],unlimitedRounds:[!1],maxTurns:[5,[D.required,D.min(1)]],usePassword:[!1],password:[""],allowSpectators:[!0]})}gameForm;availableGrids=[];loading=!0;ngOnInit(){this.loadAvailableGrids(),this.gameForm.get("useRandomSubgrid")?.valueChanges.subscribe(t=>{let e=this.gameForm.get("subgridSize");t?e?.enable():e?.disable()}),this.gameForm.get("usePassword")?.valueChanges.subscribe(t=>{let e=this.gameForm.get("password");t?e?.setValidators([D.required,D.minLength(4)]):(e?.clearValidators(),e?.setValue("")),e?.updateValueAndValidity()}),this.gameForm.get("unlimitedRounds")?.valueChanges.subscribe(t=>{let e=this.gameForm.get("maxRounds");t?e?.disable():e?.enable()}),this.gameForm.get("useRandomSubgrid")?.value||this.gameForm.get("subgridSize")?.disable()}loadAvailableGrids(){this.loading=!0,this.gridService.getAvailableGrids().subscribe({next:t=>{this.availableGrids=t,t.length>0&&this.gameForm.get("gridId")?.setValue(t[0].id),this.loading=!1},error:t=>{console.error("Erreur lors du chargement des grilles",t),this.snackBar.open("Erreur lors du chargement des grilles disponibles","Fermer",{duration:3e3}),this.loading=!1}})}onSubmit(){if(this.gameForm.valid){let t={useRandomSubgrid:this.gameForm.get("useRandomSubgrid")?.value,subgridSize:this.gameForm.get("subgridSize")?.value,maxRounds:this.gameForm.get("unlimitedRounds")?.value?-1:this.gameForm.get("maxRounds")?.value,maxQuestionsPerTurn:1,maxTurnsPerRound:this.gameForm.get("maxTurns")?.value},e={winner:null,player1:_.getUser().nickname,player2:null,score1:0,score2:0,grid:this.gameForm.get("gridId")?.value,gameRules:t};this.gameService.createGame(e).subscribe({next:r=>{console.log("Game created with response:",r),this.snackBar.open("Partie cr\xE9\xE9e avec succ\xE8s","Fermer",{duration:3e3}),this.router.navigate(["/player/lobby",r.idG])},error:r=>{console.error("Error creating game:",r),this.snackBar.open("Erreur lors de la cr\xE9ation de la partie","Fermer",{duration:3e3})}})}}goBack(){this.router.navigate(["/player/home"])}elementCount(t){if(t&&t.characters)return t.characters.length;let e=this.gameForm.get("gridId")?.value,r=this.availableGrids.find(n=>n.idGrid===e);return r&&r.characters?r.characters.length:24}static \u0275fac=function(e){return new(e||i)(x(yt),x(oe),x(Xe),x(ye),x(K),x(_))};static \u0275cmp=M({type:i,selectors:[["app-create-game"]],decls:20,vars:4,consts:[[1,"create-game-container"],[3,"ngSubmit","formGroup"],["class","loading-container",4,"ngIf"],[4,"ngIf"],["align","end"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"loading-container"],[1,"form-row"],["appearance","fill"],["formControlName","gridId"],[3,"value",4,"ngFor","ngForOf"],[1,"form-row","toggle-row"],["formControlName","useRandomSubgrid"],["class","form-row",4,"ngIf"],[1,"section-divider"],["formControlName","unlimitedRounds"],["matInput","","type","number","formControlName","maxTurns","min","1"],["formControlName","usePassword"],["formControlName","allowSpectators"],[3,"value"],["matInput","","type","number","formControlName","subgridSize","min","9","max","36"],["matInput","","type","number","formControlName","maxRounds","min","1"],["matInput","","type","password","formControlName","password"]],template:function(e,r){e&1&&(c(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),d(4,"Cr\xE9er une partie"),s(),c(5,"mat-card-subtitle"),d(6,"Param\xE8tres de la partie"),s()(),c(7,"mat-card-content")(8,"form",1),S("ngSubmit",function(){return r.onSubmit()}),y(9,Tu,2,0,"div",2)(10,Gu,37,4,"ng-container",3),s()(),c(11,"mat-card-actions",4)(12,"button",5),S("click",function(){return r.goBack()}),c(13,"mat-icon"),d(14,"arrow_back"),s(),d(15," Annuler "),s(),c(16,"button",6),S("click",function(){return r.onSubmit()}),c(17,"mat-icon"),d(18,"play_arrow"),s(),d(19," Cr\xE9er la partie "),s()()()()),e&2&&(u(8),g("formGroup",r.gameForm),u(),g("ngIf",r.loading),u(),g("ngIf",!r.loading),u(6),g("disabled",r.gameForm.invalid||r.loading))},dependencies:[B,ae,L,xt,_t,Ge,br,be,ft,$a,Ha,kt,bt,vt,le,ce,J,H,Ue,je,ve,Fe,xr,Ct,Le,ci,si,ol,un,sl,z,V,wt,q,Z,Ne,Y,ml,Be,li],styles:[".create-game-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:0 1rem}.form-row[_ngcontent-%COMP%]{margin-bottom:1.5rem;width:100%}.form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.toggle-row[_ngcontent-%COMP%]{display:flex;align-items:center}.section-divider[_ngcontent-%COMP%]{margin:2rem 0}h3[_ngcontent-%COMP%]{margin-top:1.5rem;margin-bottom:1rem;color:#3f51b5}mat-card-actions[_ngcontent-%COMP%]{padding:16px}button[_ngcontent-%COMP%]{margin-left:8px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;font-size:1.2rem;color:#666}"]})};function Nu(i,t){i&1&&(c(0,"div",6),d(1," Chargement des informations de la partie... "),s())}function Fu(i,t){i&1&&(c(0,"p"),d(1,"Cette partie est prot\xE9g\xE9e par un mot de passe"),s())}function ju(i,t){if(i&1&&(c(0,"div",11)(1,"div",12)(2,"mat-icon",20),d(3,"person"),s(),c(4,"span",14),d(5),s()(),c(6,"mat-chip",15),d(7),s()()),i&2){let e=C(2);u(5),G(e.gameData.player2),u(),g("color",e.player2Ready?"primary":"warn"),u(),E(" ",e.player2Ready?"Pr\xEAt":"Pas pr\xEAt"," ")}}function Uu(i,t){i&1&&(c(0,"div",21)(1,"mat-icon",22),d(2,"hourglass_empty"),s(),c(3,"span"),d(4,"En attente d'un deuxi\xE8me joueur..."),s()())}function Lu(i,t){i&1&&(c(0,"p"),d(1," Partagez l'identifiant de la partie pour permettre \xE0 un autre joueur de vous rejoindre. "),s())}function Bu(i,t){i&1&&(c(0,"p"),d(1," Les deux joueurs doivent \xEAtre pr\xEAts pour commencer la partie. "),s())}function Vu(i,t){i&1&&(c(0,"p",23)(1,"mat-icon",24),d(2,"check_circle"),s(),d(3," Les deux joueurs sont pr\xEAts ! La partie va commencer... "),s())}function qu(i,t){if(i&1&&(c(0,"div",7),w(1,"mat-divider"),c(2,"div",8)(3,"h3"),d(4,"Informations de la partie"),s(),c(5,"p"),d(6),s(),y(7,Fu,2,0,"p",9),s(),w(8,"mat-divider"),c(9,"div",10)(10,"h3"),d(11,"Joueurs"),s(),c(12,"div",11)(13,"div",12)(14,"mat-icon",13),d(15,"person"),s(),c(16,"span",14),d(17),s()(),c(18,"mat-chip",15),d(19),s()(),y(20,ju,8,3,"div",16)(21,Uu,5,0,"div",17),s(),w(22,"mat-divider"),c(23,"div",18)(24,"h3"),d(25,"Statut"),s(),y(26,Lu,2,0,"p",9)(27,Bu,2,0,"p",9)(28,Vu,4,0,"p",19),s()()),i&2){let e=C();u(6),E("ID de la partie : ",e.gameId,""),u(),g("ngIf",e.gameData.password),u(10),E("",e.gameData.player1," (Cr\xE9ateur)"),u(),g("color",e.player1Ready?"primary":"warn"),u(),E(" ",e.player1Ready?"Pr\xEAt":"Pas pr\xEAt"," "),u(),g("ngIf",e.player2Present),u(),g("ngIf",!e.player2Present),u(5),g("ngIf",!e.player2Present),u(),g("ngIf",e.player2Present&&!(e.player1Ready&&e.player2Ready)),u(),g("ngIf",e.player1Ready&&e.player2Ready&&e.player2Present)}}var pn=class i{constructor(t,e,r,n,a){this.route=t;this.router=e;this.gameService=r;this.webSocketService=n;this.snackBar=a}gameData=null;gameId=null;currentUser;isCreator=!1;player1Ready=!1;player2Ready=!1;player2Present=!1;subscriptions=[];ngOnInit(){if(this.currentUser=_.getUser(),this.gameId=this.route.snapshot.paramMap.get("id"),this.gameId){this.loadGameDetails();let t=this.webSocketService.getPlayerReadyUpdates(this.gameId).subscribe(a=>{console.log("=== READY STATUS UPDATE ==="),console.log("Received update:",a),console.log("Current state:",{player1Ready:this.player1Ready,player2Ready:this.player2Ready,player2Present:this.player2Present,isCreator:this.isCreator,currentUser:this.currentUser.nickname}),a&&typeof a=="object"&&(a.event||a.type?a.playerNickname&&a.ready!==void 0&&(console.log("Processing individual ready update:",a),a.playerNickname===this.gameData?.player1&&(this.player1Ready=a.ready,console.log("Updated player1 ready state:",this.player1Ready)),a.playerNickname===this.gameData?.player2&&(this.player2Ready=a.ready,console.log("Updated player2 ready state:",this.player2Ready)),a.playerNickname!==this.currentUser.nickname&&this.snackBar.open(`${a.playerNickname} est ${a.ready?"pr\xEAt":"pas pr\xEAt"}`,"Fermer",{duration:2e3})):(this.gameData?.player1&&a[this.gameData.player1]!==void 0&&(this.player1Ready=!!a[this.gameData.player1],console.log(`Updated player1 (${this.gameData.player1}) ready from map:`,this.player1Ready)),this.gameData?.player2&&a[this.gameData.player2]!==void 0&&(this.player2Ready=!!a[this.gameData.player2],console.log(`Updated player2 (${this.gameData.player2}) ready from map:`,this.player2Ready))),console.log("Updated game state:",{player1Ready:this.player1Ready,player2Ready:this.player2Ready,player2Present:this.player2Present}),this.checkGameCanStart())}),e=this.webSocketService.getGameStartNotification(this.gameId).subscribe(a=>{console.log("Game start notification:",a),a.status==="GAME_STARTED"&&(this.snackBar.open("La partie va commencer !","Fermer",{duration:2e3}),setTimeout(()=>{this.router.navigate(["/player/game",this.gameId])},2e3))}),r=this.webSocketService.getPlayerJoinUpdates(this.gameId).subscribe(a=>{if(console.log("Player join update received:",a),a.status==="JOINED"&&a.player2){let l=a.player2;(!this.gameData?.player2||this.gameData.player2!==l)&&(console.log("Updating player2 status:",{previous:this.gameData?.player2,new:l}),this.player2Present=!0,this.gameData=Pt(At({},this.gameData),{player2:l}),this.isCreator?this.player2Ready=!1:this.player1Ready=!1,this.snackBar.open(`${l} a rejoint le lobby`,"Fermer",{duration:3e3}),setTimeout(()=>{this.webSocketService.requestReadyStatus(this.gameId)},500))}}),n=this.webSocketService.getPlayerLeaveUpdates(this.gameId).subscribe(a=>{console.log("Player leave update:",a),a.isCreator?this.gameService.deleteGame(this.gameId).subscribe({next:()=>{this.snackBar.open("Partie annul\xE9e","Fermer",{duration:3e3}),this.router.navigate(["/player/home"])},error:l=>{console.error("Erreur lors de l'annulation de la partie",l),this.snackBar.open("Erreur lors de l'annulation de la partie","Fermer",{duration:3e3})}}):a.playerNickname!==this.currentUser.nickname&&(this.player2Present=!1,this.gameData.player2=null,this.player2Ready=!1,this.snackBar.open(`${a.playerNickname} a quitt\xE9 le lobby`,"Fermer",{duration:3e3}))});this.subscriptions.push(t,r,e,n),setTimeout(()=>{this.webSocketService.requestReadyStatus(this.gameId)},500)}}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}checkGameCanStart(){let t={player1Ready:this.player1Ready,player2Ready:this.player2Ready,player2Present:this.player2Present,isCreator:this.isCreator,currentUser:this.currentUser.nickname,gameData:{player1:this.gameData?.player1,player2:this.gameData?.player2}};console.log("=== GAME START CHECK ==="),console.log("Current game state:",JSON.stringify(t,null,2));let e={player1Ready:this.player1Ready===!0,player2Ready:this.player2Ready===!0,player2Present:this.player2Present===!0,hasGameData:!!this.gameData,player1Exists:!!this.gameData?.player1,player2Exists:!!this.gameData?.player2};if(Object.values(e).every(n=>n===!0))console.log("Toutes les conditions sont remplies!"),this.isCreator&&(console.log("Le cr\xE9ateur d\xE9marre la partie...",{gameId:this.gameId,creator:this.currentUser.nickname}),this.webSocketService.setGameStarted(this.gameId)),this.snackBar.open("La partie va commencer!","Fermer",{duration:2e3}),setTimeout(()=>{this.router.navigate(["/player/game",this.gameId])},2e3);else{let n=Object.entries(e).filter(([a,l])=>!l).map(([a])=>a);console.log("Impossible de d\xE9marrer. Conditions manquantes:",n)}}loadGameDetails(){this.gameId&&this.gameService.getGame(this.gameId).subscribe({next:t=>{console.log("Game details loaded:",t),this.gameData=t,console.log("Game rules:",this.gameData.gameRules),this.isCreator=t.player1===this.currentUser.nickname,this.player2Present=!!t.player2,console.log("Initial game state:",{isCreator:this.isCreator,player2Present:this.player2Present,currentUser:this.currentUser.nickname,player1:t.player1,player2:t.player2}),this.player2Present&&!this.isCreator&&this.snackBar.open("Vous avez rejoint le lobby","Fermer",{duration:3e3})},error:t=>{console.error("Erreur lors du chargement des d\xE9tails de la partie",t),this.snackBar.open("Impossible de charger les d\xE9tails de la partie","Fermer",{duration:3e3})}})}toggleReady(){if(!this.gameId||!this.gameData)return;let e=!(this.isCreator?this.player1Ready:this.player2Ready);this.isCreator?this.player1Ready=e:this.player2Ready=e,this.webSocketService.setPlayerReady(this.gameId,this.currentUser.nickname,e),console.log("Ready status updated:",{player:this.currentUser.nickname,newStatus:e,currentState:{player1Ready:this.player1Ready,player2Ready:this.player2Ready,isCreator:this.isCreator}})}leaveLobby(){let t=this.gameData&&this.gameData.player1===this.currentUser.nickname;this.webSocketService.leaveLobby(this.gameId,this.currentUser.nickname,t),t?this.gameService.deleteGame(this.gameId).subscribe({next:()=>{console.log("Partie supprim\xE9e avec succ\xE8s"),this.snackBar.open("Vous avez annul\xE9 la partie","Fermer",{duration:3e3})},error:e=>{console.error("Erreur lors de la suppression de la partie:",e),this.snackBar.open("Erreur lors de l'annulation de la partie","Fermer",{duration:3e3})}}):this.snackBar.open("Vous avez quitt\xE9 le lobby","Fermer",{duration:3e3}),this.router.navigate(["/player/home"])}static \u0275fac=function(e){return new(e||i)(x(oi),x(oe),x(ye),x(We),x(K))};static \u0275cmp=M({type:i,selectors:[["app-lobby"]],decls:19,vars:6,consts:[[1,"lobby-container"],["class","loading",4,"ngIf"],["class","lobby-content",4,"ngIf"],["align","end"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","",3,"click","color","disabled"],[1,"loading"],[1,"lobby-content"],[1,"game-info"],[4,"ngIf"],[1,"players-section"],[1,"player-row"],[1,"player-info"],["color","primary",1,"player-icon"],[1,"player-name"],["selected","",3,"color"],["class","player-row",4,"ngIf"],["class","player-row waiting-message",4,"ngIf"],[1,"status-section"],["class","ready-message",4,"ngIf"],["color","accent",1,"player-icon"],[1,"player-row","waiting-message"],["color","warn"],[1,"ready-message"],["color","primary"]],template:function(e,r){e&1&&(c(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),d(4,"Lobby de partie"),s(),c(5,"mat-card-subtitle"),d(6,"En attente de joueurs..."),s()(),c(7,"mat-card-content"),y(8,Nu,2,0,"div",1)(9,qu,29,10,"div",2),s(),c(10,"mat-card-actions",3)(11,"button",4),S("click",function(){return r.leaveLobby()}),c(12,"mat-icon"),d(13,"exit_to_app"),s(),d(14," Quitter "),s(),c(15,"button",5),S("click",function(){return r.toggleReady()}),c(16,"mat-icon"),d(17),s(),d(18),s()()()()),e&2&&(u(8),g("ngIf",!r.gameData),u(),g("ngIf",r.gameData),u(6),g("color",r.isCreator&&r.player1Ready||!r.isCreator&&r.player2Ready?"warn":"primary")("disabled",!r.player2Present&&!r.isCreator),u(2),G(r.isCreator&&r.player1Ready||!r.isCreator&&r.player2Ready?"cancel":"check_circle"),u(),E(" ",r.isCreator&&r.player1Ready||!r.isCreator&&r.player2Ready?"Annuler pr\xEAt":"Je suis pr\xEAt"," "))},dependencies:[z,V,wt,q,Z,Ne,Y,le,ce,Be,li,to,B,L,J,H],styles:[".lobby-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:0 1rem}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;font-size:1.2rem;color:#666}.lobby-content[_ngcontent-%COMP%]{padding:1rem 0}mat-divider[_ngcontent-%COMP%]{margin:1.5rem 0}.game-info[_ngcontent-%COMP%], .players-section[_ngcontent-%COMP%], .status-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}h3[_ngcontent-%COMP%]{color:#3f51b5;margin-bottom:1rem}.player-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding:.5rem;border-radius:4px;background-color:#f5f5f5}.player-info[_ngcontent-%COMP%]{display:flex;align-items:center}.player-icon[_ngcontent-%COMP%]{margin-right:.5rem}.waiting-message[_ngcontent-%COMP%]{color:#f44336;justify-content:center}.ready-message[_ngcontent-%COMP%]{display:flex;align-items:center;color:#4caf50;font-weight:500}.ready-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}"]})};var gn=class{tracker;columnIndex=0;rowIndex=0;get rowCount(){return this.rowIndex+1}get rowspan(){let t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}positions;update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(r=>this._trackTile(r))}_trackTile(t){let e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new wa(this.rowIndex,e)}_findMatchingGap(t){t>this.tracker.length;let e=-1,r=-1;do{if(this.columnIndex+t>this.tracker.length){this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(e);continue}if(e=this.tracker.indexOf(0,this.columnIndex),e==-1){this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),r=this._findGapEndIndex(e);continue}r=this._findGapEndIndex(e),this.columnIndex=e+1}while(r-e<t||r==0);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(this.tracker[e]!=0)return e;return this.tracker.length}_markTilePosition(t,e){for(let r=0;r<e.colspan;r++)this.tracker[t+r]=e.rowspan}},wa=class{row;col;constructor(t,e){this.row=t,this.col=e}};var ul=["*"];var zu=`.mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}
`,hl=new ii("MAT_GRID_LIST"),Ia=(()=>{class i{_element=F(Nt);_gridList=F(hl,{optional:!0});_rowspan=1;_colspan=1;constructor(){}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(vr(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(vr(e))}_setStyle(e,r){this._element.nativeElement.style[e]=r}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=M({type:i,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(r,n){r&2&&Se("rowspan",n.rowspan)("colspan",n.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],ngContentSelectors:ul,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(r,n){r&1&&(ut(),c(0,"div",0),ht(1),s())},styles:[`.mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size, var(--mat-sys-body-large))}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size, var(--mat-sys-body-medium))}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}
`],encapsulation:2,changeDetection:0})}return i})();var Hu=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/,Yi=class{_gutterSize;_rows=0;_rowspan=0;_cols;_direction;init(t,e,r,n){this._gutterSize=pl(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=r,this._direction=n}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return e===0?"0":Zt(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,r){let n=100/this._cols,a=(this._cols-1)/this._cols;this.setColStyles(t,r,n,a),this.setRowStyles(t,e,n,a)}setColStyles(t,e,r,n){let a=this.getBaseTileSize(r,n),l=this._direction==="rtl"?"right":"left";t._setStyle(l,this.getTilePosition(a,e)),t._setStyle("width",Zt(this.getTileSize(a,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}},Ca=class extends Yi{fixedRowHeight;constructor(t){super(),this.fixedRowHeight=t}init(t,e,r,n){super.init(t,e,r,n),this.fixedRowHeight=pl(this.fixedRowHeight),Hu.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",Zt(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",Zt(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}},Sa=class extends Yi{rowHeightRatio;baseTileHeight;constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,r,n){let a=r/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(a,n),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",Zt(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",Zt(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){let e=t.split(":");e.length,this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}},Ea=class extends Yi{setRowStyles(t,e){let r=100/this._rowspan,n=(this._rows-1)/this._rows,a=this.getBaseTileSize(r,n);t._setStyle("top",this.getTilePosition(a,e)),t._setStyle("height",Zt(this.getTileSize(a,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}};function Zt(i){return`calc(${i})`}function pl(i){return i.match(/([A-Za-z%]+)$/)?i:`${i}px`}var $u="fit",gl=(()=>{class i{_element=F(Nt);_dir=F(Ja,{optional:!0});_cols;_tileCoordinator;_rowHeight;_gutter="1px";_tileStyler;_tiles;constructor(){}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(vr(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){let r=`${e??""}`;r!==this._rowHeight&&(this._rowHeight=r,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){this.cols}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),e===$u?this._tileStyler=new Ea:e&&e.indexOf(":")>-1?this._tileStyler=new Sa(e):this._tileStyler=new Ca(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new gn);let e=this._tileCoordinator,r=this._tiles.filter(a=>!a._gridList||a._gridList===this),n=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,r),this._tileStyler.init(this.gutterSize,e,this.cols,n),r.forEach((a,l)=>{let o=e.positions[l];this._tileStyler.setStyle(a,o.row,o.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}static \u0275fac=function(r){return new(r||i)};static \u0275cmp=M({type:i,selectors:[["mat-grid-list"]],contentQueries:function(r,n,a){if(r&1&&Tn(a,Ia,5),r&2){let l;pt(l=gt())&&(n._tiles=l)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(r,n){r&2&&Se("cols",n.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],features:[Ut([{provide:hl,useExisting:i}])],ngContentSelectors:ul,decls:2,vars:0,template:function(r,n){r&1&&(ut(),c(0,"div"),ht(1),s())},styles:[zu],encapsulation:2,changeDetection:0})}return i})(),fl=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=_e({type:i});static \u0275inj=fe({imports:[Rn,se,Rn,se]})}return i})();function Xu(i,t){if(i&1&&(c(0,"mat-option",5),d(1),s()),i&2){let e=t.$implicit;g("value",e),u(),E(" ",e.name," ")}}var Zi=class i{constructor(t,e){this.dialogRef=t;this.data=e}selectedCharacter=null;onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close({character:this.selectedCharacter})}static \u0275fac=function(e){return new(e||i)(x(Cr),x(Sr))};static \u0275cmp=M({type:i,selectors:[["app-guess-dialog"]],decls:13,vars:3,consts:[["mat-dialog-title",""],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[3,"value"]],template:function(e,r){e&1&&(c(0,"h2",0),d(1,"Devinez le personnage"),s(),c(2,"mat-dialog-content")(3,"mat-form-field")(4,"mat-label"),d(5,"S\xE9lectionnez un personnage"),s(),c(6,"mat-select",1),dr("ngModelChange",function(a){return lr(r.selectedCharacter,a)||(r.selectedCharacter=a),a}),y(7,Xu,2,2,"mat-option",2),s()()(),c(8,"mat-dialog-actions")(9,"button",3),S("click",function(){return r.onCancel()}),d(10,"Annuler"),s(),c(11,"button",4),S("click",function(){return r.onConfirm()}),d(12," Confirmer "),s()()),e&2&&(u(6),cr("ngModel",r.selectedCharacter),u(),g("ngForOf",r.data.characters),u(4),g("disabled",!r.selectedCharacter))},dependencies:[B,ae,di,Ir,Mr,Tr,St,ve,Fe,Le,ci,si,J,H,xt,be,_r],encapsulation:2})};var Dl=Da(Pl());var _n=class i{constructor(t,e){this.data=t;this.dialogRef=e;e.disableClose=!1}static \u0275fac=function(e){return new(e||i)(x(Sr),x(Cr))};static \u0275cmp=M({type:i,selectors:[["app-result-dialog"]],decls:7,vars:2,consts:[["mat-dialog-title",""],["mat-button","",3,"mat-dialog-close"]],template:function(e,r){e&1&&(c(0,"h2",0),d(1),s(),c(2,"mat-dialog-content"),d(3),s(),c(4,"mat-dialog-actions")(5,"button",1),d(6,"OK"),s()()),e&2&&(u(),G(r.data.title),u(2),G(r.data.content))},dependencies:[B,di,eo,Ir,Mr,Tr,J,H],encapsulation:2})};var bn="http://localhost:8080/api/characs",Qe=class i{constructor(t){this.http=t}getAllCharacs(){let t=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${bn}`,{headers:t})}getCharacById(t){let e=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`});return this.http.get(`${bn}/${t}`,{headers:e})}createCharac(t,e){let r=new FormData;r.append("charac",new Blob([JSON.stringify(t)],{type:"application/json"})),e?(console.log("Image d\xE9tails:",{nom:e.name,type:e.type,taille:e.size,derniereModification:e.lastModified}),r.append("image",e,e.name)):console.log("Aucune image fournie"),console.log("FormData contient 'charac':",r.has("charac")),console.log("FormData contient 'image':",r.has("image"));let n=new P({Authorization:`Bearer ${_.getToken()}`});return this.http.post(`${bn}`,r,{headers:n})}getCharacImageUrl(t){let e=new P({Accept:"text/plain",Authorization:`Bearer ${_.getToken()}`}),r=typeof t=="object"?t.idC:t;return this.http.get(`${bn}/${r}/image-url`,{headers:e,responseType:"text"})}static \u0275fac=function(e){return new(e||i)(Ce(De))};static \u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"})};function th(i,t){if(i&1&&(c(0,"mat-grid-tile")(1,"mat-card",18),w(2,"img",19),c(3,"mat-card-header")(4,"mat-card-title"),d(5),s()(),c(6,"mat-card-content")(7,"p"),d(8),s()()()()),i&2){let e=t.$implicit,r=C(2);u(2),g("src",r.getCharacterImageUrl(e.idC),Ye)("alt",e.name),u(3),G(e.name),u(3),G(e.caracteristic)}}function ih(i,t){if(i&1&&(c(0,"mat-grid-list",16),y(1,th,9,4,"mat-grid-tile",17),s()),i&2){let e=C();g("cols",4),u(),g("ngForOf",e.characters)}}function rh(i,t){if(i&1&&(c(0,"div",20)(1,"span",21),d(2),s(),c(3,"span",22),d(4),s()()),i&2){let e=t.$implicit;g("ngClass",e.type.toLowerCase()),u(2),E("",e.sender,":"),u(2),G(e.content)}}function nh(i,t){if(i&1&&(c(0,"mat-hint"),d(1),s()),i&2){let e=C();u(),E(" ",e.canAskQuestion?"Vous pouvez poser une question en commen\xE7ant par '?'":"Attendez la r\xE9ponse \xE0 votre question"," ")}}function ah(i,t){if(i&1){let e=j();c(0,"div",23)(1,"button",24),S("click",function(){I(e);let n=C();return T(n.answerQuestion(!0))}),d(2," OUI "),s(),c(3,"button",25),S("click",function(){I(e);let n=C();return T(n.answerQuestion(!1))}),d(4," NON "),s()()}}function oh(i,t){if(i&1){let e=j();c(0,"div",26)(1,"button",24),S("click",function(){I(e);let n=C();return T(n.makeGuess(!0))}),d(2," Deviner le personnage "),s(),c(3,"button",27),S("click",function(){I(e);let n=C();return T(n.makeGuess(!1))}),d(4,"Passer"),s()()}}var yn=class i{constructor(t,e,r,n,a,l,o){this.route=t;this.webSocketService=e;this.dialog=r;this.gameService=n;this.router=a;this.characService=l;this.snackBar=o}game;gameRules;grid;characters=[];currentPlayer;isCurrentPlayerTurn=!1;canAskQuestion=!0;waitingForAnswer=!1;waitingForGuess=!1;currentQuestion="";messages=[];currentChatMessage="";selectedCharacterToGuess=null;mySelectedCharacter=null;gameStarted=!1;currentRound=1;characterImages=new Map;canAskMoreQuestions=!0;player1TurnsUsed=0;player2TurnsUsed=0;bothPlayersMustGuess=!1;hasGuessedThisRound={player1:!1,player2:!1};tempGuessResults={player1Result:null,player2Result:null};ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.loadGame(t),this.initializeWebSocketConnection(t),setTimeout(()=>{this.synchronizeRound()},1500))}initializeWebSocketConnection(t){this.webSocketService.getGameMessages(t).subscribe(e=>{switch(this.messages.push(e),e.type){case"QUESTION":this.isCurrentPlayerTurn||(this.waitingForAnswer=!0),this.canAskQuestion=!1;break;case"ANSWER":this.isCurrentPlayerTurn?(this.waitingForGuess=!0,this.canAskQuestion=!1,_.getUser().nickname===this.game.player1?this.player1TurnsUsed++:this.player2TurnsUsed++,this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"TURN_UPDATE",content:JSON.stringify({player1TurnsUsed:this.player1TurnsUsed,player2TurnsUsed:this.player2TurnsUsed}),sender:_.getUser().nickname}),this.player1TurnsUsed>=this.gameRules.maxTurnsPerRound&&this.player2TurnsUsed>=this.gameRules.maxTurnsPerRound&&(this.canAskMoreQuestions=!1,this.forceBothPlayersToGuess())):this.waitingForAnswer=!1;break;case"TURN_UPDATE":if(e.sender!==_.getUser().nickname)try{let r=JSON.parse(e.content);this.player1TurnsUsed=r.player1TurnsUsed,this.player2TurnsUsed=r.player2TurnsUsed,this.player1TurnsUsed>=this.gameRules.maxTurnsPerRound&&this.player2TurnsUsed>=this.gameRules.maxTurnsPerRound&&(this.bothPlayersMustGuess||this.forceBothPlayersToGuess())}catch(r){console.error("Error parsing turn update:",r)}break;case"SYSTEM":if(e.content==="PASS_TURN")this.switchTurn();else if(e.content==="INCREMENT_ROUND")this.handleSystemMessage(e);else if(e.content.startsWith("ROUND_")&&e.sender!==_.getUser().nickname){let r=parseInt(e.content.split("_")[1]);isNaN(r)||(console.log("Setting round from message:",{oldRound:this.currentRound,newRound:r,sender:e.sender}),this.currentRound=r)}break;case"SELECTED_CHARACTER":if(e.sender!==_.getUser().nickname){let r=parseInt(e.content);this.selectedCharacterToGuess=this.characters.find(n=>n.idC===r)||null,console.log("Character to guess received:",{id:r,character:this.selectedCharacterToGuess?.name,sender:e.sender})}break;case"GUESS_RESULT":if(e.sender!==_.getUser().nickname)try{let r=JSON.parse(e.content);r.player===this.game.player1?(this.hasGuessedThisRound.player1=!0,this.tempGuessResults.player1Result=r.isCorrect):(this.hasGuessedThisRound.player2=!0,this.tempGuessResults.player2Result=r.isCorrect);let a=this.game.player1===_.getUser().nickname;(a&&this.hasGuessedThisRound.player1||!a&&this.hasGuessedThisRound.player2)&&this.showResultDialog(r.isCorrect,r.character.name)}catch(r){console.error("Error parsing guess result:",r)}break;case"SCORE_UPDATE":if(e.sender!==_.getUser().nickname)try{let r=JSON.parse(e.content);this.game.score1=r.score1,this.game.score2=r.score2,console.log("Score updated from WebSocket:",r)}catch(r){console.error("Error parsing score update:",r)}break}})}initializeGame(t){console.log("Initialisation de la partie:",t),this.game=t,t.gameRules?(console.log("Des r\xE8gles ont \xE9t\xE9 trouv\xE9es:",t.gameRules),this.gameRules={maxRounds:t.gameRules.maxRounds,useRandomSubgrid:t.gameRules.useRandomSubgrid,subgridSize:t.gameRules.subgridSize,maxQuestionsPerTurn:t.gameRules.maxQuestionsPerTurn,maxTurnsPerRound:t.gameRules.maxTurnsPerRound}):(console.warn("Pas de r\xE8gles trouv\xE9es, utilisation des valeurs par d\xE9faut"),this.gameRules={maxRounds:10,useRandomSubgrid:!1,subgridSize:24,maxQuestionsPerTurn:1,maxTurnsPerRound:5}),console.log("R\xE8gles de jeu:",this.gameRules);let e=_.getUser().nickname;this.isCurrentPlayerTurn=e===t.player1,this.canAskQuestion=this.isCurrentPlayerTurn;let r=this.currentRound>=this.gameRules.maxRounds;!this.mySelectedCharacter&&!this.selectedCharacterToGuess&&(console.log("Opening character selection for new game"),setTimeout(()=>{this.openCharacterSelectionDialog()},1e3))}loadGame(t){this.gameService.getGame(t).subscribe({next:e=>{console.log("Full game data received:",e),e.gameRules?this.initializeGame(e):(e.gameRules={maxRounds:10,useRandomSubgrid:!1,subgridSize:24,maxQuestionsPerTurn:1,maxTurnsPerRound:5},this.gameService.updateGameRules(t,e.gameRules).subscribe(r=>{console.log("Game updated with default rules:",r),this.initializeGame(r)})),this.loadGameGrid(e.grid)},error:e=>{console.error("Error loading game:",e)}})}loadGameGrid(t){return this.gameService.getGridById(t).subscribe({next:e=>{console.log("Grid loaded:",e),this.grid=e,this.characters=e.characs,this.preloadCharacterImages(),this.gameRules?.useRandomSubgrid&&this.selectRandomSubgrid(this.gameRules.subgridSize)},error:e=>{console.error("Error loading grid:",e)}})}selectRandomSubgrid(t){if(!this.characters?.length||t>=this.characters.length){console.log("Invalid subgrid configuration:",{currentSize:this.characters?.length,requestedSize:t});return}let e=[...this.characters].sort((o,m)=>o.idC-m.idC),r=this.game.idG.toString();console.log("Using seed for shuffling:",r);let n=(0,Dl.default)(r),l=e.map((o,m)=>({char:o,rand:n()})).sort((o,m)=>o.rand-m.rand).slice(0,t).map(o=>o.char).sort((o,m)=>o.idC-m.idC);console.log("Selected subgrid:",{originalSize:this.characters.length,newSize:l.length,seed:r,firstCharacterId:l[0]?.idC,allCharacterIds:l.map(o=>o.idC)}),this.characters=l}processMessage(t){if(!t?.trim())return;if(t.trim().startsWith("?")){let n=this.game.player1===_.getUser().nickname?this.player1TurnsUsed:this.player2TurnsUsed;if(!this.canAskQuestion||!this.isCurrentPlayerTurn||n>=this.gameRules.maxTurnsPerRound){console.log("Cannot ask question:",{canAskQuestion:this.canAskQuestion,isCurrentPlayerTurn:this.isCurrentPlayerTurn,turnsUsed:n,maxTurns:this.gameRules.maxTurnsPerRound,player:_.getUser().nickname});return}this.webSocketService.sendGameMessage({gameId:this.game.idG,sender:_.getUser().nickname,content:t,type:"QUESTION"}),this.canAskQuestion=!1,this.waitingForAnswer=!0}else this.webSocketService.sendGameMessage({gameId:this.game.idG,sender:_.getUser().nickname,content:t,type:"CHAT"});this.currentChatMessage=""}switchTurn(){this.isCurrentPlayerTurn=!this.isCurrentPlayerTurn,this.canAskQuestion=this.isCurrentPlayerTurn,this.waitingForAnswer=!1,this.waitingForGuess=!1,console.log("Turn switched:",{isCurrentPlayerTurn:this.isCurrentPlayerTurn,canAskQuestion:this.canAskQuestion,player:_.getUser().nickname,player1TurnsUsed:this.player1TurnsUsed,player2TurnsUsed:this.player2TurnsUsed,maxTurns:this.gameRules.maxTurnsPerRound})}answerQuestion(t){!this.waitingForAnswer||this.isCurrentPlayerTurn||(this.webSocketService.sendGameMessage({gameId:this.game.idG,sender:_.getUser().nickname,content:t?"OUI":"NON",type:"ANSWER"}),this.waitingForAnswer=!1)}openGuessDialog(){this.dialog.open(Zi,{width:"300px",data:{characters:this.characters,title:"Devinez le personnage"}}).afterClosed().subscribe(e=>{e?this.handleGuess(e.character):this.makeGuess(!1)})}handleGuess(t){let e=t.idC===this.selectedCharacterToGuess?.idC,r=this.game.player1===_.getUser().nickname;r?(this.hasGuessedThisRound.player1=!0,this.tempGuessResults.player1Result=e):(this.hasGuessedThisRound.player2=!0,this.tempGuessResults.player2Result=e),this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"GUESS_RESULT",content:JSON.stringify({isCorrect:e,character:t,player:_.getUser().nickname}),sender:_.getUser().nickname});let n=r&&e||!r&&!e;this.gameService.updateScore(this.game.idG,n).subscribe(a=>{a&&(this.game=a,this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"SCORE_UPDATE",content:JSON.stringify({score1:a.score1,score2:a.score2}),sender:_.getUser().nickname}),this.showResultDialog(e,t.name),r&&this.hasGuessedThisRound.player1&&this.hasGuessedThisRound.player2&&setTimeout(()=>{this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"SYSTEM",content:"INCREMENT_ROUND",sender:_.getUser().nickname})},1500))})}showResultDialog(t,e){let r=this.gameRules?.maxRounds!==-1&&this.currentRound>=(this.gameRules?.maxRounds||10);this.dialog.open(_n,{width:"300px",data:{title:t?"Correct !":"Faux !",content:this.getResultMessage(t,e,r)}}).afterClosed().subscribe(()=>{r&&this.handleGameOver()})}forceBothPlayersToGuess(){if(this.bothPlayersMustGuess)return;this.bothPlayersMustGuess=!0,this.canAskMoreQuestions=!1,this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"SYSTEM",content:"FORCE_GUESS",sender:_.getUser().nickname});let t=this.game.player1===_.getUser().nickname;(t&&!this.hasGuessedThisRound.player1||!t&&!this.hasGuessedThisRound.player2)&&(this.waitingForGuess=!0,this.snackBar.open("Les deux joueurs doivent deviner !","OK",{duration:3e3}),setTimeout(()=>{this.openGuessDialog()},1e3))}handleSystemMessage(t){if(t.content==="INCREMENT_ROUND")this.currentRound+=1,this.resetRoundState(),this.canAskQuestion=this.isCurrentPlayerTurn,this.selectedCharacterToGuess=null,this.mySelectedCharacter=null,this.characters&&this.characters.length>0&&setTimeout(()=>{this.openCharacterSelectionDialog()},1e3);else if(t.content==="FORCE_GUESS"){if(this.bothPlayersMustGuess)return;this.bothPlayersMustGuess=!0,this.canAskMoreQuestions=!1;let e=this.game.player1===_.getUser().nickname;(e&&!this.hasGuessedThisRound.player1||!e&&!this.hasGuessedThisRound.player2)&&(this.waitingForGuess=!0,this.snackBar.open("Les deux joueurs doivent deviner !","OK",{duration:3e3}),setTimeout(()=>{this.openGuessDialog()},1e3))}}resetRoundState(){this.player1TurnsUsed=0,this.player2TurnsUsed=0,this.canAskMoreQuestions=!0,this.bothPlayersMustGuess=!1,this.hasGuessedThisRound={player1:!1,player2:!1},this.tempGuessResults={player1Result:null,player2Result:null},this.waitingForGuess=!1,this.waitingForAnswer=!1}makeGuess(t){this.waitingForGuess&&(t?this.openGuessDialog():(this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"SYSTEM",content:"PASS_TURN",sender:_.getUser().nickname}),this.waitingForGuess=!1,this.canAskQuestion=!1))}openCharacterSelectionDialog(){if(!this.characters||this.characters.length===0){console.error("No characters available for selection");return}console.log("Opening character selection dialog",{charactersAvailable:this.characters.length,currentPlayer:_.getUser().nickname}),this.dialog.open(Zi,{width:"300px",data:{characters:this.characters,title:"Choisissez votre personnage que l'adversaire devra deviner"},disableClose:!0}).afterClosed().subscribe(e=>{e&&e.character?(console.log("Character selected:",e.character),this.mySelectedCharacter=e.character,this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"SELECTED_CHARACTER",content:e.character.idC.toString(),sender:_.getUser().nickname}),this.gameStarted=!0):(console.error("No character was selected"),setTimeout(()=>this.openCharacterSelectionDialog(),500))})}getResultMessage(t,e,r){if(r)return`Fin de la partie ! ${this.game.score1>this.game.score2?this.game.player1:this.game.player2} remporte la victoire avec un score de ${Math.max(this.game.score1,this.game.score2)} - ${Math.min(this.game.score1,this.game.score2)}`;let n=this.gameRules.maxRounds===-1?`Manche ${this.currentRound}`:`Manche ${this.currentRound}/${this.gameRules.maxRounds}`;return t?`${n} termin\xE9e ! Vous avez trouv\xE9 le bon personnage !`:`${n} - Non, ce n'\xE9tait pas ${e}... Point pour l'adversaire !`}handleGameOver(){localStorage.removeItem(`game_${this.game.idG}_round`);let t=this.game.score1>this.game.score2?this.game.player1:this.game.player2;this.gameService.endGame(this.game.idG,t).subscribe({next:()=>{this.router.navigate(["/games"])},error:e=>console.error("Error ending game:",e)})}synchronizeRound(){this.webSocketService.sendGameMessage({gameId:this.game.idG,type:"SYSTEM",content:`ROUND_${this.currentRound}`})}getCharacterImageUrl(t){let e=typeof t=="object"?t.idC:t;return this.characterImages.get(e)||"http://localhost:8080/images/default.png"}preloadCharacterImages(){let t=this.characters.map(e=>this.characService.getCharacImageUrl(e.idC).pipe(we(r=>({id:e.idC,path:r}))));ti(t).subscribe({next:e=>{e.forEach(r=>{this.characterImages.set(r.id,`http://localhost:8080${r.path}`)}),this.characters=[...this.characters]},error:e=>{console.error("Erreur lors du chargement des images",e)}})}static \u0275fac=function(e){return new(e||i)(x(oi),x(We),x(Er),x(ye),x(oe),x(Qe),x(K))};static \u0275cmp=M({type:i,selectors:[["app-game"]],decls:27,vars:12,consts:[[1,"game-container"],[1,"game-info"],[1,"player-info"],[1,"scores"],["rowHeight","1:1",3,"cols",4,"ngIf"],[1,"game-controls"],[1,"chat-container"],[1,"messages-container"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-input"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Message ou '?' pour une question...",3,"ngModelChange","keyup.enter","ngModel"],[4,"ngIf"],["mat-button","",3,"click"],["class","answer-buttons",4,"ngIf"],["class","guess-buttons",4,"ngIf"],["rowHeight","1:1",3,"cols"],[4,"ngFor","ngForOf"],[1,"character-card"],[1,"character-image",3,"src","alt"],[1,"message",3,"ngClass"],[1,"sender"],[1,"content"],[1,"answer-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"guess-buttons"],["mat-raised-button","",3,"click"]],template:function(e,r){e&1&&(c(0,"div",0)(1,"div",1)(2,"h2"),d(3),s(),c(4,"div",2)(5,"p"),d(6),s(),c(7,"p"),d(8),s()(),c(9,"div",3)(10,"div"),d(11),s(),c(12,"p"),d(13),s()()(),y(14,ih,2,2,"mat-grid-list",4),c(15,"div",5)(16,"div",6)(17,"div",7),y(18,rh,5,3,"div",8),s(),c(19,"div",9)(20,"mat-form-field",10)(21,"input",11),dr("ngModelChange",function(a){return lr(r.currentChatMessage,a)||(r.currentChatMessage=a),a}),S("keyup.enter",function(){return r.processMessage(r.currentChatMessage)}),s(),y(22,nh,2,1,"mat-hint",12),s(),c(23,"button",13),S("click",function(){return r.processMessage(r.currentChatMessage)}),d(24," Envoyer "),s()(),y(25,ah,5,0,"div",14)(26,oh,5,0,"div",15),s()()()),e&2&&(u(3),E("Partie #",r.game==null?null:r.game.idG,""),u(3),E("Joueur 1: ",r.game==null?null:r.game.player1,""),u(2),E("Joueur 2: ",r.game==null?null:r.game.player2,""),u(3),E(" ",(r.gameRules==null?null:r.gameRules.maxRounds)===-1?"Manche "+r.currentRound:"Manche "+r.currentRound+"/"+(r.gameRules==null?null:r.gameRules.maxRounds)," "),u(2),ai("Score: ",r.game==null?null:r.game.score1," - ",r.game==null?null:r.game.score2,""),u(),g("ngIf",r.characters.length),u(4),g("ngForOf",r.messages),u(3),cr("ngModel",r.currentChatMessage),u(),g("ngIf",r.isCurrentPlayerTurn),u(3),g("ngIf",r.waitingForAnswer&&!r.isCurrentPlayerTurn),u(),g("ngIf",r.waitingForGuess&&r.isCurrentPlayerTurn))},dependencies:[fl,gl,Ia,z,V,q,Z,Y,B,hr,ae,L,di,St,ve,xr,Ue,je,J,H,xt,Ge,be,_r,Le],styles:[".messages-container[_ngcontent-%COMP%]{height:300px;overflow-y:auto;padding:10px;border:1px solid #ccc;border-radius:4px;margin-bottom:10px}.message[_ngcontent-%COMP%]{padding:5px;margin-bottom:5px;border-radius:4px}.message.chat[_ngcontent-%COMP%]{background-color:#f5f5f5}.message.question[_ngcontent-%COMP%]{background-color:#e3f2fd}.message.answer[_ngcontent-%COMP%]{background-color:#e8f5e9}.sender[_ngcontent-%COMP%]{font-weight:700;margin-right:8px}.content[_ngcontent-%COMP%]{word-break:break-word}.character-card[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;margin:8px}.character-image[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:4px;margin-bottom:8px}mat-card-header[_ngcontent-%COMP%]{text-align:center}mat-card-content[_ngcontent-%COMP%]{text-align:center}"]})};function sh(i,t){i&1&&(c(0,"mat-error"),d(1," Le nom est obligatoire "),s())}function ch(i,t){i&1&&(c(0,"mat-error"),d(1," Le nom doit contenir au moins 2 caract\xE8res "),s())}function lh(i,t){i&1&&(c(0,"mat-error"),d(1," La charact\xE9ristique est obligatoire "),s())}function dh(i,t){i&1&&(c(0,"mat-error"),d(1," La charact\xE9ristique principale dois contenir au moins 2 caract\xE8res "),s())}function mh(i,t){if(i&1&&(c(0,"div",15),w(1,"img",16),s()),i&2){let e=C();u(),g("src",e.previewUrl,Ye)}}function uh(i,t){i&1&&(c(0,"mat-error"),d(1," L'image est obligatoire "),s())}var xn=class i{constructor(t,e,r,n,a){this.fb=t;this.http=e;this.snackBar=r;this.router=n;this.characService=a;this.characForm=this.fb.group({name:["",[D.required,D.minLength(2),D.maxLength(50)]],caracteristic:["",[D.required,D.minLength(2),D.maxLength(50)]],image:[null,D.required]})}characForm;selectedFile=null;previewUrl=null;isSubmitting=!1;ngOnInit(){}onFileSelected(t){if(t.target.files&&t.target.files.length>0){this.selectedFile=t.target.files[0],console.log("Type de fichier :",this.selectedFile instanceof File),console.log("Objet fichier :",this.selectedFile);let e=new FileReader;e.onload=()=>{this.previewUrl=e.result},e.readAsDataURL(this.selectedFile),this.characForm.patchValue({image:this.selectedFile.name}),this.characForm.get("image")?.markAsTouched()}}onSubmit(){if(this.characForm.valid&&this.selectedFile){this.isSubmitting=!0;let t=new P({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${_.getToken()}`}),e=new FormData,r={name:this.characForm.get("name")?.value,caracteristic:this.characForm.get("caracteristic")?.value},n=this.selectedFile,a=_.getToken();this.characService.createCharac(r,n).subscribe({next:l=>{this.snackBar.open("Personnage cr\xE9\xE9 avec succ\xE8s","Fermer",{duration:3e3}),this.isSubmitting=!1,this.characForm.reset(),this.previewUrl=null,this.selectedFile=null,Object.keys(this.characForm.controls).forEach(o=>{this.characForm.get(o)?.markAsUntouched()}),this.router.navigate(["/player/create-charac"])},error:l=>{console.error("Erreur lors de la cr\xE9ation du personnage",l),this.snackBar.open("Erreur lors de la cr\xE9ation du personnage","Fermer",{duration:3e3}),this.isSubmitting=!1}})}}goBack(){this.router.navigate(["/player/home"])}isImageRequiredAndTouched(){let t=this.characForm.get("image");return!!t&&t.hasError("required")&&t.touched}static \u0275fac=function(e){return new(e||i)(x(yt),x(De),x(K),x(oe),x(Qe))};static \u0275cmp=M({type:i,selectors:[["app-create-charac"]],decls:39,vars:8,consts:[["fileInput",""],[1,"create-character-container"],[3,"ngSubmit","formGroup"],[1,"form-field"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Ex: Sherlock Holmes"],[4,"ngIf"],["matInput","","formControlName","caracteristic","placeholder","Ex: Personnage Historique"],[1,"form-field","image-upload-container"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","file","accept","image/*",2,"display","none",3,"change"],["class","image-preview",4,"ngIf"],[1,"form-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"image-preview"],["alt","Pr\xE9visualisation",3,"src"]],template:function(e,r){if(e&1){let n=j();c(0,"div",1)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),d(4,"Cr\xE9er un nouveau personnage"),s(),c(5,"mat-card-subtitle"),d(6," Ajoutez un personnage \xE0 la base de donn\xE9es pour l'utiliser dans vos grilles "),s()(),c(7,"mat-card-content")(8,"form",2),S("ngSubmit",function(){return I(n),T(r.onSubmit())}),c(9,"div",3)(10,"mat-form-field",4)(11,"mat-label"),d(12,"Nom du personnage"),s(),w(13,"input",5),y(14,sh,2,0,"mat-error",6)(15,ch,2,0,"mat-error",6),s()(),c(16,"div",3)(17,"mat-form-field",4)(18,"mat-label"),d(19,"Caract\xE9ristique principale du personnage"),s(),w(20,"input",7),y(21,lh,2,0,"mat-error",6)(22,dh,2,0,"mat-error",6),s()(),c(23,"div",8)(24,"button",9),S("click",function(){I(n);let l=Ze(29);return T(l.click())}),c(25,"mat-icon"),d(26,"add_photo_alternate"),s(),d(27," S\xE9lectionner une image "),s(),c(28,"input",10,0),S("change",function(l){return I(n),T(r.onFileSelected(l))}),s(),y(30,mh,2,1,"div",11)(31,uh,2,0,"mat-error",6),s(),c(32,"div",12)(33,"button",13),S("click",function(){return I(n),T(r.goBack())}),d(34,"Annuler"),s(),c(35,"button",14)(36,"mat-icon"),d(37,"save"),s(),d(38," Enregistrer "),s()()()()()()}if(e&2){let n,a,l,o;u(8),g("formGroup",r.characForm),u(6),g("ngIf",(n=r.characForm.get("name"))==null?null:n.hasError("required")),u(),g("ngIf",(a=r.characForm.get("name"))==null?null:a.hasError("minlength")),u(6),g("ngIf",(l=r.characForm.get("caracteristic"))==null?null:l.hasError("required")),u(),g("ngIf",(o=r.characForm.get("caracteristic"))==null?null:o.hasError("minlength")),u(8),g("ngIf",r.previewUrl),u(),g("ngIf",r.isImageRequiredAndTouched()),u(4),g("disabled",!r.characForm.valid||r.isSubmitting)}},dependencies:[B,L,xt,_t,Ge,be,ft,kt,bt,vt,J,H,Ue,je,ve,Fe,Ct,Le,z,V,q,Z,Ne,Y,le,ce],styles:[".create-character-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;padding:0 1rem}.full-width[_ngcontent-%COMP%]{width:100%}.form-field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem}.image-upload-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1rem}.image-preview[_ngcontent-%COMP%]{width:100%;max-width:300px;margin-top:1rem;border-radius:4px;overflow:hidden;border:1px solid #ccc}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}mat-card[_ngcontent-%COMP%]{padding:2rem}mat-card-header[_ngcontent-%COMP%]{margin-bottom:2rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:.5rem}"]})};function hh(i,t){i&1&&(c(0,"div",3),w(1,"mat-spinner"),c(2,"p"),d(3,"Chargement des d\xE9tails de la grille..."),s()())}function ph(i,t){if(i&1&&w(0,"img",11),i&2){let e=C().$implicit,r=C(3);g("src",r.getCharacterImageUrl(e.idC),Ye)("alt",e.name)}}function gh(i,t){i&1&&(c(0,"div",12)(1,"span"),d(2,"Pas d'image"),s()())}function fh(i,t){if(i&1&&(c(0,"mat-card",8),y(1,ph,1,2,"img",9)(2,gh,3,0,"div",10),c(3,"mat-card-content")(4,"h3"),d(5),s()()()),i&2){let e=t.$implicit;u(),g("ngIf",e.imagePath),u(),g("ngIf",!e.imagePath),u(3),G(e.name)}}function _h(i,t){if(i&1&&(c(0,"div",6),y(1,fh,6,3,"mat-card",7),s()),i&2){let e=C(2);u(),g("ngForOf",e.grid.characs)}}function bh(i,t){i&1&&(c(0,"div",13)(1,"p"),d(2,"Cette grille ne contient aucun personnage."),s()())}function vh(i,t){if(i&1&&(c(0,"div")(1,"h1"),d(2),s(),y(3,_h,2,1,"div",4)(4,bh,3,0,"div",5),s()),i&2){let e=C();u(2),G(e.grid.nameGrid),u(),g("ngIf",e.grid.characs&&e.grid.characs.length>0),u(),g("ngIf",!e.grid.characs||e.grid.characs.length===0)}}var kn=class i{constructor(t,e,r,n){this.route=t;this.gridService=e;this.characService=r;this.snackBar=n}grid;loading=!0;gridId;characterImages=new Map;characters=[];ngOnInit(){this.gridId=Number(this.route.snapshot.paramMap.get("id")),this.gridId&&this.loadGridDetails(this.gridId),this.loadCharacters()}loadGridDetails(t){this.gridService.getGridDetails(this.gridId).subscribe({next:e=>{this.grid=e,this.loading=!1},error:e=>{console.error("Erreur lors du chargement des d\xE9tails de la grille",e),this.loading=!1}})}loadCharacters(){this.characService.getAllCharacs().subscribe({next:t=>{this.characters=t,this.preloadCharacterImages()},error:t=>{console.error("Erreur lors du chargement des personnages",t),this.snackBar.open("Impossible de charger les personnages","Fermer",{duration:3e3})}})}preloadCharacterImages(){let t=this.characters.map(e=>this.characService.getCharacImageUrl(e.idC).pipe(we(r=>({id:e.idC,path:r}))));ti(t).subscribe({next:e=>{e.forEach(r=>{this.characterImages.set(r.id,`http://localhost:8080${r.path}`)}),this.characters=[...this.characters]},error:e=>{console.error("Erreur lors du chargement des images",e)}})}getCharacterImageUrl(t){let e=typeof t=="object"?t.idC:t;return this.characterImages.get(e)||"http://localhost:8080/images/default.png"}static \u0275fac=function(e){return new(e||i)(x(oi),x(Xe),x(Qe),x(K))};static \u0275cmp=M({type:i,selectors:[["app-grid-details"]],decls:3,vars:2,consts:[[1,"grid-details-container"],["class","loading-spinner",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner"],["class","characters-grid",4,"ngIf"],["class","no-characters",4,"ngIf"],[1,"characters-grid"],["class","character-card",4,"ngFor","ngForOf"],[1,"character-card"],["mat-card-image","","class","character-image",3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],["mat-card-image","",1,"character-image",3,"src","alt"],[1,"no-image"],[1,"no-characters"]],template:function(e,r){e&1&&(c(0,"div",0),y(1,hh,4,0,"div",1)(2,vh,5,3,"div",2),s()),e&2&&(u(),g("ngIf",r.loading),u(),g("ngIf",!r.loading))},dependencies:[L,ae,z,V,q,Ya,It,Et],styles:[".grid-details-container[_ngcontent-%COMP%]{padding:20px}.loading-spinner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px}.characters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;margin-top:20px}.character-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.character-image[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover}.no-image[_ngcontent-%COMP%]{width:100%;height:200px;background-color:#f0f0f0;display:flex;align-items:center;justify-content:center;color:#888}.no-characters[_ngcontent-%COMP%]{margin-top:20px;padding:20px;background-color:#f5f5f5;border-radius:4px;text-align:center}"]})};function yh(i,t){i&1&&(c(0,"mat-error"),d(1,"Le nom est obligatoire"),s())}function xh(i,t){i&1&&(c(0,"mat-error"),d(1,"Le nom doit contenir au moins 3 caract\xE8res"),s())}function kh(i,t){if(i&1){let e=j();c(0,"mat-card",17)(1,"div",18),w(2,"img",19),s(),c(3,"mat-card-content")(4,"h3"),d(5),s()(),c(6,"button",20),S("click",function(n){let a=I(e).$implicit,l=C(2);return T(l.unselectCharacter(a,n))}),c(7,"mat-icon"),d(8,"close"),s()()()}if(i&2){let e=t.$implicit,r=C(2);u(2),g("src",r.getCharacterImageUrl(e),Ye)("alt",e.name),u(3),G(e.name)}}function wh(i,t){if(i&1&&(c(0,"div",14)(1,"h2"),d(2,"Personnages s\xE9lectionn\xE9s"),s(),c(3,"div",15),y(4,kh,9,3,"mat-card",16),s()()),i&2){let e=C();u(4),g("ngForOf",e.selectedCharacters)}}function Ch(i,t){i&1&&(c(0,"div",26)(1,"mat-icon"),d(2,"check_circle"),s()())}function Sh(i,t){if(i&1){let e=j();c(0,"mat-card",24),S("click",function(){let n=I(e).$implicit,a=C(2);return T(a.toggleCharacterSelection(n))}),c(1,"div",18),w(2,"img",19),s(),c(3,"mat-card-content")(4,"h3"),d(5),s()(),y(6,Ch,3,0,"div",25),s()}if(i&2){let e=t.$implicit,r=C(2);Pe("selected",r.isSelected(e)),u(2),g("src",r.getCharacterImageUrl(e),Ye)("alt",e.name),u(3),G(e.name),u(),g("ngIf",r.isSelected(e))}}function Eh(i,t){if(i&1&&(c(0,"div",21)(1,"h2"),d(2,"Personnages disponibles"),s(),c(3,"div",22),y(4,Sh,7,6,"mat-card",23),s()()),i&2){let e=C();u(4),g("ngForOf",e.characters)}}function Ih(i,t){i&1&&w(0,"mat-spinner",27)}function Th(i,t){i&1&&(c(0,"span"),d(1,"Cr\xE9er la grille"),s())}var wn=class i{constructor(t,e,r,n,a){this.fb=t;this.gridService=e;this.characService=r;this.snackBar=n;this.router=a;this.gridForm=this.fb.group({nameGrid:["",[D.required,D.minLength(3)]]})}gridForm;characters=[];selectedCharacters=[];isSubmitting=!1;showCharactersList=!0;currentPlayer;characterImages=new Map;ngOnInit(){this.currentPlayer=_.getUser(),this.loadCharacters()}loadCharacters(){this.characService.getAllCharacs().subscribe({next:t=>{this.characters=t,this.preloadCharacterImages()},error:t=>{console.error("Erreur lors du chargement des personnages",t),this.snackBar.open("Impossible de charger les personnages","Fermer",{duration:3e3})}})}preloadCharacterImages(){let t=this.characters.map(e=>this.characService.getCharacImageUrl(e.idC).pipe(we(r=>({id:e.idC,path:r}))));ti(t).subscribe({next:e=>{e.forEach(r=>{this.characterImages.set(r.id,`http://localhost:8080${r.path}`)}),this.characters=[...this.characters]},error:e=>{console.error("Erreur lors du chargement des images",e)}})}toggleCharacterSelection(t){let e=this.selectedCharacters.findIndex(r=>r.idC===t.idC);e===-1?this.selectedCharacters.length<24?this.selectedCharacters.push(t):this.snackBar.open("Maximum 24 personnages peuvent \xEAtre s\xE9lectionn\xE9s","Fermer",{duration:3e3}):this.selectedCharacters.length>9?this.selectedCharacters.splice(e,1):this.snackBar.open("Minimum 9 personnages doivent \xEAtre s\xE9lectionn\xE9s","Fermer",{duration:3e3})}unselectCharacter(t,e){e&&e.stopPropagation();let r=this.selectedCharacters.findIndex(n=>n.idC===t.idC);r!==-1&&(this.selectedCharacters.length>9?this.selectedCharacters.splice(r,1):this.snackBar.open("Minimum 9 personnages doivent \xEAtre s\xE9lectionn\xE9s","Fermer",{duration:3e3}))}toggleCharacterList(){this.showCharactersList=!this.showCharactersList}isSelected(t){return this.selectedCharacters.some(e=>e.idC===t.idC)}onSubmit(){if(this.gridForm.valid&&this.selectedCharacters.length>=9){this.isSubmitting=!0;let t={nameGrid:this.gridForm.get("nameGrid")?.value,characs:this.selectedCharacters,player:this.currentPlayer.nickname};this.gridService.createGrid(t).subscribe({next:e=>{this.snackBar.open("Grille cr\xE9\xE9e avec succ\xE8s","Fermer",{duration:3e3}),this.isSubmitting=!1,this.router.navigate(["/player/grids"])},error:e=>{console.error("Erreur lors de la cr\xE9ation de la grille",e),this.snackBar.open("Erreur lors de la cr\xE9ation de la grille","Fermer",{duration:3e3}),this.isSubmitting=!1}})}else this.selectedCharacters.length<9&&this.snackBar.open("S\xE9lectionnez au moins 9 personnages","Fermer",{duration:3e3})}getCharacterImageUrl(t){let e=typeof t=="object"?t.idC:t;return this.characterImages.get(e)||"http://localhost:8080/images/default.png"}static \u0275fac=function(e){return new(e||i)(x(yt),x(Xe),x(Qe),x(K),x(oe))};static \u0275cmp=M({type:i,selectors:[["app-create-grid"]],decls:30,vars:11,consts:[[1,"create-grid-container"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","nameGrid","required",""],[4,"ngIf"],[1,"selection-info"],["class","selected-characters-section",4,"ngIf"],[1,"toggle-section"],["type","button","mat-button","","color","primary",3,"click"],["class","characters-section",4,"ngIf"],[1,"actions"],["type","button","mat-button","","routerLink","/player/grids"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["diameter","20",4,"ngIf"],[1,"selected-characters-section"],[1,"characters-grid","selected-characters"],["class","character-card selected",4,"ngFor","ngForOf"],[1,"character-card","selected"],[1,"character-image-container"],[3,"src","alt"],["mat-icon-button","",1,"remove-character-btn",3,"click"],[1,"characters-section"],[1,"characters-grid"],["class","character-card",3,"selected","click",4,"ngFor","ngForOf"],[1,"character-card",3,"click"],["class","selection-overlay",4,"ngIf"],[1,"selection-overlay"],["diameter","20"]],template:function(e,r){if(e&1&&(c(0,"div",0)(1,"h1"),d(2,"Cr\xE9er une nouvelle grille"),s(),c(3,"form",1),S("ngSubmit",function(){return r.onSubmit()}),c(4,"mat-form-field",2)(5,"mat-label"),d(6,"Nom de la grille"),s(),w(7,"input",3),y(8,yh,2,0,"mat-error",4)(9,xh,2,0,"mat-error",4),s(),c(10,"div",5)(11,"p"),d(12,"S\xE9lectionnez entre 9 et 24 personnages pour votre grille"),s(),c(13,"p"),d(14,"Personnages s\xE9lectionn\xE9s: "),c(15,"strong"),d(16),s()()(),y(17,wh,5,1,"div",6),c(18,"div",7)(19,"button",8),S("click",function(){return r.toggleCharacterList()}),c(20,"mat-icon"),d(21),s(),d(22),s()(),y(23,Eh,5,1,"div",9),c(24,"div",10)(25,"button",11),d(26,"Annuler"),s(),c(27,"button",12),y(28,Ih,1,0,"mat-spinner",13)(29,Th,2,0,"span",4),s()()()()),e&2){let n,a;u(3),g("formGroup",r.gridForm),u(5),g("ngIf",(n=r.gridForm.get("nameGrid"))==null?null:n.hasError("required")),u(),g("ngIf",(a=r.gridForm.get("nameGrid"))==null?null:a.hasError("minlength")),u(7),G(r.selectedCharacters.length),u(),g("ngIf",r.selectedCharacters.length>0),u(4),G(r.showCharactersList?"keyboard_arrow_up":"keyboard_arrow_down"),u(),E(" ",r.showCharactersList?"Masquer la liste des personnages":"Afficher la liste des personnages"," "),u(),g("ngIf",r.showCharactersList),u(4),g("disabled",!r.gridForm.valid||r.selectedCharacters.length<9||r.isSubmitting),u(),g("ngIf",r.isSubmitting),u(),g("ngIf",!r.isSubmitting)}},dependencies:[St,ve,Fe,Ct,kt,_t,Ge,be,ft,Wa,bt,vt,Ue,je,z,V,q,le,ce,It,Et,pr,za,L,ae,J,H,Za],styles:[".create-grid-container[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.selection-info[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:15px;border-radius:4px;margin-bottom:20px}.characters-section[_ngcontent-%COMP%]{margin-bottom:30px}.characters-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:15px}.character-card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden}.character-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 5px 15px #0000001a}.character-card.selected[_ngcontent-%COMP%]{border:2px solid #3f51b5}.character-image-container[_ngcontent-%COMP%]{height:180px;overflow:hidden}.character-image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}mat-card-content[_ngcontent-%COMP%]{text-align:center;padding:10px}.selection-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#3f51b54d;display:flex;align-items:center;justify-content:center}.selection-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:40px;height:40px;width:40px}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}button[type=submit][_ngcontent-%COMP%]{min-width:120px;position:relative}mat-spinner[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.selected-characters-section[_ngcontent-%COMP%]{margin-bottom:20px;padding:15px;background-color:#f0f0f0;border-radius:4px}.selected-characters[_ngcontent-%COMP%]{margin-top:10px}.toggle-section[_ngcontent-%COMP%]{margin:20px 0;text-align:center}.remove-character-btn[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;background-color:#fffc;z-index:10}.remove-character-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}"]})};var Gl=(()=>{class i{static \u0275fac=function(r){return new(r||i)};static \u0275mod=_e({type:i});static \u0275inj=fe({imports:[Qa,se,se]})}return i})();var Mh=(i,t,e)=>({gold:i,silver:t,bronze:e}),Rh=(i,t)=>({online:i,offline:t});function Oh(i,t){i&1&&(c(0,"div",4),w(1,"mat-spinner",5),c(2,"p"),d(3,"Chargement du classement..."),s()())}function Ah(i,t){i&1&&(c(0,"th",20),d(1," Rang "),s())}function Ph(i,t){if(i&1&&(c(0,"td",21)(1,"span",22),d(2),s()()),i&2){let e=t.$implicit;u(),g("ngClass",La(2,Mh,e.rank===1,e.rank===2,e.rank===3)),u(),E(" ",e.rank," ")}}function Dh(i,t){i&1&&(c(0,"th",20),d(1," Statut "),s())}function Gh(i,t){if(i&1&&(c(0,"td",21),w(1,"div",23),s()),i&2){let e=t.$implicit;u(),g("ngClass",Ua(1,Rh,e.online,!e.online))}}function Nh(i,t){i&1&&(c(0,"th",20),d(1," Joueur "),s())}function Fh(i,t){if(i&1&&(c(0,"td",21),d(1),s()),i&2){let e=t.$implicit;u(),E(" ",e.nickname," ")}}function jh(i,t){i&1&&(c(0,"th",20),d(1," Victoires "),s())}function Uh(i,t){if(i&1&&(c(0,"td",21),d(1),s()),i&2){let e=t.$implicit;u(),E(" ",e.victories," ")}}function Lh(i,t){i&1&&w(0,"tr",24)}function Bh(i,t){i&1&&w(0,"tr",25)}function Vh(i,t){if(i&1){let e=j();c(0,"div")(1,"table",6),Ft(2,7),y(3,Ah,2,0,"th",8)(4,Ph,3,6,"td",9),jt(),Ft(5,10),y(6,Dh,2,0,"th",8)(7,Gh,2,4,"td",9),jt(),Ft(8,11),y(9,Nh,2,0,"th",8)(10,Fh,2,1,"td",9),jt(),Ft(11,12),y(12,jh,2,0,"th",8)(13,Uh,2,1,"td",9),jt(),y(14,Lh,1,0,"tr",13)(15,Bh,1,0,"tr",14),s(),c(16,"div",15)(17,"button",16),S("click",function(){I(e);let n=C();return T(n.refreshRankings())}),c(18,"mat-icon"),d(19,"refresh"),s()(),c(20,"span",17),w(21,"div",18),d(22," En ligne "),w(23,"div",19),d(24," Hors ligne "),s()()()}if(i&2){let e=C();u(),g("dataSource",e.players),u(13),g("matHeaderRowDef",e.displayedColumns),u(),g("matRowDefColumns",e.displayedColumns)}}var Cn=class i{constructor(t,e){this.playerService=t;this.wsService=e}players=[];loading=!0;displayedColumns=["rank","status","nickname","victories"];wsSubscription=null;ngOnInit(){this.loadPlayerRankings(),this.wsService.connect(),this.wsSubscription=this.wsService.getOnlinePlayers().subscribe(t=>{this.updatePlayerStatus(t)})}ngOnDestroy(){this.wsSubscription&&this.wsSubscription.unsubscribe()}loadPlayerRankings(){this.loading=!0,this.playerService.getPlayerRankings().subscribe({next:t=>{this.players=t.map((e,r)=>Pt(At({},e),{rank:r+1})),this.loading=!1},error:t=>{console.error("Erreur lors du chargement du classement des joueurs",t),this.loading=!1}})}updatePlayerStatus(t){this.players=this.players.map(e=>Pt(At({},e),{online:t.includes(e.nickname)}))}refreshRankings(){this.loadPlayerRankings()}static \u0275fac=function(e){return new(e||i)(x(ki),x(We))};static \u0275cmp=M({type:i,selectors:[["app-scoreboard"]],decls:10,vars:2,consts:[[1,"scoreboard-container"],[1,"scoreboard-card"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["diameter","60"],["mat-table","",1,"ranking-table","mat-elevation-z2",3,"dataSource"],["matColumnDef","rank"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","nickname"],["matColumnDef","victories"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"refresh-container"],["mat-icon-button","","color","primary","aria-label","Rafra\xEEchir le classement",3,"click"],[1,"legend"],[1,"status-indicator","online"],[1,"status-indicator","offline"],["mat-header-cell",""],["mat-cell",""],[1,"rank-badge",3,"ngClass"],[1,"status-indicator",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,r){e&1&&(c(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),d(4,"Classement des joueurs"),s(),c(5,"mat-card-subtitle"),d(6," Class\xE9s par nombre de victoires "),s()(),c(7,"mat-card-content"),y(8,Oh,4,0,"div",2)(9,Vh,25,3,"div",3),s()()()),e&2&&(u(8),g("ngIf",r.loading),u(),g("ngIf",!r.loading))},dependencies:[B,hr,L,z,V,q,Z,Ne,Y,Be,le,ce,Gl,ho,io,no,co,ao,ro,lo,oo,so,mo,uo,It,Et],styles:[".scoreboard-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.scoreboard-card[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:30px}.ranking-table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.status-indicator[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;display:inline-block}.online[_ngcontent-%COMP%]{background-color:#4caf50;box-shadow:0 0 5px #4caf50}.offline[_ngcontent-%COMP%]{background-color:#f44336}.rank-badge[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;width:30px;height:30px;border-radius:50%;background-color:#f0f0f0;font-weight:700}.gold[_ngcontent-%COMP%]{background-color:gold;color:#333}.silver[_ngcontent-%COMP%]{background-color:silver;color:#333}.bronze[_ngcontent-%COMP%]{background-color:#cd7f32;color:#fff}.refresh-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:20px}.legend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.legend[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{margin-right:5px;margin-left:15px}"]})};var qh=[{path:"home",component:Xi},{path:"account",component:an},{path:"grids",component:ln},{path:"grid-details/:id",component:kn},{path:"create-grid",component:wn},{path:"create-game",component:hn},{path:"lobby/:id",component:pn},{path:"game/:id",component:yn},{path:"create-charac",component:xn},{path:"scoreboard",component:Cn},{path:"",redirectTo:"home",pathMatch:"full"}],Nl=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=_e({type:i});static \u0275inj=fe({imports:[B,pr.forChild(qh),Xi]})};export{Nl as PlayerModule};
